{"version":3,"file":"index.cjs","sources":["../../sdk/dist/index.js","../src/createHOCs.tsx","../src/SDKProvider/SDKContext.ts","../src/createHooks.ts","../src/hooks-hocs/back-button.ts","../src/hooks-hocs/biometry-manager.ts","../src/hooks-hocs/closing-behavior.ts","../src/hooks-hocs/cloud-storage.ts","../src/hooks-hocs/haptic-feedback.ts","../src/hooks-hocs/init-data.ts","../src/hooks-hocs/invoice.ts","../src/hooks-hocs/main-button.ts","../src/hooks-hocs/mini-app.ts","../src/hooks-hocs/popup.ts","../src/hooks-hocs/qr-scanner.ts","../src/hooks-hocs/settings-button.ts","../src/hooks-hocs/swipe-behavior.ts","../src/hooks-hocs/theme-params.ts","../src/hooks-hocs/launch-params.ts","../src/hooks-hocs/utils.ts","../src/hooks-hocs/viewport.ts","../src/SDKProvider/SDKProvider.tsx"],"sourcesContent":["var We = Object.defineProperty;\nvar Ue = (s, e, t) => e in s ? We(s, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : s[e] = t;\nvar c = (s, e, t) => (Ue(s, typeof e != \"symbol\" ? e + \"\" : e, t), t);\nfunction oe(s, e) {\n  let t;\n  const n = () => {\n    t !== void 0 && e && e(t), t = void 0;\n  };\n  return [() => t === void 0 ? t = s(n) : t, n];\n}\nfunction ae(s) {\n  const e = M(), { count: t } = e;\n  e.unsubscribe(s), t && !e.count && it();\n}\nfunction He(s) {\n  return M().subscribe(s), () => ae(s);\n}\nclass Oe {\n  constructor(e, t = {}) {\n    this.scope = e, this.options = t;\n  }\n  /**\n   * Prints message into a console in case, logger is currently enabled.\n   * @param level - log level.\n   * @param args - arguments.\n   */\n  print(e, ...t) {\n    const n = /* @__PURE__ */ new Date(), r = Intl.DateTimeFormat(\"en-GB\", {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      second: \"2-digit\",\n      fractionalSecondDigits: 3,\n      timeZone: \"UTC\"\n    }).format(n), { textColor: i, bgColor: o } = this.options, a = \"font-weight: bold;padding: 0 5px;border-radius:5px\";\n    console[e](\n      `%c${r}%c / %c${this.scope}`,\n      `${a};background-color: lightblue;color:black`,\n      \"\",\n      `${a};${i ? `color:${i};` : \"\"}${o ? `background-color:${o}` : \"\"}`,\n      ...t\n    );\n  }\n  /**\n   * Prints error message into a console.\n   * @param args\n   */\n  error(...e) {\n    this.print(\"error\", ...e);\n  }\n  /**\n   * Prints log message into a console.\n   * @param args\n   */\n  log(...e) {\n    this.print(\"log\", ...e);\n  }\n}\nconst F = new Oe(\"SDK\", {\n  bgColor: \"forestgreen\",\n  textColor: \"white\"\n});\nlet O = !1;\nconst se = ({ name: s, payload: e }) => {\n  F.log(\"Event received:\", e ? { name: s, payload: e } : { name: s });\n};\nfunction Kt(s) {\n  O !== s && (O = s, s ? He(se) : ae(se));\n}\nfunction Ge(...s) {\n  O && F.log(...s);\n}\nclass R {\n  constructor() {\n    c(this, \"listeners\", /* @__PURE__ */ new Map());\n    c(this, \"listenersCount\", 0);\n    c(this, \"subscribeListeners\", []);\n  }\n  /**\n   * Removes all event listeners.\n   */\n  clear() {\n    this.listeners.clear(), this.subscribeListeners = [];\n  }\n  /**\n   * Returns count of bound listeners.\n   */\n  get count() {\n    return this.listenersCount + this.subscribeListeners.length;\n  }\n  emit(e, ...t) {\n    this.subscribeListeners.forEach((r) => r({\n      event: e,\n      args: t\n    })), (this.listeners.get(e) || []).forEach(([r, i]) => {\n      r(...t), i && this.off(e, r);\n    });\n  }\n  /**\n   * Adds new event listener.\n   * @param event - event name.\n   * @param listener - event listener.\n   * @param once - should listener be called only once.\n   * @returns Function to remove bound event listener.\n   */\n  on(e, t, n) {\n    let r = this.listeners.get(e);\n    return r || this.listeners.set(e, r = []), r.push([t, n]), this.listenersCount += 1, () => this.off(e, t);\n  }\n  /**\n   * Removes event listener. In case, specified listener was bound several times, it removes\n   * only a single one.\n   * @param event - event name.\n   * @param listener - event listener.\n   */\n  off(e, t) {\n    const n = this.listeners.get(e) || [];\n    for (let r = 0; r < n.length; r += 1)\n      if (t === n[r][0]) {\n        n.splice(r, 1), this.listenersCount -= 1;\n        return;\n      }\n  }\n  /**\n   * Adds a new event listener for all events.\n   * @param listener - event listener.\n   * @returns Function to remove event listener.\n   */\n  subscribe(e) {\n    return this.subscribeListeners.push(e), () => this.unsubscribe(e);\n  }\n  /**\n   * Removes global event listener. In case, specified listener was bound several times, it removes\n   * only a single one.\n   * @param listener - event listener.\n   */\n  unsubscribe(e) {\n    for (let t = 0; t < this.subscribeListeners.length; t += 1)\n      if (this.subscribeListeners[t] === e) {\n        this.subscribeListeners.splice(t, 1);\n        return;\n      }\n  }\n}\nfunction G(s, e, t) {\n  return window.addEventListener(s, e, t), () => window.removeEventListener(s, e, t);\n}\nfunction J(...s) {\n  let e = !1;\n  const t = s.flat(1);\n  return [\n    (n) => !e && t.push(n),\n    () => {\n      e || (e = !0, t.forEach((n) => n()));\n    },\n    e\n  ];\n}\nclass V extends Error {\n  constructor(e, t, n) {\n    super(t, { cause: n }), this.type = e, Object.setPrototypeOf(this, V.prototype);\n  }\n}\nfunction f(s, e, t) {\n  return new V(s, e, t);\n}\nconst je = \"ERR_METHOD_UNSUPPORTED\", ze = \"ERR_METHOD_PARAMETER_UNSUPPORTED\", Fe = \"ERR_UNKNOWN_ENV\", Je = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\", Qe = \"ERR_TIMED_OUT\", Ye = \"ERR_UNEXPECTED_TYPE\", ce = \"ERR_PARSE\", Ze = \"ERR_NAVIGATION_LIST_EMPTY\", Ke = \"ERR_NAVIGATION_CURSOR_INVALID\", Xt = \"ERR_NAVIGATION_ITEM_INVALID\", es = \"ERR_SSR_INIT\", Xe = \"ERR_INVALID_PATH_BASE\";\nfunction E() {\n  return f(Ye, \"Value has unexpected type\");\n}\nclass D {\n  constructor(e, t, n) {\n    this.parser = e, this.isOptional = t, this.type = n;\n  }\n  /**\n   * Attempts to parse passed value\n   * @param value - value to parse.\n   * @throws {SDKError} ERR_PARSE\n   * @see ERR_PARSE\n   */\n  parse(e) {\n    if (!(this.isOptional && e === void 0))\n      try {\n        return this.parser(e);\n      } catch (t) {\n        throw f(\n          ce,\n          `Unable to parse value${this.type ? ` as ${this.type}` : \"\"}`,\n          t\n        );\n      }\n  }\n  optional() {\n    return this.isOptional = !0, this;\n  }\n}\nfunction S(s, e) {\n  return () => new D(s, !1, e);\n}\nconst b = S((s) => {\n  if (typeof s == \"boolean\")\n    return s;\n  const e = String(s);\n  if (e === \"1\" || e === \"true\")\n    return !0;\n  if (e === \"0\" || e === \"false\")\n    return !1;\n  throw E();\n}, \"boolean\");\nfunction pe(s, e) {\n  const t = {};\n  for (const n in s) {\n    const r = s[n];\n    if (!r)\n      continue;\n    let i, o;\n    if (typeof r == \"function\" || \"parse\" in r)\n      i = n, o = typeof r == \"function\" ? r : r.parse.bind(r);\n    else {\n      const { type: a } = r;\n      i = r.from || n, o = typeof a == \"function\" ? a : a.parse.bind(a);\n    }\n    try {\n      const a = o(e(i));\n      a !== void 0 && (t[n] = a);\n    } catch (a) {\n      throw f(ce, `Unable to parse field \"${n}\"`, a);\n    }\n  }\n  return t;\n}\nfunction he(s) {\n  let e = s;\n  if (typeof e == \"string\" && (e = JSON.parse(e)), typeof e != \"object\" || e === null || Array.isArray(e))\n    throw E();\n  return e;\n}\nfunction g(s, e) {\n  return new D((t) => {\n    const n = he(t);\n    return pe(s, (r) => n[r]);\n  }, !1, e);\n}\nconst y = S((s) => {\n  if (typeof s == \"number\")\n    return s;\n  if (typeof s == \"string\") {\n    const e = Number(s);\n    if (!Number.isNaN(e))\n      return e;\n  }\n  throw E();\n}, \"number\"), h = S((s) => {\n  if (typeof s == \"string\" || typeof s == \"number\")\n    return s.toString();\n  throw E();\n}, \"string\");\nfunction ue(s) {\n  return g({\n    eventType: h(),\n    eventData: (e) => e\n  }).parse(s);\n}\nfunction et() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach((s) => {\n    delete window[s];\n  });\n}\nfunction j(s, e) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({ eventType: s, eventData: e }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction tt() {\n  [\n    [\"TelegramGameProxy_receiveEvent\"],\n    // Windows Phone.\n    [\"TelegramGameProxy\", \"receiveEvent\"],\n    // Desktop.\n    [\"Telegram\", \"WebView\", \"receiveEvent\"]\n    // Android and iOS.\n  ].forEach((s) => {\n    let e = window;\n    s.forEach((t, n, r) => {\n      if (n === r.length - 1) {\n        e[t] = j;\n        return;\n      }\n      t in e || (e[t] = {}), e = e[t];\n    });\n  });\n}\nconst st = {\n  clipboard_text_received: g({\n    req_id: h(),\n    data: (s) => s === null ? s : h().optional().parse(s)\n  }),\n  custom_method_invoked: g({\n    req_id: h(),\n    result: (s) => s,\n    error: h().optional()\n  }),\n  popup_closed: {\n    parse(s) {\n      return g({\n        button_id: (e) => e == null ? void 0 : h().parse(e)\n      }).parse(s ?? {});\n    }\n  },\n  viewport_changed: g({\n    height: y(),\n    width: (s) => s == null ? window.innerWidth : y().parse(s),\n    is_state_stable: b(),\n    is_expanded: b()\n  })\n};\nfunction nt() {\n  const s = new R(), e = new R();\n  e.subscribe((n) => {\n    s.emit(\"event\", { name: n.event, payload: n.args[0] });\n  }), tt();\n  const [, t] = J(\n    // Don't forget to remove created handlers.\n    et,\n    // Add \"resize\" event listener to make sure, we always have fresh viewport information.\n    // Desktop version of Telegram is sometimes not sending the viewport_changed\n    // event. For example, when the MainButton is shown. That's why we should\n    // add our own listener to make sure, viewport information is always fresh.\n    // Issue: https://github.com/Telegram-Mini-Apps/telegram-apps/issues/10\n    G(\"resize\", () => {\n      e.emit(\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      });\n    }),\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    G(\"message\", (n) => {\n      if (n.source !== window.parent)\n        return;\n      let r;\n      try {\n        r = ue(n.data);\n      } catch {\n        return;\n      }\n      const { eventType: i, eventData: o } = r, a = st[i];\n      try {\n        const p = a ? a.parse(o) : o;\n        e.emit(...p ? [i, p] : [i]);\n      } catch (p) {\n        F.error(\n          `An error occurred processing the \"${i}\" event from the Telegram application.\nPlease, file an issue here:\nhttps://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose`,\n          r,\n          p\n        );\n      }\n    }),\n    // Clear emitters.\n    () => s.clear(),\n    () => e.clear()\n  );\n  return [{\n    on: e.on.bind(e),\n    off: e.off.bind(e),\n    subscribe(n) {\n      return s.on(\"event\", n);\n    },\n    unsubscribe(n) {\n      s.off(\"event\", n);\n    },\n    get count() {\n      return e.count + s.count;\n    }\n  }, t];\n}\nconst [rt, it] = oe(\n  (s) => {\n    const [e, t] = nt(), n = e.off.bind(e);\n    return e.off = (r, i) => {\n      const { count: o } = e;\n      n(r, i), o && !e.count && s();\n    }, [e, t];\n  },\n  ([, s]) => s()\n);\nfunction M() {\n  return rt()[0];\n}\nfunction B(s, e) {\n  M().off(s, e);\n}\nfunction w(s, e, t) {\n  return M().on(s, e, t);\n}\nfunction k(s) {\n  return typeof s == \"object\" && s !== null && !Array.isArray(s);\n}\nfunction ot(s, e) {\n  const t = s.split(\".\"), n = e.split(\".\"), r = Math.max(t.length, n.length);\n  for (let i = 0; i < r; i += 1) {\n    const o = parseInt(t[i] || \"0\", 10), a = parseInt(n[i] || \"0\", 10);\n    if (o !== a)\n      return o > a ? 1 : -1;\n  }\n  return 0;\n}\nfunction _(s, e) {\n  return ot(s, e) <= 0;\n}\nfunction v(s, e, t) {\n  if (typeof t == \"string\") {\n    if (s === \"web_app_open_link\") {\n      if (e === \"try_instant_view\")\n        return _(\"6.4\", t);\n      if (e === \"try_browser\")\n        return _(\"7.6\", t);\n    }\n    if (s === \"web_app_set_header_color\" && e === \"color\")\n      return _(\"6.9\", t);\n    if (s === \"web_app_close\" && e === \"return_back\")\n      return _(\"7.6\", t);\n  }\n  switch (s) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return _(\"6.1\", e);\n    case \"web_app_open_popup\":\n      return _(\"6.2\", e);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return _(\"6.4\", e);\n    case \"web_app_switch_inline_query\":\n      return _(\"6.7\", e);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return _(\"6.9\", e);\n    case \"web_app_setup_settings_button\":\n      return _(\"6.10\", e);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return _(\"7.2\", e);\n    case \"web_app_setup_swipe_behavior\":\n      return _(\"7.7\", e);\n    default:\n      return [\n        \"iframe_ready\",\n        \"iframe_will_reload\",\n        \"web_app_close\",\n        \"web_app_data_send\",\n        \"web_app_expand\",\n        \"web_app_open_link\",\n        \"web_app_ready\",\n        \"web_app_request_theme\",\n        \"web_app_request_viewport\",\n        \"web_app_setup_main_button\",\n        \"web_app_setup_closing_behavior\"\n      ].includes(s);\n  }\n}\nfunction le(s) {\n  return \"external\" in s && k(s.external) && \"notify\" in s.external && typeof s.external.notify == \"function\";\n}\nfunction de(s) {\n  return \"TelegramWebviewProxy\" in s && k(s.TelegramWebviewProxy) && \"postEvent\" in s.TelegramWebviewProxy && typeof s.TelegramWebviewProxy.postEvent == \"function\";\n}\nfunction _e() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nconst at = \"https://web.telegram.org\";\nlet fe = at;\nfunction ts(s) {\n  fe = s;\n}\nfunction ct() {\n  return fe;\n}\nfunction A(s, e, t) {\n  let n = {}, r;\n  if (!e && !t ? n = {} : e && t ? (n = t, r = e) : e && (\"targetOrigin\" in e ? n = e : r = e), Ge(\"Posting event:\", r ? { event: s, data: r } : { event: s }), _e())\n    return window.parent.postMessage(\n      JSON.stringify({ eventType: s, eventData: r }),\n      n.targetOrigin || ct()\n    );\n  if (le(window)) {\n    window.external.notify(JSON.stringify({ eventType: s, eventData: r }));\n    return;\n  }\n  if (de(window)) {\n    window.TelegramWebviewProxy.postEvent(s, JSON.stringify(r));\n    return;\n  }\n  throw f(\n    Fe,\n    \"Unable to determine current environment and possible way to send event. You are probably trying to use Mini Apps method outside the Telegram application environment.\"\n  );\n}\nfunction pt(s) {\n  return (e, t) => {\n    if (!v(e, s))\n      throw f(je, `Method \"${e}\" is unsupported in Mini Apps version ${s}`);\n    if (k(t) && e === \"web_app_set_header_color\" && \"color\" in t && !v(e, \"color\", s))\n      throw f(\n        ze,\n        `Parameter \"color\" of \"${e}\" method is unsupported in Mini Apps version ${s}`\n      );\n    return A(e, t);\n  };\n}\nfunction ge(s) {\n  return ({ req_id: e }) => e === s;\n}\nfunction we(s) {\n  return f(Qe, `Timeout reached: ${s}ms`);\n}\nfunction be(s, e) {\n  return Promise.race([\n    typeof s == \"function\" ? s() : s,\n    new Promise((t, n) => {\n      setTimeout(() => {\n        n(we(e));\n      }, e);\n    })\n  ]);\n}\nasync function d(s) {\n  let e;\n  const t = new Promise((a) => e = a), { event: n, capture: r, timeout: i } = s, [, o] = J(\n    // We need to iterate over all tracked events, and create their event listeners.\n    (Array.isArray(n) ? n : [n]).map((a) => w(a, (p) => {\n      (!r || (Array.isArray(n) ? r({\n        event: a,\n        payload: p\n      }) : r(p))) && e(p);\n    }))\n  );\n  try {\n    return (s.postEvent || A)(s.method, s.params), await (i ? be(t, i) : t);\n  } finally {\n    o();\n  }\n}\nasync function C(s, e, t, n = {}) {\n  const {\n    result: r,\n    error: i\n  } = await d({\n    ...n,\n    method: \"web_app_invoke_custom_method\",\n    event: \"custom_method_invoked\",\n    params: {\n      method: s,\n      params: e,\n      req_id: t\n    },\n    capture: ge(t)\n  });\n  if (i)\n    throw f(Je, i);\n  return r;\n}\nfunction z(...s) {\n  return s.map((e) => {\n    if (typeof e == \"string\")\n      return e;\n    if (k(e))\n      return z(Object.entries(e).map((t) => t[1] && t[0]));\n    if (Array.isArray(e))\n      return z(...e);\n  }).filter(Boolean).join(\" \");\n}\nfunction ss(...s) {\n  return s.reduce((e, t) => (k(t) && Object.entries(t).forEach(([n, r]) => {\n    const i = z(e[n], r);\n    i.length && (e[n] = i);\n  }), e), {});\n}\nfunction Q(s) {\n  return /^#[\\da-f]{6}$/i.test(s);\n}\nfunction ht(s) {\n  return /^#[\\da-f]{3}$/i.test(s);\n}\nfunction me(s) {\n  const e = s.replace(/\\s/g, \"\").toLowerCase();\n  if (Q(e))\n    return e;\n  if (ht(e)) {\n    let n = \"#\";\n    for (let r = 0; r < 3; r += 1)\n      n += e[1 + r].repeat(2);\n    return n;\n  }\n  const t = e.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || e.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!t)\n    throw new Error(`Value \"${s}\" does not satisfy any of known RGB formats.`);\n  return t.slice(1).reduce((n, r) => {\n    const i = parseInt(r, 10).toString(16);\n    return n + (i.length === 1 ? \"0\" : \"\") + i;\n  }, \"#\");\n}\nfunction ye(s) {\n  const e = me(s);\n  return Math.sqrt(\n    [0.299, 0.587, 0.114].reduce((t, n, r) => {\n      const i = parseInt(e.slice(1 + r * 2, 1 + (r + 1) * 2), 16);\n      return t + i * i * n;\n    }, 0)\n  ) < 120;\n}\nclass ut {\n  constructor(e) {\n    c(this, \"ee\", new R());\n    /**\n     * Adds new event listener.\n     */\n    c(this, \"on\", this.ee.on.bind(this.ee));\n    /**\n     * Removes event listener.\n     */\n    c(this, \"off\", this.ee.off.bind(this.ee));\n    this.state = e;\n  }\n  /**\n   * Clones current state and returns its copy.\n   */\n  clone() {\n    return { ...this.state };\n  }\n  set(e, t) {\n    Object.entries(typeof e == \"string\" ? { [e]: t } : e).reduce((r, [i, o]) => this.state[i] === o || o === void 0 ? r : (this.state[i] = o, this.ee.emit(`change:${i}`, o), !0), !1) && this.ee.emit(\"change\", this.state);\n  }\n  /**\n   * Returns value by specified key.\n   * @param key - state key.\n   */\n  get(e) {\n    return this.state[e];\n  }\n}\nclass Y {\n  constructor(e) {\n    c(this, \"state\");\n    /**\n     * Gets the state value.\n     */\n    c(this, \"get\");\n    /**\n     * Sets the state value.\n     */\n    c(this, \"set\");\n    /**\n     * Clones the current state.\n     */\n    c(this, \"clone\");\n    this.state = new ut(e), this.set = this.state.set.bind(this.state), this.get = this.state.get.bind(this.state), this.clone = this.state.clone.bind(this.state);\n  }\n}\nfunction ve(s, e) {\n  return (t) => v(e[t], s);\n}\nclass Z extends Y {\n  constructor(t, n, r) {\n    super(t);\n    /**\n     * @returns True, if specified method is supported by the current component.\n     */\n    c(this, \"supports\");\n    this.supports = ve(n, r);\n  }\n}\nclass lt extends Z {\n  constructor(t, n, r) {\n    super({ isVisible: t }, n, {\n      show: \"web_app_setup_back_button\",\n      hide: \"web_app_setup_back_button\"\n    });\n    /**\n     * Adds a new event listener.\n     * @param event - event to listen.\n     * @param listener - listener to add.\n     */\n    c(this, \"on\", (t, n) => t === \"click\" ? w(\"back_button_pressed\", n) : this.state.on(t, n));\n    /**\n     * Removes the event listener.\n     * @param event - event to listen.\n     * @param listener - listener to remove.\n     */\n    c(this, \"off\", (t, n) => t === \"click\" ? B(\"back_button_pressed\", n) : this.state.off(t, n));\n    this.postEvent = r;\n  }\n  set isVisible(t) {\n    this.set(\"isVisible\", t), this.postEvent(\"web_app_setup_back_button\", { is_visible: t });\n  }\n  /**\n   * True if BackButton is currently visible.\n   */\n  get isVisible() {\n    return this.get(\"isVisible\");\n  }\n  /**\n   * Hides the BackButton.\n   */\n  hide() {\n    this.isVisible = !1;\n  }\n  /**\n   * Shows the BackButton.\n   */\n  show() {\n    this.isVisible = !0;\n  }\n}\nconst Ee = S((s) => s instanceof Date ? s : new Date(y().parse(s) * 1e3), \"Date\");\nfunction K(s, e) {\n  return new D((t) => {\n    if (typeof t != \"string\" && !(t instanceof URLSearchParams))\n      throw E();\n    const n = typeof t == \"string\" ? new URLSearchParams(t) : t;\n    return pe(s, (r) => {\n      const i = n.get(r);\n      return i === null ? void 0 : i;\n    });\n  }, !1, e);\n}\nconst dt = g({\n  id: y(),\n  type: h(),\n  title: h(),\n  photoUrl: {\n    type: h().optional(),\n    from: \"photo_url\"\n  },\n  username: h().optional()\n}, \"Chat\").optional(), ne = g({\n  addedToAttachmentMenu: {\n    type: b().optional(),\n    from: \"added_to_attachment_menu\"\n  },\n  allowsWriteToPm: {\n    type: b().optional(),\n    from: \"allows_write_to_pm\"\n  },\n  firstName: {\n    type: h(),\n    from: \"first_name\"\n  },\n  id: y(),\n  isBot: {\n    type: b().optional(),\n    from: \"is_bot\"\n  },\n  isPremium: {\n    type: b().optional(),\n    from: \"is_premium\"\n  },\n  languageCode: {\n    type: h().optional(),\n    from: \"language_code\"\n  },\n  lastName: {\n    type: h().optional(),\n    from: \"last_name\"\n  },\n  photoUrl: {\n    type: h().optional(),\n    from: \"photo_url\"\n  },\n  username: h().optional()\n}, \"User\").optional();\nfunction Se() {\n  return K({\n    authDate: {\n      type: Ee(),\n      from: \"auth_date\"\n    },\n    canSendAfter: {\n      type: y().optional(),\n      from: \"can_send_after\"\n    },\n    chat: dt,\n    chatInstance: {\n      type: h().optional(),\n      from: \"chat_instance\"\n    },\n    chatType: {\n      type: h().optional(),\n      from: \"chat_type\"\n    },\n    hash: h(),\n    queryId: {\n      type: h().optional(),\n      from: \"query_id\"\n    },\n    receiver: ne,\n    startParam: {\n      type: h().optional(),\n      from: \"start_param\"\n    },\n    user: ne\n  }, \"InitData\");\n}\nconst _t = S((s) => me(h().parse(s)), \"rgb\");\nfunction ft(s) {\n  return s.replace(/_[a-z]/g, (e) => e[1].toUpperCase());\n}\nfunction gt(s) {\n  return s.replace(/[A-Z]/g, (e) => `_${e.toLowerCase()}`);\n}\nconst Pe = S(\n  (s) => {\n    const e = _t().optional();\n    return Object.entries(he(s)).reduce((t, [n, r]) => (t[ft(n)] = e.parse(r), t), {});\n  },\n  \"ThemeParams\"\n);\nfunction X(s) {\n  return K({\n    botInline: {\n      type: b().optional(),\n      from: \"tgWebAppBotInline\"\n    },\n    initData: {\n      type: Se().optional(),\n      from: \"tgWebAppData\"\n    },\n    initDataRaw: {\n      type: h().optional(),\n      from: \"tgWebAppData\"\n    },\n    platform: {\n      type: h(),\n      from: \"tgWebAppPlatform\"\n    },\n    showSettings: {\n      type: b().optional(),\n      from: \"tgWebAppShowSettings\"\n    },\n    startParam: {\n      type: h().optional(),\n      from: \"tgWebAppStartParam\"\n    },\n    themeParams: {\n      type: Pe(),\n      from: \"tgWebAppThemeParams\"\n    },\n    version: {\n      type: h(),\n      from: \"tgWebAppVersion\"\n    }\n  }).parse(s);\n}\nfunction xe(s) {\n  return X(\n    s.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\")\n  );\n}\nfunction wt() {\n  return xe(window.location.href);\n}\nfunction Ce() {\n  return performance.getEntriesByType(\"navigation\")[0];\n}\nfunction bt() {\n  const s = Ce();\n  if (!s)\n    throw new Error(\"Unable to get first navigation entry.\");\n  return xe(s.name);\n}\nfunction Te(s) {\n  return `telegram-apps/${s.replace(/[A-Z]/g, (e) => `-${e.toLowerCase()}`)}`;\n}\nfunction Re(s, e) {\n  sessionStorage.setItem(Te(s), JSON.stringify(e));\n}\nfunction Ae(s) {\n  const e = sessionStorage.getItem(Te(s));\n  try {\n    return e ? JSON.parse(e) : void 0;\n  } catch {\n  }\n}\nfunction mt() {\n  return X(Ae(\"launchParams\") || \"\");\n}\nfunction Ie(s) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(s).map(([e, t]) => [gt(e), t])\n    )\n  );\n}\nfunction yt(s) {\n  const {\n    initDataRaw: e,\n    themeParams: t,\n    platform: n,\n    version: r,\n    showSettings: i,\n    startParam: o,\n    botInline: a\n  } = s, p = new URLSearchParams();\n  return p.set(\"tgWebAppPlatform\", n), p.set(\"tgWebAppThemeParams\", Ie(t)), p.set(\"tgWebAppVersion\", r), e && p.set(\"tgWebAppData\", e), o && p.set(\"tgWebAppStartParam\", o), typeof i == \"boolean\" && p.set(\"tgWebAppShowSettings\", i ? \"1\" : \"0\"), typeof a == \"boolean\" && p.set(\"tgWebAppBotInline\", a ? \"1\" : \"0\"), p.toString();\n}\nfunction qe(s) {\n  Re(\"launchParams\", yt(s));\n}\nfunction vt() {\n  const s = [];\n  for (const e of [\n    // Try to retrieve launch parameters from the current location. This method can return\n    // nothing in case, location was changed, and then the page was reloaded.\n    wt,\n    // Then, try using the lower level API - window.performance.\n    bt,\n    // Finally, try to extract launch parameters from the session storage.\n    mt\n  ])\n    try {\n      const t = e();\n      return qe(t), t;\n    } catch (t) {\n      s.push(t instanceof Error ? t.message : JSON.stringify(t));\n    }\n  throw new Error([\n    `Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\n`,\n    \"📖 Refer to docs for more information:\",\n    `https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment\n`,\n    \"Collected errors:\",\n    s.map((e) => `— ${e}`)\n  ].join(`\n`));\n}\nfunction ke() {\n  const s = Ce();\n  return !!(s && s.type === \"reload\");\n}\nfunction Et() {\n  let s = 0;\n  return () => (s += 1).toString();\n}\nconst [St] = oe(Et);\nfunction l(s, e) {\n  return () => {\n    const t = vt(), n = {\n      ...t,\n      postEvent: pt(t.version),\n      createRequestId: St()\n    };\n    if (typeof s == \"function\")\n      return s(n);\n    const [r, i, o] = J(), a = e({\n      ...n,\n      // State should only be passed only in case, current page was reloaded. If we don't add\n      // this check, state restoration will work improperly in the web version of Telegram,\n      // when we are always working in the same \"session\" (tab).\n      state: ke() ? Ae(s) : void 0,\n      addCleanup: r\n    }), p = (u) => (o || r(\n      u.on(\"change\", ($e) => {\n        Re(s, $e);\n      })\n    ), u);\n    return [\n      a instanceof Promise ? a.then(p) : p(a),\n      i\n    ];\n  };\n}\nconst ns = l(\"backButton\", ({\n  postEvent: s,\n  version: e,\n  state: t = { isVisible: !1 }\n}) => new lt(t.isVisible, e, s));\nclass P extends Z {\n  constructor() {\n    super(...arguments);\n    /**\n     * Adds a new event listener.\n     */\n    c(this, \"on\", this.state.on.bind(this.state));\n    /**\n     * Removes the event listener.\n     */\n    c(this, \"off\", this.state.off.bind(this.state));\n  }\n}\nfunction Ne(s) {\n  const e = s.available ? s : {\n    available: !1,\n    device_id: \"\",\n    token_saved: !1,\n    access_requested: !1,\n    access_granted: !1,\n    type: \"\"\n  };\n  return {\n    available: !0,\n    type: e.type,\n    deviceId: e.device_id,\n    tokenSaved: e.token_saved,\n    accessRequested: e.access_requested,\n    accessGranted: e.access_granted\n  };\n}\nclass Pt extends P {\n  constructor({ postEvent: t, version: n, ...r }) {\n    super(r, n, {\n      auth: \"web_app_biometry_request_auth\",\n      openSettings: \"web_app_biometry_open_settings\",\n      requestAccess: \"web_app_biometry_request_access\",\n      updateToken: \"web_app_biometry_update_token\"\n    });\n    c(this, \"postEvent\");\n    c(this, \"authPromise\");\n    c(this, \"accessPromise\");\n    this.postEvent = t;\n  }\n  /**\n   * Shows whether biometry is available.\n   */\n  get available() {\n    return this.get(\"available\");\n  }\n  /**\n   * Shows whether permission to use biometrics has been granted.\n   */\n  get accessGranted() {\n    return this.get(\"accessGranted\");\n  }\n  /**\n   * Shows whether if permission to use biometrics has been requested.\n   */\n  get accessRequested() {\n    return this.get(\"accessRequested\");\n  }\n  /**\n   * Authenticates the user using biometrics.\n   * @param options - method options.\n   * @since 7.2\n   * @returns Token from the local secure storage, if authentication was successful.\n   */\n  async authenticate({\n    reason: t,\n    ...n\n  }) {\n    return this.authPromise || (this.authPromise = d({\n      ...n,\n      method: \"web_app_biometry_request_auth\",\n      event: \"biometry_auth_requested\",\n      postEvent: this.postEvent,\n      params: {\n        // TODO: Check if reason is empty works fine.\n        reason: (t || \"\").trim()\n      }\n    }).then(({ token: r }) => r).finally(() => this.authPromise = void 0)), this.authPromise;\n  }\n  /**\n   * A unique device identifier that can be used to match the token to the device.\n   */\n  get deviceId() {\n    return this.get(\"deviceId\");\n  }\n  /**\n   * Opens the biometric access settings for bots. Useful when you need to request biometrics\n   * access to users who haven't granted it yet.\n   *\n   * _Note that this method can be called only in response to user interaction with the Mini App\n   * interface (e.g. a click inside the Mini App or on the main button)_.\n   * @since 7.2\n   */\n  openSettings() {\n    this.postEvent(\"web_app_biometry_open_settings\");\n  }\n  /**\n   * Requests permission to use biometrics.\n   * @since 7.2\n   * @returns Promise with true, if access was granted.\n   */\n  requestAccess({ reason: t, ...n } = {}) {\n    return this.accessPromise || (this.accessPromise = d({\n      ...n,\n      postEvent: this.postEvent,\n      method: \"web_app_biometry_request_access\",\n      event: \"biometry_info_received\",\n      params: { reason: t || \"\" }\n    }).then((r) => {\n      const i = Ne(r);\n      return this.set(i), i.accessGranted;\n    }).finally(() => this.accessPromise = void 0)), this.accessPromise;\n  }\n  /**\n   * The type of biometrics currently available on the device.\n   */\n  get biometryType() {\n    return this.get(\"biometryType\");\n  }\n  /**\n   * Shows whether token was saved previously in the local secure storage.\n   */\n  get tokenSaved() {\n    return this.get(\"tokenSaved\");\n  }\n  /**\n   * Updates the biometric token in a secure storage on the device.\n   * @returns Promise with `true`, if token was updated.\n   */\n  async updateToken({ token: t, ...n } = {}) {\n    return [\"removed\", \"updated\"].includes(\n      (await d({\n        ...n,\n        postEvent: this.postEvent,\n        method: \"web_app_biometry_update_token\",\n        event: \"biometry_token_updated\",\n        params: { token: t || \"\" }\n      })).status\n    );\n  }\n}\nasync function xt(s) {\n  return Ne(\n    await d({\n      ...s || {},\n      method: \"web_app_biometry_get_info\",\n      event: \"biometry_info_received\"\n    })\n  );\n}\nconst rs = l(\n  \"biometryManager\",\n  async ({ postEvent: s, version: e, state: t }) => new Pt({\n    ...t || v(\"web_app_biometry_get_info\", e) ? t || await xt({ timeout: 1e3 }) : {\n      available: !1,\n      accessGranted: !1,\n      accessRequested: !1,\n      tokenSaved: !1,\n      deviceId: \"\"\n    },\n    version: e,\n    postEvent: s\n  })\n);\nclass ee extends Y {\n  constructor() {\n    super(...arguments);\n    /**\n     * Adds a new event listener.\n     */\n    c(this, \"on\", this.state.on.bind(this.state));\n    /**\n     * Removes the event listener.\n     */\n    c(this, \"off\", this.state.off.bind(this.state));\n  }\n}\nclass Ct extends ee {\n  constructor(e, t) {\n    super({ isConfirmationNeeded: e }), this.postEvent = t;\n  }\n  set isConfirmationNeeded(e) {\n    this.set(\"isConfirmationNeeded\", e), this.postEvent(\"web_app_setup_closing_behavior\", { need_confirmation: e });\n  }\n  /**\n   * True, if the confirmation dialog should be shown while the user is trying to close\n   * the Mini App.\n   */\n  get isConfirmationNeeded() {\n    return this.get(\"isConfirmationNeeded\");\n  }\n  /**\n   * Disables the confirmation dialog when closing the Mini App.\n   */\n  disableConfirmation() {\n    this.isConfirmationNeeded = !1;\n  }\n  /**\n   * Enables the confirmation dialog when closing the Mini App.\n   */\n  enableConfirmation() {\n    this.isConfirmationNeeded = !0;\n  }\n}\nconst is = l(\n  \"closingBehavior\",\n  ({\n    postEvent: s,\n    state: e = { isConfirmationNeeded: !1 }\n  }) => new Ct(e.isConfirmationNeeded, s)\n);\nclass te {\n  constructor(e, t) {\n    /**\n     * @returns True, if specified method is supported by the current component.\n     */\n    c(this, \"supports\");\n    this.supports = ve(e, t);\n  }\n}\nfunction Tt(s) {\n  if (Array.isArray(s))\n    return s;\n  if (typeof s == \"string\")\n    try {\n      const e = JSON.parse(s);\n      if (Array.isArray(e))\n        return e;\n    } catch {\n    }\n  throw E();\n}\nclass Rt extends D {\n  constructor(t, n, r) {\n    super(Tt, n, r);\n    c(this, \"itemParser\");\n    this.itemParser = typeof t == \"function\" ? t : t.parse.bind(t);\n  }\n  /**\n   * Attempts to parse passed value\n   * @param value - value to parse.\n   * @throws {SDKError} ERR_PARSE\n   * @see ERR_PARSE\n   */\n  parse(t) {\n    const n = super.parse(t);\n    return n === void 0 ? n : n.map(this.itemParser);\n  }\n  of(t) {\n    return this.itemParser = typeof t == \"function\" ? t : t.parse.bind(t), this;\n  }\n}\nfunction At(s) {\n  return new Rt((e) => e, !1, s);\n}\nfunction re(s, e) {\n  return Object.fromEntries(s.map((t) => [t, e]));\n}\nclass It extends te {\n  constructor(e, t, n) {\n    super(e, {\n      delete: \"web_app_invoke_custom_method\",\n      get: \"web_app_invoke_custom_method\",\n      getKeys: \"web_app_invoke_custom_method\",\n      set: \"web_app_invoke_custom_method\"\n    }), this.createRequestId = t, this.postEvent = n;\n  }\n  /**\n   * Deletes specified key or keys from the cloud storage.\n   * @param keyOrKeys - key or keys to delete.\n   * @param options - request execution options.\n   */\n  async delete(e, t = {}) {\n    const n = Array.isArray(e) ? e : [e];\n    n.length && await C(\n      \"deleteStorageValues\",\n      { keys: n },\n      this.createRequestId(),\n      { ...t, postEvent: this.postEvent }\n    );\n  }\n  /**\n   * Returns list of all keys presented in the cloud storage.\n   * @param options - request execution options.\n   */\n  async getKeys(e = {}) {\n    return At().of(h()).parse(\n      await C(\n        \"getStorageKeys\",\n        {},\n        this.createRequestId(),\n        { ...e, postEvent: this.postEvent }\n      )\n    );\n  }\n  async get(e, t = {}) {\n    const n = Array.isArray(e) ? e : [e];\n    if (!n.length)\n      return re(n, \"\");\n    const r = await C(\n      \"getStorageValues\",\n      { keys: n },\n      this.createRequestId(),\n      { ...t, postEvent: this.postEvent }\n    ), i = g(re(n, h()), \"CloudStorageData\").parse(r);\n    return Array.isArray(e) ? i : i[e];\n  }\n  /**\n   * Saves specified value by key.\n   * @param key - storage key.\n   * @param value - storage value.\n   * @param options - request execution options.\n   */\n  async set(e, t, n = {}) {\n    await C(\n      \"saveStorageValue\",\n      { key: e, value: t },\n      this.createRequestId(),\n      { ...n, postEvent: this.postEvent }\n    );\n  }\n}\nconst os = l(\n  ({ createRequestId: s, postEvent: e, version: t }) => new It(t, s, e)\n);\nclass qt extends te {\n  constructor(e, t) {\n    super(e, {\n      impactOccurred: \"web_app_trigger_haptic_feedback\",\n      notificationOccurred: \"web_app_trigger_haptic_feedback\",\n      selectionChanged: \"web_app_trigger_haptic_feedback\"\n    }), this.postEvent = t;\n  }\n  /**\n   * A method tells that an impact occurred. The Telegram app may play the\n   * appropriate haptics based on style value passed.\n   * @param style - impact style.\n   */\n  impactOccurred(e) {\n    this.postEvent(\"web_app_trigger_haptic_feedback\", {\n      type: \"impact\",\n      impact_style: e\n    });\n  }\n  /**\n   * A method tells that a task or action has succeeded, failed, or produced\n   * a warning. The Telegram app may play the appropriate haptics based on\n   * type value passed.\n   * @param type - notification type.\n   */\n  notificationOccurred(e) {\n    this.postEvent(\"web_app_trigger_haptic_feedback\", {\n      type: \"notification\",\n      notification_type: e\n    });\n  }\n  /**\n   * A method tells that the user has changed a selection. The Telegram app\n   * may play the appropriate haptics.\n   *\n   * Do not use this feedback when the user makes or confirms a selection;\n   * use it only when the selection changes.\n   */\n  selectionChanged() {\n    this.postEvent(\"web_app_trigger_haptic_feedback\", { type: \"selection_change\" });\n  }\n}\nconst as = l(\n  ({ version: s, postEvent: e }) => new qt(s, e)\n);\nclass kt {\n  constructor(e) {\n    this.initData = e;\n  }\n  /**\n   * @see InitDataParsed.authDate\n   */\n  get authDate() {\n    return this.initData.authDate;\n  }\n  /**\n   * @see InitDataParsed.canSendAfter\n   */\n  get canSendAfter() {\n    return this.initData.canSendAfter;\n  }\n  /**\n   * Date after which it is allowed to call\n   * the [answerWebAppQuery](https://core.telegram.org/bots/api#answerwebappquery) method.\n   */\n  get canSendAfterDate() {\n    const { canSendAfter: e } = this;\n    return e ? new Date(this.authDate.getTime() + e * 1e3) : void 0;\n  }\n  /**\n   * @see InitDataParsed.chat\n   */\n  get chat() {\n    return this.initData.chat;\n  }\n  /**\n   * @see InitDataParsed.chatType\n   */\n  get chatType() {\n    return this.initData.chatType;\n  }\n  /**\n   * @see InitDataParsed.chatInstance\n   */\n  get chatInstance() {\n    return this.initData.chatInstance;\n  }\n  /**\n   * @see InitDataParsed.hash\n   */\n  get hash() {\n    return this.initData.hash;\n  }\n  /**\n   * @see InitDataParsed.queryId\n   */\n  get queryId() {\n    return this.initData.queryId;\n  }\n  /**\n   * @see InitDataParsed.receiver\n   */\n  get receiver() {\n    return this.initData.receiver;\n  }\n  /**\n   * @see InitDataParsed.startParam\n   */\n  get startParam() {\n    return this.initData.startParam;\n  }\n  /**\n   * @see InitDataParsed.user\n   */\n  get user() {\n    return this.initData.user;\n  }\n}\nconst cs = l(\n  ({ initData: s }) => s ? new kt(s) : void 0\n);\nfunction ps(s) {\n  return Se().parse(s);\n}\nclass Nt extends P {\n  constructor(e, t, n) {\n    super({ isOpened: e }, t, { open: \"web_app_open_invoice\" }), this.postEvent = n;\n  }\n  set isOpened(e) {\n    this.set(\"isOpened\", e);\n  }\n  /**\n   * True if invoice is currently opened.\n   */\n  get isOpened() {\n    return this.get(\"isOpened\");\n  }\n  async open(e, t) {\n    if (this.isOpened)\n      throw new Error(\"Invoice is already opened\");\n    let n;\n    if (!t)\n      n = e;\n    else {\n      const { hostname: r, pathname: i } = new URL(e, window.location.href);\n      if (r !== \"t.me\")\n        throw new Error(`Incorrect hostname: ${r}`);\n      const o = i.match(/^\\/(\\$|invoice\\/)([A-Za-z0-9\\-_=]+)$/);\n      if (!o)\n        throw new Error('Link pathname has incorrect format. Expected to receive \"/invoice/{slug}\" or \"/${slug}\"');\n      [, , n] = o;\n    }\n    this.isOpened = !0;\n    try {\n      return (await d({\n        method: \"web_app_open_invoice\",\n        event: \"invoice_closed\",\n        params: { slug: n },\n        postEvent: this.postEvent,\n        capture(i) {\n          return n === i.slug;\n        }\n      })).status;\n    } finally {\n      this.isOpened = !1;\n    }\n  }\n}\nconst hs = l(\n  ({ version: s, postEvent: e }) => new Nt(!1, s, e)\n);\nclass Vt extends Y {\n  constructor({ postEvent: t, ...n }) {\n    super(n);\n    c(this, \"postEvent\");\n    /**\n     * Adds a new event listener.\n     * @param event - event to listen.\n     * @param listener - listener to add.\n     */\n    c(this, \"on\", (t, n) => t === \"click\" ? w(\"main_button_pressed\", n) : this.state.on(t, n));\n    /**\n     * Removes the event listener.\n     * @param event - event to listen.\n     * @param listener - listener to remove.\n     */\n    c(this, \"off\", (t, n) => t === \"click\" ? B(\"main_button_pressed\", n) : this.state.off(t, n));\n    this.postEvent = t;\n  }\n  /**\n   * The MainButton background color.\n   */\n  get bgColor() {\n    return this.get(\"bgColor\");\n  }\n  /**\n   * Sends current local state to the Telegram application.\n   */\n  commit() {\n    this.text !== \"\" && this.postEvent(\"web_app_setup_main_button\", {\n      is_visible: this.isVisible,\n      is_active: this.isEnabled,\n      is_progress_visible: this.isLoaderVisible,\n      text: this.text,\n      color: this.bgColor,\n      text_color: this.textColor\n    });\n  }\n  /**\n   * Disables the MainButton.\n   * @see Does not work on Android: https://github.com/Telegram-Mini-Apps/issues/issues/1\n   */\n  disable() {\n    return this.isEnabled = !1, this;\n  }\n  /**\n   * Enables the MainButton.\n   */\n  enable() {\n    return this.isEnabled = !0, this;\n  }\n  /**\n   * Hides the MainButton.\n   */\n  hide() {\n    return this.isVisible = !1, this;\n  }\n  /**\n   * Hides the MainButton loading indicator.\n   */\n  hideLoader() {\n    return this.isLoaderVisible = !1, this;\n  }\n  set isEnabled(t) {\n    this.setParams({ isEnabled: t });\n  }\n  /**\n   * True if the MainButton is enabled.\n   */\n  get isEnabled() {\n    return this.get(\"isEnabled\");\n  }\n  set isLoaderVisible(t) {\n    this.setParams({ isLoaderVisible: t });\n  }\n  /**\n   * True if the MainButton loader is visible.\n   */\n  get isLoaderVisible() {\n    return this.get(\"isLoaderVisible\");\n  }\n  set isVisible(t) {\n    this.setParams({ isVisible: t });\n  }\n  /**\n   * True if the MainButton is visible.\n   */\n  get isVisible() {\n    return this.get(\"isVisible\");\n  }\n  /**\n   * Shows the MainButton.\n   *\n   * Note that opening the Mini App from the attachment menu hides the main button until the\n   * user interacts with the Mini App interface.\n   */\n  show() {\n    return this.isVisible = !0, this;\n  }\n  /**\n   * Shows a loading indicator on the Main Button.\n   */\n  showLoader() {\n    return this.isLoaderVisible = !0, this;\n  }\n  /**\n   * Sets a new MainButton text. Minimal length for the text is 1 symbol, and maximum is 64 symbols.\n   * @param text - a new text.\n   */\n  setText(t) {\n    return this.setParams({ text: t });\n  }\n  /**\n   * Sets a new Main Button text color.\n   * @param textColor - new text color.\n   */\n  setTextColor(t) {\n    return this.setParams({ textColor: t });\n  }\n  /**\n   * Updates current Main Button color.\n   * @param bgColor - color to set.\n   */\n  setBgColor(t) {\n    return this.setParams({ bgColor: t });\n  }\n  /**\n   * Allows setting multiple Main Button parameters.\n   * @param params - Main Button parameters.\n   */\n  setParams(t) {\n    return this.set(t), this.commit(), this;\n  }\n  /**\n   * The MainButton text.\n   */\n  get text() {\n    return this.get(\"text\");\n  }\n  /**\n   * The MainButton text color.\n   */\n  get textColor() {\n    return this.get(\"textColor\");\n  }\n}\nconst us = l(\n  \"mainButton\",\n  ({\n    postEvent: s,\n    themeParams: e,\n    state: t = {\n      isVisible: !1,\n      isEnabled: !1,\n      text: \"\",\n      isLoaderVisible: !1,\n      textColor: e.buttonTextColor || \"#ffffff\",\n      bgColor: e.buttonColor || \"#000000\"\n    }\n  }) => new Vt({ ...t, postEvent: s })\n);\nfunction Dt() {\n  return K({\n    contact: g({\n      userId: {\n        type: y(),\n        from: \"user_id\"\n      },\n      phoneNumber: {\n        type: h(),\n        from: \"phone_number\"\n      },\n      firstName: {\n        type: h(),\n        from: \"first_name\"\n      },\n      lastName: {\n        type: h().optional(),\n        from: \"last_name\"\n      }\n    }),\n    authDate: {\n      type: Ee(),\n      from: \"auth_date\"\n    },\n    hash: h()\n  }, \"RequestedContact\");\n}\nfunction Ve(s, e) {\n  return (t) => {\n    const [n, r] = e[t];\n    return v(n, r, s);\n  };\n}\nfunction Mt(s) {\n  return new Promise((e) => {\n    setTimeout(e, s);\n  });\n}\nclass Bt extends P {\n  constructor({ postEvent: t, createRequestId: n, version: r, botInline: i, ...o }) {\n    super(o, r, {\n      requestPhoneAccess: \"web_app_request_phone\",\n      requestWriteAccess: \"web_app_request_write_access\",\n      switchInlineQuery: \"web_app_switch_inline_query\",\n      setHeaderColor: \"web_app_set_header_color\",\n      setBackgroundColor: \"web_app_set_background_color\"\n    });\n    c(this, \"botInline\");\n    c(this, \"postEvent\");\n    c(this, \"createRequestId\");\n    c(this, \"requestPhoneAccessPromise\");\n    c(this, \"requestWriteAccessPromise\");\n    /**\n     * Checks if specified method parameter is supported by current component.\n     */\n    c(this, \"supportsParam\");\n    this.createRequestId = n, this.postEvent = t, this.botInline = i;\n    const a = this.supports.bind(this);\n    this.supports = (p) => a(p) ? p !== \"switchInlineQuery\" || i : !1, this.supportsParam = Ve(r, {\n      \"setHeaderColor.color\": [\"web_app_set_header_color\", \"color\"],\n      \"close.returnBack\": [\"web_app_close\", \"return_back\"]\n    });\n  }\n  /**\n   * Attempts to get requested contact.\n   * @param timeout - request timeout.\n   */\n  async getRequestedContact({\n    timeout: t = 1e4\n  } = {}) {\n    return Dt().parse(\n      await C(\n        \"getRequestedContact\",\n        {},\n        this.createRequestId(),\n        { postEvent: this.postEvent, timeout: t }\n      )\n    );\n  }\n  /**\n   * The Mini App background color.\n   * @example \"#ffaabb\"\n   */\n  get bgColor() {\n    return this.get(\"bgColor\");\n  }\n  /**\n   * Closes the Mini App.\n   * @param returnBack - should the application be wrapped into the bottom bar.\n   */\n  close(t) {\n    this.postEvent(\"web_app_close\", this.supportsParam(\"close.returnBack\") ? { return_back: t } : {});\n  }\n  /**\n   * The Mini App header color.\n   * @example \"#ffaabb\"\n   * @example \"bg_color\"\n   */\n  get headerColor() {\n    return this.get(\"headerColor\");\n  }\n  /**\n   * True if the Mini App is currently launched in bot inline mode.\n   */\n  get isBotInline() {\n    return this.botInline;\n  }\n  /**\n   * True if the current Mini App background color is recognized as dark.\n   */\n  get isDark() {\n    return ye(this.bgColor);\n  }\n  /**\n   * Informs the Telegram app that the Mini App is ready to be displayed.\n   *\n   * It is recommended to call this method as early as possible, as soon as all essential\n   * interface elements loaded. Once this method called, the loading placeholder is hidden\n   * and the Mini App shown.\n   *\n   * If the method not called, the placeholder will be hidden only when the page fully loaded.\n   */\n  ready() {\n    this.postEvent(\"web_app_ready\");\n  }\n  /**\n   * Requests current user contact information. In contrary to requestPhoneAccess, this method\n   * returns promise with contact information that rejects in case, user denied access, or request\n   * failed.\n   * @param options - additional options.\n   */\n  async requestContact({ timeout: t = 5e3 } = {}) {\n    try {\n      return await this.getRequestedContact();\n    } catch {\n    }\n    if (await this.requestPhoneAccess() !== \"sent\")\n      throw new Error(\"Access denied.\");\n    const r = Date.now() + t;\n    let i = 50;\n    return be(async () => {\n      for (; Date.now() < r; ) {\n        try {\n          return await this.getRequestedContact();\n        } catch {\n        }\n        await Mt(i), i += 50;\n      }\n      throw we(t);\n    }, t);\n  }\n  /**\n   * Requests current user phone access. Method returns promise, which resolves\n   * status of the request. In case, user accepted the request, Mini App bot will receive\n   * the according notification.\n   *\n   * To obtain the retrieved information instead, utilize the `requestContact` method.\n   * @param options - additional options.\n   * @see requestContact\n   */\n  async requestPhoneAccess(t = {}) {\n    return this.requestPhoneAccessPromise || (this.requestPhoneAccessPromise = d({\n      ...t,\n      method: \"web_app_request_phone\",\n      event: \"phone_requested\",\n      postEvent: this.postEvent\n    }).then(({ status: n }) => n).finally(() => this.requestPhoneAccessPromise = void 0)), this.requestPhoneAccessPromise;\n  }\n  /**\n   * Requests write message access to current user.\n   * @param options - additional options.\n   */\n  async requestWriteAccess(t = {}) {\n    return this.requestWriteAccessPromise || (this.requestWriteAccessPromise = d({\n      ...t,\n      method: \"web_app_request_write_access\",\n      event: \"write_access_requested\",\n      postEvent: this.postEvent\n    }).then(({ status: n }) => n).finally(() => this.requestWriteAccessPromise = void 0)), this.requestWriteAccessPromise;\n  }\n  /**\n   * A method used to send data to the bot. When this method called, a service message sent to\n   * the bot containing the data of the length up to 4096 bytes, and the Mini App closed. See the\n   * field `web_app_data` in the class [Message](https://core.telegram.org/bots/api#message).\n   *\n   * This method is only available for Mini Apps launched via a Keyboard button.\n   * @param data - data to send to bot.\n   * @throws {Error} data has incorrect size.\n   */\n  sendData(t) {\n    const { size: n } = new Blob([t]);\n    if (!n || n > 4096)\n      throw new Error(`Passed data has incorrect size: ${n}`);\n    this.postEvent(\"web_app_data_send\", { data: t });\n  }\n  /**\n   * Updates current Mini App header color.\n   *\n   * @see No effect on desktop: https://github.com/Telegram-Mini-Apps/telegram-apps/issues/9\n   * @see Works incorrectly in Android: https://github.com/Telegram-Mini-Apps/telegram-apps/issues/8\n   * @param color - color key or RGB color.\n   */\n  setHeaderColor(t) {\n    this.postEvent(\"web_app_set_header_color\", Q(t) ? { color: t } : { color_key: t }), this.set(\"headerColor\", t);\n  }\n  /**\n   * Updates current Mini App background color.\n   *\n   * @see No effect on desktop: https://github.com/Telegram-Mini-Apps/telegram-apps/issues/9\n   * @see Works incorrectly in Android: https://github.com/Telegram-Mini-Apps/telegram-apps/issues/8\n   * @param color - RGB color.\n   */\n  setBgColor(t) {\n    this.postEvent(\"web_app_set_background_color\", { color: t }), this.set(\"bgColor\", t);\n  }\n  /**\n   * Inserts the bot's username and the specified inline query in the current chat's input field.\n   * Query may be empty, in which case only the bot's username will be inserted. The client prompts\n   * the user to choose a specific chat, then opens that chat and inserts the bot's username and\n   * the specified inline query in the input field.\n   * @param text - text which should be inserted in the input after the current bot name. Max\n   * length is 256 symbols.\n   * @param chatTypes - List of chat types which could be chosen to send the message. Could be\n   * empty list.\n   */\n  switchInlineQuery(t, n = []) {\n    if (!this.supports(\"switchInlineQuery\") && !this.isBotInline)\n      throw new Error(\"Method is unsupported because Mini App should be launched in inline mode.\");\n    this.postEvent(\"web_app_switch_inline_query\", { query: t, chat_types: n });\n  }\n}\nconst ls = l(\n  \"miniApp\",\n  ({\n    themeParams: s,\n    botInline: e = !1,\n    state: t = {\n      bgColor: s.bgColor || \"#ffffff\",\n      headerColor: s.headerBgColor || \"#000000\"\n    },\n    ...n\n  }) => new Bt({ ...n, ...t, botInline: e })\n);\nfunction Lt(s) {\n  const e = s.message.trim(), t = (s.title || \"\").trim(), n = s.buttons || [];\n  let r;\n  if (t.length > 64)\n    throw new Error(`Title has incorrect size: ${t.length}`);\n  if (!e.length || e.length > 256)\n    throw new Error(`Message has incorrect size: ${e.length}`);\n  if (n.length > 3)\n    throw new Error(`Buttons have incorrect size: ${n.length}`);\n  return n.length ? r = n.map((i) => {\n    const { id: o = \"\" } = i;\n    if (o.length > 64)\n      throw new Error(`Button ID has incorrect size: ${o}`);\n    if (!i.type || i.type === \"default\" || i.type === \"destructive\") {\n      const a = i.text.trim();\n      if (!a.length || a.length > 64) {\n        const p = i.type || \"default\";\n        throw new Error(`Button text with type \"${p}\" has incorrect size: ${i.text.length}`);\n      }\n      return { ...i, text: a, id: o };\n    }\n    return { ...i, id: o };\n  }) : r = [{ type: \"close\", id: \"\" }], { title: t, message: e, buttons: r };\n}\nclass $t extends P {\n  constructor(e, t, n) {\n    super({ isOpened: e }, t, { open: \"web_app_open_popup\" }), this.postEvent = n;\n  }\n  set isOpened(e) {\n    this.set(\"isOpened\", e);\n  }\n  /**\n   * True if the Popup is opened.\n   */\n  get isOpened() {\n    return this.get(\"isOpened\");\n  }\n  /**\n   * A method that shows a native popup described by the `params` argument.\n   * Promise will be resolved when popup is closed. Resolved value will have\n   * an identifier of pressed button.\n   *\n   * In case, user clicked outside the popup or clicked top right popup close\n   * button, null will be returned.\n   *\n   * @param options - popup parameters.\n   * @throws {Error} Popup is already opened.\n   */\n  async open(e) {\n    if (this.isOpened)\n      throw new Error(\"Popup is already opened.\");\n    this.isOpened = !0;\n    try {\n      const { button_id: t = null } = await d({\n        event: \"popup_closed\",\n        method: \"web_app_open_popup\",\n        postEvent: this.postEvent,\n        params: Lt(e)\n      });\n      return t;\n    } finally {\n      this.isOpened = !1;\n    }\n  }\n}\nconst ds = l(\n  ({ postEvent: s, version: e }) => new $t(!1, e, s)\n);\nclass Wt extends P {\n  constructor(e, t, n) {\n    super({ isOpened: e }, t, {\n      close: \"web_app_close_scan_qr_popup\",\n      open: \"web_app_open_scan_qr_popup\"\n    }), this.postEvent = n;\n  }\n  /**\n   * Closes the scanner.\n   */\n  close() {\n    this.postEvent(\"web_app_close_scan_qr_popup\"), this.isOpened = !1;\n  }\n  set isOpened(e) {\n    this.set(\"isOpened\", e);\n  }\n  /**\n   * Returns true if the scanner is currently opened.\n   */\n  get isOpened() {\n    return this.get(\"isOpened\");\n  }\n  async open(e) {\n    if (this.isOpened)\n      throw new Error(\"The scanner is already opened\");\n    const { text: t, capture: n } = (typeof e == \"string\" ? { text: e } : e) || {};\n    this.isOpened = !0;\n    try {\n      const i = (await d({\n        method: \"web_app_open_scan_qr_popup\",\n        event: [\"qr_text_received\", \"scan_qr_popup_closed\"],\n        postEvent: this.postEvent,\n        params: { text: t },\n        capture(o) {\n          return o.event === \"scan_qr_popup_closed\" || !n || n(o.payload);\n        }\n      }) || {}).data || null;\n      return i && this.close(), i;\n    } finally {\n      this.isOpened = !1;\n    }\n  }\n  // TODO: Streaming mode, allowing to scan several QRs until closed.\n}\nconst _s = l(\n  ({ version: s, postEvent: e }) => new Wt(!1, s, e)\n);\nclass Ut extends Z {\n  constructor(t, n, r) {\n    super({ isVisible: t }, n, {\n      show: \"web_app_setup_settings_button\",\n      hide: \"web_app_setup_settings_button\"\n    });\n    /**\n     * Adds a new event listener.\n     * @param event - event to listen.\n     * @param listener - listener to add.\n     */\n    c(this, \"on\", (t, n) => t === \"click\" ? w(\"settings_button_pressed\", n) : this.state.on(t, n));\n    /**\n     * Removes the event listener.\n     * @param event - event to listen.\n     * @param listener - listener to remove.\n     */\n    c(this, \"off\", (t, n) => t === \"click\" ? B(\"settings_button_pressed\", n) : this.state.off(t, n));\n    this.postEvent = r;\n  }\n  set isVisible(t) {\n    this.set(\"isVisible\", t), this.postEvent(\"web_app_setup_settings_button\", { is_visible: t });\n  }\n  /**\n   * True if the SettingsButton is visible.\n   */\n  get isVisible() {\n    return this.get(\"isVisible\");\n  }\n  /**\n   * Hides the SettingsButton.\n   */\n  hide() {\n    this.isVisible = !1;\n  }\n  /**\n   * Shows the SettingsButton.\n   */\n  show() {\n    this.isVisible = !0;\n  }\n}\nconst fs = l(\n  \"settingsButton\",\n  ({\n    version: s,\n    postEvent: e,\n    state: t = { isVisible: !1 }\n  }) => new Ut(t.isVisible, s, e)\n);\nclass Ht extends P {\n  constructor(e, t, n) {\n    super({ isVerticalSwipeEnabled: e }, t, {\n      disableVerticalSwipe: \"web_app_setup_swipe_behavior\",\n      enableVerticalSwipe: \"web_app_setup_swipe_behavior\"\n    }), this.postEvent = n;\n  }\n  set isVerticalSwipeEnabled(e) {\n    this.set(\"isVerticalSwipeEnabled\", e), this.postEvent(\"web_app_setup_swipe_behavior\", { allow_vertical_swipe: e });\n  }\n  /**\n   * True, if the vertical swipe enabled.\n   */\n  get isVerticalSwipeEnabled() {\n    return this.get(\"isVerticalSwipeEnabled\");\n  }\n  /**\n   * Disables the vertical swipe.\n   */\n  disableVerticalSwipe() {\n    this.isVerticalSwipeEnabled = !1;\n  }\n  /**\n   * Enables the vertical swipe.\n   */\n  enableVerticalSwipe() {\n    this.isVerticalSwipeEnabled = !0;\n  }\n}\nconst gs = l(\n  \"swipeBehavior\",\n  ({\n    postEvent: s,\n    state: e = { isVerticalSwipeEnabled: !0 },\n    version: t\n  }) => new Ht(e.isVerticalSwipeEnabled, t, s)\n);\nfunction De(s) {\n  return Pe().parse(s);\n}\nclass Ot extends ee {\n  /**\n   * @since v6.10\n   */\n  get accentTextColor() {\n    return this.get(\"accentTextColor\");\n  }\n  get bgColor() {\n    return this.get(\"bgColor\");\n  }\n  get buttonColor() {\n    return this.get(\"buttonColor\");\n  }\n  get buttonTextColor() {\n    return this.get(\"buttonTextColor\");\n  }\n  get destructiveTextColor() {\n    return this.get(\"destructiveTextColor\");\n  }\n  /**\n   * Returns the copy of the internal state of the current component instance.\n   */\n  getState() {\n    return this.clone();\n  }\n  /**\n   * @since v6.10\n   */\n  get headerBgColor() {\n    return this.get(\"headerBgColor\");\n  }\n  get hintColor() {\n    return this.get(\"hintColor\");\n  }\n  /**\n   * @returns True in case, current color scheme is recognized as dark. This\n   * value is calculated according to theme bg color.\n   */\n  get isDark() {\n    return !this.bgColor || ye(this.bgColor);\n  }\n  get linkColor() {\n    return this.get(\"linkColor\");\n  }\n  get secondaryBgColor() {\n    return this.get(\"secondaryBgColor\");\n  }\n  /**\n   * @since v6.10\n   */\n  get sectionBgColor() {\n    return this.get(\"sectionBgColor\");\n  }\n  /**\n   * @since v6.10\n   */\n  get sectionHeaderTextColor() {\n    return this.get(\"sectionHeaderTextColor\");\n  }\n  /**\n   * @since v7.6\n   */\n  get sectionSeparatorColor() {\n    return this.get(\"sectionHeaderTextColor\");\n  }\n  /**\n   * Starts listening to the external theme changes and applies them.\n   * @returns Function to stop listening.\n   */\n  listen() {\n    return w(\"theme_changed\", (e) => {\n      this.set(De(e.theme_params));\n    });\n  }\n  /**\n   * @since v6.10\n   */\n  get subtitleTextColor() {\n    return this.get(\"subtitleTextColor\");\n  }\n  get textColor() {\n    return this.get(\"textColor\");\n  }\n}\nconst ws = l(\n  \"themeParams\",\n  ({ themeParams: s, state: e = s, addCleanup: t }) => {\n    const n = new Ot(e);\n    return t(n.listen()), n;\n  }\n);\nfunction bs(s = {}) {\n  return d({\n    ...s,\n    method: \"web_app_request_theme\",\n    event: \"theme_changed\"\n  }).then(De);\n}\nfunction I(s, e) {\n  return s.startsWith(e) ? s : `${e}${s}`;\n}\nfunction q(s) {\n  return new URL(\n    typeof s == \"string\" ? s : `${s.pathname || \"\"}${I(s.search || \"\", \"?\")}${I(s.hash || \"\", \"#\")}`,\n    \"http://a\"\n  );\n}\nclass Gt extends te {\n  constructor(t, n, r) {\n    super(t, { readTextFromClipboard: \"web_app_read_text_from_clipboard\" });\n    /**\n     * Checks if specified method parameter is supported by current component.\n     */\n    c(this, \"supportsParam\");\n    this.version = t, this.createRequestId = n, this.postEvent = r, this.supportsParam = Ve(t, {\n      \"openLink.tryInstantView\": [\"web_app_open_link\", \"try_instant_view\"]\n    });\n  }\n  openLink(t, n) {\n    const r = q(t).toString();\n    if (!v(\"web_app_open_link\", this.version)) {\n      window.open(r, \"_blank\");\n      return;\n    }\n    const i = typeof n == \"boolean\" ? { tryInstantView: n } : n || {};\n    this.postEvent(\"web_app_open_link\", {\n      url: r,\n      try_browser: i.tryBrowser,\n      try_instant_view: i.tryInstantView\n    });\n  }\n  /**\n   * Opens a Telegram link inside Telegram app. The Mini App will be closed. It expects passing\n   * link in full format, with hostname \"t.me\".\n   * @param url - URL to be opened.\n   * @throws {Error} URL has not allowed hostname.\n   */\n  openTelegramLink(t) {\n    const { hostname: n, pathname: r, search: i } = new URL(t, \"https://t.me\");\n    if (n !== \"t.me\")\n      throw new Error(`URL has not allowed hostname: ${n}. Only \"t.me\" is allowed`);\n    if (!v(\"web_app_open_tg_link\", this.version)) {\n      window.location.href = t;\n      return;\n    }\n    this.postEvent(\"web_app_open_tg_link\", { path_full: r + i });\n  }\n  /**\n   * Reads text from clipboard and returns string or null. null is returned\n   * in cases:\n   * - Value in clipboard is not text\n   * - Access to clipboard is not allowed\n   */\n  async readTextFromClipboard() {\n    const t = this.createRequestId(), {\n      data: n = null\n    } = await d({\n      method: \"web_app_read_text_from_clipboard\",\n      event: \"clipboard_text_received\",\n      postEvent: this.postEvent,\n      params: { req_id: t },\n      capture: ge(t)\n    });\n    return n;\n  }\n  /**\n   * Shares specified URL with the passed to the chats, selected by user. After being called,\n   * it closes the mini application.\n   *\n   * This method uses Telegram's Share Links.\n   * @param url - URL to share.\n   * @param text - text to append after the URL.\n   * @see https://core.telegram.org/api/links#share-links\n   * @see https://core.telegram.org/widgets/share#custom-buttons\n   */\n  shareURL(t, n) {\n    this.openTelegramLink(\n      \"https://t.me/share/url?\" + new URLSearchParams({ url: t, text: n || \"\" }).toString().replace(/\\+/g, \"%20\")\n    );\n  }\n}\nconst ms = l(\n  ({ version: s, postEvent: e, createRequestId: t }) => new Gt(s, t, e)\n);\nasync function Me(s = {}) {\n  const {\n    is_expanded: e,\n    is_state_stable: t,\n    ...n\n  } = await d({\n    ...s,\n    method: \"web_app_request_viewport\",\n    event: \"viewport_changed\"\n  });\n  return { ...n, isExpanded: e, isStateStable: t };\n}\nfunction x(s) {\n  return s < 0 ? 0 : s;\n}\nclass jt extends ee {\n  constructor({ postEvent: t, stableHeight: n, height: r, width: i, isExpanded: o }) {\n    super({\n      height: x(r),\n      isExpanded: o,\n      stableHeight: x(n),\n      width: x(i)\n    });\n    c(this, \"postEvent\");\n    this.postEvent = t;\n  }\n  /**\n   * Requests viewport information from the Telegram application and updates current Viewport\n   * instance.\n   * @param options - options to request fresh data.\n   */\n  async sync(t) {\n    const { isStateStable: n, ...r } = await Me(t);\n    this.set({\n      ...r,\n      stableHeight: n ? r.height : this.get(\"stableHeight\")\n    });\n  }\n  /**\n   * The current height of the **visible area** of the Mini App.\n   *\n   * The application can display just the top part of the Mini App, with its lower part remaining\n   * outside the screen area. From this position, the user can \"pull\" the Mini App to its\n   * maximum height, while the bot can do the same by calling `expand` method. As the position of\n   * the Mini App changes, the current height value of the visible area will be updated  in real\n   * time.\n   *\n   * Please note that the refresh rate of this value is not sufficient to smoothly follow the\n   * lower border of the window. It should not be used to pin interface elements to the bottom\n   * of the visible area. It's more appropriate to use the value of the `stableHeight`\n   * field for this purpose.\n   *\n   * @see stableHeight\n   */\n  get height() {\n    return this.get(\"height\");\n  }\n  /**\n   * The height of the visible area of the Mini App in its last stable state.\n   *\n   * The application can display just the top part of the Mini App, with its lower part remaining\n   * outside the screen area. From this position, the user can \"pull\" the Mini App to its\n   * maximum height, while the application can do the same by calling `expand` method.\n   *\n   * Unlike the value of `height`, the value of `stableHeight` does not change as the position\n   * of the Mini App changes with user gestures or during animations. The value of `stableHeight`\n   * will be updated after all gestures and animations are completed and\n   * the Mini App reaches its final size.\n   *\n   * @see height\n   */\n  get stableHeight() {\n    return this.get(\"stableHeight\");\n  }\n  /**\n   * Starts listening to viewport changes and applies them.\n   * @returns Function to stop listening.\n   */\n  listen() {\n    return w(\"viewport_changed\", (t) => {\n      const {\n        height: n,\n        width: r,\n        is_expanded: i,\n        is_state_stable: o\n      } = t, a = x(n);\n      this.set({\n        height: a,\n        isExpanded: i,\n        width: x(r),\n        ...o ? { stableHeight: a } : {}\n      });\n    });\n  }\n  /**\n   * True if the Mini App is expanded to the maximum available height. Otherwise, if\n   * the Mini App occupies part of the screen and can be expanded to the full height using\n   * `expand` method.\n   * @see expand\n   */\n  get isExpanded() {\n    return this.get(\"isExpanded\");\n  }\n  /**\n   * Current visible area width.\n   */\n  get width() {\n    return this.get(\"width\");\n  }\n  /**\n   * A method that expands the Mini App to the maximum available height. To find out if the Mini\n   * App is expanded to the maximum height, refer to the value of the `isExpanded`.\n   * @see isExpanded\n   */\n  expand() {\n    this.postEvent(\"web_app_expand\"), this.set(\"isExpanded\", !0);\n  }\n  /**\n   * True if the current viewport height is stable and is not going to change in the next moment.\n   */\n  get isStable() {\n    return this.stableHeight === this.height;\n  }\n}\nconst ys = l(\n  \"viewport\",\n  async ({ state: s, platform: e, postEvent: t, addCleanup: n }) => {\n    let r = !1, i = 0, o = 0, a = 0;\n    if (s)\n      r = s.isExpanded, i = s.height, o = s.width, a = s.stableHeight;\n    else if ([\"macos\", \"tdesktop\", \"unigram\", \"webk\", \"weba\", \"web\"].includes(e))\n      r = !0, i = window.innerHeight, o = window.innerWidth, a = window.innerHeight;\n    else {\n      const u = await Me({ timeout: 1e3, postEvent: t });\n      r = u.isExpanded, i = u.height, o = u.width, a = u.isStateStable ? i : 0;\n    }\n    const p = new jt({\n      postEvent: t,\n      height: i,\n      width: o,\n      stableHeight: a,\n      isExpanded: r\n    });\n    return n(p.listen()), p;\n  }\n);\nfunction m(s, e) {\n  document.documentElement.style.setProperty(s, e);\n}\nfunction vs(s, e, t) {\n  t || (t = (a) => `--tg-${a}-color`);\n  const n = t(\"header\"), r = t(\"bg\"), i = () => {\n    const { headerColor: a } = s;\n    if (Q(a))\n      m(n, a);\n    else {\n      const { bgColor: p, secondaryBgColor: u } = e;\n      a === \"bg_color\" && p ? m(n, p) : a === \"secondary_bg_color\" && u && m(n, u);\n    }\n    m(r, s.bgColor);\n  }, o = [\n    e.on(\"change\", i),\n    s.on(\"change\", i)\n  ];\n  return i(), () => o.forEach((a) => a());\n}\nfunction Es(s, e) {\n  e || (e = (n) => `--tg-theme-${n.replace(/[A-Z]/g, (r) => `-${r.toLowerCase()}`)}`);\n  const t = () => {\n    Object.entries(s.getState()).forEach(([n, r]) => {\n      r && m(e(n), r);\n    });\n  };\n  return t(), s.on(\"change\", t);\n}\nfunction Ss(s, e) {\n  e || (e = (u) => `--tg-viewport-${u}`);\n  const [\n    t,\n    n,\n    r\n  ] = [\"height\", \"width\", \"stable-height\"].map((u) => e(u)), i = () => m(t, `${s.height}px`), o = () => m(n, `${s.width}px`), a = () => m(r, `${s.stableHeight}px`), p = [\n    s.on(\"change:height\", i),\n    s.on(\"change:width\", o),\n    s.on(\"change:stableHeight\", a)\n  ];\n  return i(), o(), a(), () => p.forEach((u) => u());\n}\nfunction Ps(s = !0) {\n  const e = [\n    w(\"reload_iframe\", () => {\n      A(\"iframe_will_reload\"), window.location.reload();\n    })\n  ], t = () => e.forEach((n) => n());\n  if (s) {\n    const n = document.createElement(\"style\");\n    n.id = \"telegram-custom-styles\", document.head.appendChild(n), e.push(\n      w(\"set_custom_style\", (r) => {\n        n.innerHTML = r;\n      }),\n      () => document.head.removeChild(n)\n    );\n  }\n  return A(\"iframe_ready\", { reload_supported: !0 }), t;\n}\nfunction xs() {\n  return typeof window > \"u\";\n}\nasync function Cs() {\n  if (de(window))\n    return !0;\n  try {\n    return await d({ method: \"web_app_request_theme\", event: \"theme_changed\", timeout: 100 }), !0;\n  } catch {\n    return !1;\n  }\n}\nfunction Ts(s) {\n  const e = typeof s == \"string\" ? X(s) : s;\n  qe(e);\n  function t(r) {\n    if (typeof r == \"string\")\n      try {\n        const { eventType: i } = ue(r);\n        i === \"web_app_request_theme\" && j(\"theme_changed\", {\n          theme_params: JSON.parse(Ie(e.themeParams))\n        }), i === \"web_app_request_viewport\" && j(\"viewport_changed\", {\n          width: window.innerWidth,\n          height: window.innerHeight,\n          is_state_stable: !0,\n          is_expanded: !0\n        });\n      } catch {\n      }\n  }\n  if (_e()) {\n    const r = window.parent.postMessage.bind(window.parent);\n    window.parent.postMessage = (i) => {\n      t(i), r(i);\n    };\n    return;\n  }\n  if (le(window)) {\n    const r = window.external.notify.bind(window.external);\n    window.external.notify = (i) => {\n      t(i), r(i);\n    };\n    return;\n  }\n  const n = window.TelegramWebviewProxy;\n  window.TelegramWebviewProxy = {\n    ...n || {},\n    postEvent(...r) {\n      t(JSON.stringify({ eventType: r[0], eventData: r[1] })), n && n.postEvent(...r);\n    }\n  };\n}\nfunction zt(s) {\n  return s instanceof V;\n}\nfunction Rs(s, e) {\n  return zt(s) && s.type === e;\n}\nfunction L(s, e) {\n  let t, n, r;\n  return typeof s == \"string\" ? t = s : (t = s.pathname === void 0 ? e : s.pathname, n = s.params, r = s.id), Object.freeze({\n    id: r || (Math.random() * 2 ** 14 | 0).toString(16),\n    pathname: t,\n    params: n\n  });\n}\nclass Ft {\n  constructor(e, t, n = A) {\n    /**\n     * Navigation history.\n     */\n    c(this, \"history\");\n    c(this, \"ee\", new R());\n    /**\n     * True, if current navigator is currently attached.\n     */\n    c(this, \"attached\", !1);\n    /**\n     * Goes to the previous history item.\n     */\n    c(this, \"back\", () => this.go(-1));\n    /**\n     * Adds new event listener.\n     */\n    c(this, \"on\", this.ee.on.bind(this.ee));\n    /**\n     * Removes event listener.\n     */\n    c(this, \"off\", this.ee.off.bind(this.ee));\n    if (this._index = t, this.postEvent = n, e.length === 0)\n      throw f(Ze, \"History should not be empty.\");\n    if (t < 0 || t >= e.length)\n      throw f(\n        Ke,\n        \"Index should not be zero and higher or equal than history size.\"\n      );\n    this.history = e.map((r) => L(r, \"\"));\n  }\n  /**\n   * Allows this navigator to control the `BackButton` visibility state. It also tracks the\n   * `BackButton` clicks and calls the `back` method.\n   */\n  attach() {\n    this.attached || (this.attached = !0, this.sync(), w(\"back_button_pressed\", this.back));\n  }\n  /**\n   * Currently active history item.\n   */\n  get current() {\n    return this.history[this.index];\n  }\n  /**\n   * Prevents current navigator from controlling the BackButton visibility state.\n   */\n  detach() {\n    this.attached = !1, B(\"back_button_pressed\", this.back);\n  }\n  /**\n   * Goes to the next history item.\n   */\n  forward() {\n    this.go(1);\n  }\n  /**\n   * Changes currently active history item index by the specified delta. This method doesn't\n   * change index in case, the updated index points to the non-existing history item. This behavior\n   * is preserved until the `fit` argument is specified.\n   * @param delta - index delta.\n   * @param fit - cuts the delta argument to fit the bounds `[0, history.length - 1]`.\n   */\n  go(e, t) {\n    const n = this.index + e, r = Math.min(\n      Math.max(0, n),\n      this.history.length - 1\n    );\n    (n === r || t) && this.replaceAndMove(r, this.history[r]);\n  }\n  /**\n   * Goes to the specified index. Method does nothing in case, passed index is out of bounds.\n   *\n   * If \"fit\" option was specified and index is out of bounds, it will be cut to the nearest\n   * bound.\n   * @param index - target index.\n   * @param fit - cuts the index argument to fit the bounds `[0, history.length - 1]`.\n   */\n  goTo(e, t) {\n    this.go(e - this.index, t);\n  }\n  /**\n   * True if navigator has items before the current item.\n   */\n  get hasPrev() {\n    return this.index > 0;\n  }\n  /**\n   * True if navigator has items after the current item.\n   */\n  get hasNext() {\n    return this.index !== this.history.length - 1;\n  }\n  /**\n   * Currently active history item index.\n   */\n  get index() {\n    return this._index;\n  }\n  /**\n   * Adds a new history item removing all after the current one.\n   * @param item - item to add.\n   */\n  push(e) {\n    this.hasNext && this.history.splice(this.index + 1), this.replaceAndMove(this.index + 1, L(e, this.current.pathname));\n  }\n  /**\n   * Replaces the current history item.\n   * @param item - item to replace the current item with.\n   */\n  replace(e) {\n    this.replaceAndMove(this.index, L(e, this.current.pathname));\n  }\n  /**\n   * Sets history item by the specified index.\n   * @param index - history item index to replace.\n   * @param historyItem - history item to set.\n   */\n  replaceAndMove(e, t) {\n    const n = e - this.index;\n    if (!n && this.current === t)\n      return;\n    const r = this.current;\n    if (this.index !== e) {\n      const i = this._index;\n      this._index = e, this.attached && i > 0 != e > 0 && this.sync();\n    }\n    this.history[e] = t, this.ee.emit(\"change\", {\n      navigator: this,\n      from: r,\n      to: this.current,\n      delta: n\n    });\n  }\n  /**\n   * Actualizes the `BackButton` visibility state.\n   */\n  sync() {\n    this.postEvent(\"web_app_setup_back_button\", { is_visible: !!this.index });\n  }\n}\nfunction $({\n  params: s,\n  ...e\n}) {\n  return { ...s || { hash: \"\", search: \"\" }, ...e };\n}\nfunction N(s) {\n  const e = typeof s == \"string\" ? s.startsWith(\"/\") : !!(s.pathname && s.pathname.startsWith(\"/\")), t = q(s);\n  return `${e ? t.pathname : t.pathname.slice(1)}${t.search}${t.hash}`;\n}\nfunction W(s, e, t) {\n  let n, r;\n  typeof s == \"string\" ? n = s : (n = N(s), t = s.state, r = s.id);\n  const { pathname: i, search: o, hash: a } = new URL(n, `http://a${I(e, \"/\")}`);\n  return { id: r, pathname: i, params: { hash: a, search: o, state: t } };\n}\nasync function T(s) {\n  return s === 0 ? !0 : Promise.race([\n    new Promise((e) => {\n      const t = G(\"popstate\", () => {\n        t(), e(!0);\n      });\n      window.history.go(s);\n    }),\n    // Usually, it takes about 1ms to emit this event, but we use some buffer.\n    new Promise((e) => {\n      setTimeout(e, 50, !1);\n    })\n  ]);\n}\nasync function Jt() {\n  if (window.history.length <= 1 || (window.history.pushState(null, \"\"), await T(1 - window.history.length)))\n    return;\n  let e = await T(-1);\n  for (; e; )\n    e = await T(-1);\n}\nfunction Be(s) {\n  return q(s).pathname;\n}\nconst ie = 0, U = 1, H = 2;\nclass Le {\n  constructor(e, t, { postEvent: n, hashMode: r = \"classic\", base: i } = {}) {\n    c(this, \"navigator\");\n    c(this, \"ee\", new R());\n    c(this, \"hashMode\");\n    c(this, \"base\");\n    /**\n     * Shows whether the navigator is currently attached to the browser history.\n     */\n    c(this, \"attached\", !1);\n    /**\n     * Handles the window \"popstate\" event.\n     * @param state - event state.\n     */\n    c(this, \"onPopState\", ({ state: e }) => {\n      if (e === null)\n        return this.push(this.parsePath(window.location.href));\n      e === ie ? window.history.forward() : e === U && this.back(), e === H && this.forward();\n    });\n    /**\n     * Underlying navigator change event listener.\n     */\n    c(this, \"onNavigatorChange\", async ({\n      to: e,\n      from: t,\n      delta: n\n    }) => {\n      this.attached && await this.syncHistory(), this.ee.emit(\"change\", {\n        delta: n,\n        from: $(t),\n        to: $(e),\n        navigator: this\n      });\n    });\n    /**\n     * Adds new event listener.\n     */\n    c(this, \"on\", this.ee.on.bind(this.ee));\n    /**\n     * Removes event listener.\n     */\n    c(this, \"off\", this.ee.off.bind(this.ee));\n    this.navigator = new Ft(\n      e.map((o) => W(o, \"/\")),\n      t,\n      n\n    ), this.navigator.on(\"change\", (o) => {\n      this.onNavigatorChange(o);\n    }), this.hashMode = r, this.base = Be(i || \"\");\n  }\n  /**\n   * Attaches current navigator to the browser history allowing navigator to manipulate it.\n   */\n  async attach() {\n    this.attached || (this.attached = !0, this.navigator.attach(), window.addEventListener(\"popstate\", this.onPopState), await this.syncHistory());\n  }\n  /**\n   * Goes back in history by 1.\n   */\n  back() {\n    this.navigator.back();\n  }\n  /**\n   * Detaches current navigator from the browser history.\n   */\n  detach() {\n    this.attached = !1, this.navigator.detach(), window.removeEventListener(\"popstate\", this.onPopState);\n  }\n  /**\n   * Goes forward in history.\n   */\n  forward() {\n    return this.navigator.forward();\n  }\n  /**\n   * Current history cursor.\n   */\n  get index() {\n    return this.navigator.index;\n  }\n  /**\n   * Current history item identifier.\n   */\n  get id() {\n    return this.navigator.current.id;\n  }\n  /**\n   * Changes currently active history item index by the specified delta. This method doesn't\n   * change index in case, the updated index points to the non-existing history item. This behavior\n   * is preserved until the `fit` argument is specified.\n   * @param delta - index delta.\n   * @param fit - cuts the delta argument to fit the bounds `[0, history.length - 1]`.\n   */\n  go(e, t) {\n    return this.navigator.go(e, t);\n  }\n  /**\n   * Goes to the specified index. Method does nothing in case, passed index is out of bounds.\n   *\n   * If \"fit\" option was specified and index is out of bounds, it will be cut to the nearest\n   * bound.\n   * @param index - target index.\n   * @param fit - cuts the index argument to fit the bounds `[0, history.length - 1]`.\n   */\n  goTo(e, t) {\n    this.navigator.goTo(e, t);\n  }\n  /**\n   * Current history item hash.\n   * @see URL.hash\n   * @example\n   * \"\", \"#my-hash\"\n   */\n  get hash() {\n    return (this.navigator.current.params || {}).hash || \"\";\n  }\n  /**\n   * True if navigator has items before the current item.\n   */\n  get hasPrev() {\n    return this.navigator.hasPrev;\n  }\n  /**\n   * True if navigator has items after the current item.\n   */\n  get hasNext() {\n    return this.navigator.hasNext;\n  }\n  /**\n   * Navigation history.\n   */\n  get history() {\n    return this.navigator.history.map($);\n  }\n  /**\n   * Path, including pathname, search and hash.\n   * @example Pathname only.\n   * \"/pathname\"\n   * @example Pathname + search.\n   * \"/pathname?search\"\n   * @example Pathname + hash.\n   * \"/pathname#hash\"\n   * @example Pathname + search + hash.\n   * \"/pathname?search#hash\"\n   */\n  get path() {\n    return N(this);\n  }\n  /**\n   * Current pathname. Always starts with the slash.\n   * @see URL.pathname\n   * @example\n   * \"/\", \"/abc\"\n   */\n  get pathname() {\n    return this.navigator.current.pathname;\n  }\n  /**\n   * Depending on the current navigation type, parses incoming path and returns it presented as\n   * an object. In other words, this method parses the passed path and returns object, describing\n   * how the navigator \"sees\" it.\n   *\n   * @example Hash mode is omitted.\n   * parsePath('/abc?a=1#hash');\n   * // { pathname: '/abc', search: '?a=1', hash: '#hash' }\n   * parsePath('http://example.com/abc?a=1#hash');\n   * // { pathname: '/abc', search: '?a=1', hash: '#hash' }\n   *\n   * @example Hash mode is enabled.\n   * parsePath('/abc?a=1#tma?is=cool#yeah');\n   * // { pathname: '/tma', search: '?is=cool', hash: '#yeah' }\n   * parsePath('http://example.com/abc?a=1#tma?is=cool#yeah');\n   * // { pathname: '/tma', search: '?is=cool', hash: '#yeah' }\n   */\n  parsePath(e) {\n    let t = q(e);\n    return this.hashMode && (t = q(t.hash.slice(1))), {\n      pathname: t.pathname,\n      search: t.search,\n      hash: t.hash\n    };\n  }\n  push(e, t) {\n    const n = W(e, this.path), { state: r = t } = n.params;\n    this.navigator.push({ ...n, params: { ...n.params, state: r } });\n  }\n  replace(e, t) {\n    const n = W(e, this.path), { state: r = t } = n.params;\n    this.navigator.replace({ ...n, params: { ...n.params, state: r } });\n  }\n  /**\n   * Combines the navigator `base` property with the passed path data applying the navigator\n   * navigation mode.\n   * @param value - path presented as string or URLLike.\n   */\n  renderPath(e) {\n    const t = (this.base.length === 1 ? \"\" : this.base) + I(N(e), \"/\");\n    return this.hashMode ? I(t.slice(1), this.hashMode === \"classic\" ? \"#\" : \"#/\") : t;\n  }\n  /**\n   * Synchronizes current navigator state with browser history.\n   */\n  async syncHistory() {\n    window.removeEventListener(\"popstate\", this.onPopState);\n    const { state: e } = this, t = this.renderPath(this);\n    await Jt(), this.hasPrev && this.hasNext ? (window.history.replaceState(U, \"\"), window.history.pushState(e, \"\", t), window.history.pushState(H, \"\"), await T(-1)) : this.hasPrev ? (window.history.replaceState(U, \"\"), window.history.pushState(e, \"\", t)) : this.hasNext ? (window.history.replaceState(e, t), window.history.pushState(H, \"\"), await T(-1)) : (window.history.replaceState(ie, \"\"), window.history.pushState(e, \"\", t)), window.addEventListener(\"popstate\", this.onPopState);\n  }\n  /**\n   * Current query parameters.\n   * @see URL.search\n   * @example\n   * \"\", \"?\", \"?a=1\"\n   */\n  get search() {\n    return (this.navigator.current.params || {}).search || \"\";\n  }\n  /**\n   * Current history item state.\n   */\n  get state() {\n    return (this.navigator.current.params || {}).state;\n  }\n}\nfunction Qt(s) {\n  s || (s = {});\n  const { href: e, hash: t } = window.location;\n  let n = N(\n    s.hashMode === null ? e : t.includes(\"?\") ? t.slice(1) : `?${t.slice(1)}`\n  );\n  const r = s.base ? Be(s.base) : void 0;\n  if (r) {\n    if (!n.startsWith(r))\n      throw f(\n        Xe,\n        `Path \"${n}\" expected to be starting with \"${r}\"`\n      );\n    n = n.slice(r.length);\n  }\n  return new Le([n], 0, s);\n}\nfunction As(s) {\n  const e = s.match(/#(.+)/);\n  return e ? e[1] : null;\n}\nfunction Yt(s, e) {\n  if (ke()) {\n    const t = sessionStorage.getItem(s);\n    if (t)\n      try {\n        const { index: n, history: r } = JSON.parse(t);\n        return new Le(\n          r,\n          n,\n          e\n        );\n      } catch (n) {\n        console.error(\"Unable to restore hash navigator state.\", n);\n      }\n  }\n  return Qt(e);\n}\nfunction Is(s, e) {\n  const t = Yt(s, e), n = () => sessionStorage.setItem(s, JSON.stringify({\n    index: t.index,\n    history: t.history\n  }));\n  return t.on(\"change\", n), n(), t;\n}\nexport {\n  lt as BackButton,\n  Ft as BasicNavigator,\n  Pt as BiometryManager,\n  Le as BrowserNavigator,\n  Ct as ClosingBehavior,\n  It as CloudStorage,\n  Xe as ERR_INVALID_PATH_BASE,\n  Je as ERR_INVOKE_CUSTOM_METHOD_RESPONSE,\n  ze as ERR_METHOD_PARAMETER_UNSUPPORTED,\n  je as ERR_METHOD_UNSUPPORTED,\n  Ze as ERR_NAVIGATION_HISTORY_EMPTY,\n  Ke as ERR_NAVIGATION_INDEX_INVALID,\n  Xt as ERR_NAVIGATION_ITEM_INVALID,\n  ce as ERR_PARSE,\n  es as ERR_SSR_INIT,\n  Qe as ERR_TIMED_OUT,\n  Ye as ERR_UNEXPECTED_TYPE,\n  Fe as ERR_UNKNOWN_ENV,\n  R as EventEmitter,\n  qt as HapticFeedback,\n  kt as InitData,\n  Nt as Invoice,\n  Vt as MainButton,\n  Bt as MiniApp,\n  $t as Popup,\n  Wt as QRScanner,\n  V as SDKError,\n  Ut as SettingsButton,\n  Ht as SwipeBehavior,\n  Ot as ThemeParams,\n  Gt as Utils,\n  jt as Viewport,\n  At as array,\n  vs as bindMiniAppCSSVars,\n  Es as bindThemeParamsCSSVars,\n  Ss as bindViewportCSSVars,\n  b as boolean,\n  ge as captureSameReq,\n  z as classNames,\n  ot as compareVersions,\n  Qt as createBrowserNavigatorFromLocation,\n  pt as createPostEvent,\n  q as createSafeURL,\n  Ee as date,\n  As as getHash,\n  Be as getPathname,\n  ns as initBackButton,\n  rs as initBiometryManager,\n  is as initClosingBehavior,\n  os as initCloudStorage,\n  as as initHapticFeedback,\n  cs as initInitData,\n  hs as initInvoice,\n  us as initMainButton,\n  ls as initMiniApp,\n  Is as initNavigator,\n  ds as initPopup,\n  _s as initQRScanner,\n  fs as initSettingsButton,\n  gs as initSwipeBehavior,\n  ws as initThemeParams,\n  ms as initUtils,\n  ys as initViewport,\n  Ps as initWeb,\n  C as invokeCustomMethod,\n  ye as isColorDark,\n  _e as isIframe,\n  ke as isPageReload,\n  Q as isRGB,\n  ht as isRGBShort,\n  zt as isSDKError,\n  Rs as isSDKErrorOfType,\n  xs as isSSR,\n  Cs as isTMA,\n  g as json,\n  ss as mergeClassNames,\n  Ts as mockTelegramEnv,\n  y as number,\n  B as off,\n  w as on,\n  ps as parseInitData,\n  X as parseLaunchParams,\n  De as parseThemeParams,\n  A as postEvent,\n  d as request,\n  xt as requestBiometryInfo,\n  bs as requestThemeParams,\n  Me as requestViewport,\n  vt as retrieveLaunchParams,\n  _t as rgb,\n  K as searchParams,\n  yt as serializeLaunchParams,\n  Ie as serializeThemeParams,\n  m as setCSSVar,\n  Kt as setDebug,\n  ts as setTargetOrigin,\n  h as string,\n  He as subscribe,\n  v as supports,\n  ct as targetOrigin,\n  me as toRGB,\n  ae as unsubscribe,\n  N as urlToPath,\n  be as withTimeout\n};\n//# sourceMappingURL=index.js.map\n","import type { ComponentType } from 'react';\n\nimport type { Hook, HookRaw, HookResult } from './createHooks.js';\n\nexport interface HOC<H extends HookRaw<any> | HookResult<any>> {\n  /**\n   * Returns a component which is a HOC, passing some hook result to the wrapped component.\n   * @param propKey - key, which will be used to pass a hook result.\n   * @param ssr - is SSR mode enabled.\n   * @param Component - component to wrap.\n   */<\n    PropKey extends string,\n    SSR extends boolean,\n    Props,\n  >(\n    propKey: PropKey,\n    ssr: SSR,\n    Component: ComponentType<Omit<Props, PropKey> & {\n      [K in PropKey]: ReturnType<Hook<Exclude<ReturnType<H>, undefined>, SSR>>\n    }>,\n  ): ComponentType<Omit<Props, PropKey>>;\n}\n\nexport type HOCs<HRaw extends HookRaw<any>, HResult extends HookResult<any>> = [\n  HOC<HRaw>,\n  HOC<HResult>\n];\n\n/**\n * Based on the passed hook, creates function returning HOC. Created HOC passes hook result\n * to the wrapped component.\n * @param useRaw - hook, returning a raw SDK item.\n * @param useResult - hook, returning an SDK item with the result.\n */\nexport function createHOCs<HRaw extends HookRaw<any>, HResult extends HookResult<any>>(\n  useRaw: HRaw,\n  useResult: HResult,\n): HOCs<HRaw, HResult> {\n  function createHOC<Hook extends HookRaw<any> | HookResult<any>>(hook: Hook): HOC<Hook> {\n    return function HOC(propKey, ssr, Component) {\n      return (props) => {\n        const merged: any = {\n          ...props,\n          [propKey]: hook(ssr as any),\n        };\n\n        return <Component {...merged}/>;\n      };\n    };\n  }\n\n  return [createHOC(useRaw), createHOC(useResult)];\n}\n","import { createContext, useContext } from 'react';\n\nimport type { SDKContextType } from './SDKProvider.types.js';\n\nexport const SDKContext = createContext<SDKContextType | undefined>(undefined);\n\n/**\n * @throws Error useSDK was used outside SDKProvider.\n * @returns SDK context.\n */\nexport function useSDK(): SDKContextType {\n  const context = useContext(SDKContext);\n  if (!context) {\n    throw new Error('useSDK was used outside the SDKProvider.');\n  }\n  return context;\n}\n","import { type CleanupFn, isSSR, type AnyFn, If } from '@telegram-apps/sdk';\nimport { useEffect, useState } from 'react';\n\nimport { useSDK } from './SDKProvider/SDKContext.js';\nimport type { SDKContextItem } from './SDKProvider/SDKProvider.types.js';\n\ntype ExtractResult<T> = T extends [result: infer R, cleanup: CleanupFn]\n  ? ExtractResult<R>\n  : T extends PromiseLike<any>\n    ? Awaited<T> | undefined\n    : T;\n\ntype HookFnResult<Fn extends AnyFn> = ExtractResult<ReturnType<Fn>>;\n\ninterface CompleteHook<Result> extends Hook<Result, true>, Hook<Result, false> {\n}\n\nexport type Hook<Result, SSR extends boolean> = If<\n  SSR,\n  (ssr: true) => Result | undefined,\n  (ssr?: false) => Result\n>;\n\nexport interface HookRaw<Factory extends AnyFn>\n  extends CompleteHook<SDKContextItem<HookFnResult<Factory>>> {\n}\n\nexport interface HookResult<Factory extends AnyFn> extends CompleteHook<HookFnResult<Factory>> {\n}\n\nexport type Hooks<Factory extends AnyFn> = [\n  useRaw: HookRaw<Factory>,\n  useResult: HookResult<Factory>,\n];\n\n/**\n * @returns Hooks, simplifying work process with the SDK components.\n */\nexport function createHooks<Factory extends AnyFn>(factory: Factory): Hooks<Factory> {\n  function useRaw(ssr?: false): SDKContextItem<HookFnResult<Factory>>;\n  function useRaw(ssr: true): SDKContextItem<HookFnResult<Factory>> | undefined;\n  function useRaw(ssr?: boolean): SDKContextItem<HookFnResult<Factory>> | undefined {\n    const sdk = useSDK();\n\n    const [result, setResult] = useState(\n      ssr\n        // If SSR mode is enabled, we have no initial value. In this case we will set something\n        // only in useEffect.\n        ? undefined\n        // Otherwise, we are retrieving this factory result.\n        : () => {\n          if (isSSR()) {\n            throw new Error('Using hooks on the server side, you must explicitly specify ssr = true option');\n          }\n          return sdk.use(factory);\n        },\n    );\n\n    // Each time sdk context changes, we are updating the local value.\n    useEffect(() => {\n      setResult(sdk.use(factory));\n    }, [sdk]);\n\n    return result as SDKContextItem<HookFnResult<Factory>> | undefined;\n  }\n\n  function useResult(ssr?: false): HookFnResult<Factory>;\n  function useResult(ssr: true): HookFnResult<Factory> | undefined;\n  function useResult(ssr?: boolean): HookFnResult<Factory> | undefined {\n    const raw = useRaw(ssr as any);\n    if (!raw) {\n      return;\n    }\n    if ('error' in raw) {\n      throw raw.error;\n    }\n    return raw.result;\n  }\n\n  return [useRaw, useResult];\n}\n","import { initBackButton } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useBackButtonRaw, useBackButton] = createHooks(initBackButton);\n\nexport const [withBackButtonRaw, withBackButton] = createHOCs(\n  useBackButtonRaw,\n  useBackButton,\n);\n","import { initBiometryManager } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useBiometryManagerRaw, useBiometryManager] = createHooks(initBiometryManager);\n\nexport const [withBiometryManagerRaw, withBiometryManager] = createHOCs(\n  useBiometryManagerRaw,\n  useBiometryManager,\n);\n","import { initClosingBehavior } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useClosingBehaviorRaw, useClosingBehavior] = createHooks(initClosingBehavior);\n\nexport const [withClosingBehaviorRaw, withClosingBehavior] = createHOCs(\n  useClosingBehaviorRaw,\n  useClosingBehavior,\n);\n","import { initCloudStorage } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useCloudStorageRaw, useCloudStorage] = createHooks(initCloudStorage);\n\nexport const [withCloudStorageRaw, withCloudStorage] = createHOCs(\n  useCloudStorageRaw,\n  useCloudStorage,\n);\n","import { initHapticFeedback } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useHapticFeedbackRaw, useHapticFeedback] = createHooks(initHapticFeedback);\n\nexport const [withHapticFeedbackRaw, withHapticFeedback] = createHOCs(\n  useHapticFeedbackRaw,\n  useHapticFeedback,\n);\n","import { initInitData } from '@telegram-apps/sdk';\n\nimport { createHooks } from '../createHooks.js';\nimport { createHOCs } from '../createHOCs.js';\n\nexport const [useInitDataRaw, useInitData] = createHooks(initInitData);\n\nexport const [withInitDataRaw, withInitData] = createHOCs(useInitDataRaw, useInitData);\n","import { initInvoice } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useInvoiceRaw, useInvoice] = createHooks(initInvoice);\n\nexport const [withInvoiceRaw, withInvoice] = createHOCs(useInvoiceRaw, useInvoice);\n","import { initMainButton } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useMainButtonRaw, useMainButton] = createHooks(initMainButton);\n\nexport const [withMainButtonRaw, withMainButton] = createHOCs(useMainButtonRaw, useMainButton);\n","import { initMiniApp } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useMiniAppRaw, useMiniApp] = createHooks(initMiniApp);\n\nexport const [withMiniAppRaw, withMiniApp] = createHOCs(useMiniAppRaw, useMiniApp);\n","import { initPopup } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [usePopupRaw, usePopup] = createHooks(initPopup);\n\nexport const [withPopupRaw, withPopup] = createHOCs(usePopupRaw, usePopup);\n","import { initQRScanner } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useQRScannerRaw, useQRScanner] = createHooks(initQRScanner);\n\nexport const [withQRScannerRaw, withQRScanner] = createHOCs(useQRScannerRaw, useQRScanner);\n","import { initSettingsButton } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useSettingsButtonRaw, useSettingsButton] = createHooks(initSettingsButton);\n\nexport const [withSettingsButtonRaw, withSettingsButton] = createHOCs(\n  useSettingsButtonRaw,\n  useSettingsButton,\n);\n","import { initSwipeBehavior } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useSwipeBehaviorRaw, useSwipeBehavior] = createHooks(initSwipeBehavior);\n\nexport const [withSwipeBehaviorRaw, withSwipeBehavior] = createHOCs(\n  useSwipeBehaviorRaw,\n  useSwipeBehavior,\n);\n","import { initThemeParams } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useThemeParamsRaw, useThemeParams] = createHooks(initThemeParams);\n\nexport const [withThemeParamsRaw, withThemeParams] = createHOCs(useThemeParamsRaw, useThemeParams);\n","import { useEffect, useState } from 'react';\nimport { type LaunchParams, retrieveLaunchParams } from '@telegram-apps/sdk';\n\n/**\n * @returns Launch parameters.\n */\nexport function useLaunchParams(ssr: true): LaunchParams | undefined;\n\n/**\n * @returns Launch parameters.\n */\nexport function useLaunchParams(ssr?: false): LaunchParams;\n\nexport function useLaunchParams(ssr?: boolean): LaunchParams | undefined {\n  const [lp, setLp] = useState<LaunchParams | undefined>(() => {\n    return ssr ? undefined : retrieveLaunchParams();\n  });\n\n  useEffect(() => {\n    if (ssr) {\n      setLp(retrieveLaunchParams());\n    }\n  }, []);\n\n  return lp;\n}","import { initUtils } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useUtilsRaw, useUtils] = createHooks(initUtils);\n\nexport const [withUtilsRaw, withUtils] = createHOCs(useUtilsRaw, useUtils);\n","import { initViewport } from '@telegram-apps/sdk';\n\nimport { createHOCs } from '../createHOCs.js';\nimport { createHooks } from '../createHooks.js';\n\nexport const [useViewportRaw, useViewport] = createHooks(initViewport);\n\nexport const [withViewportRaw, withViewport] = createHOCs(useViewportRaw, useViewport);\n","import { CleanupFn, initWeb, isIframe, setDebug } from '@telegram-apps/sdk';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport type { AnyFn } from '@telegram-apps/sdk';\n\nimport { SDKContext } from './SDKContext.js';\nimport {\n  SDKContextType,\n  SDKProviderProps,\n  SDKContextItem,\n} from './SDKProvider.types.js';\n\n/**\n * Provides access to the SDK components and initializes some event listeners for the web version\n * of Telegram.\n */\nexport function SDKProvider({ children, acceptCustomStyles, debug }: SDKProviderProps) {\n  // We need it to safely call state setters as long as React forbids these\n  // operations on unmounted components.\n  const isMountedRef = useRef(true);\n\n  // Map, containing all registered factories results.\n  const [cache, setCache] = useState(new Map<AnyFn, SDKContextItem<any>>());\n  const cacheRef = useRef(cache);\n\n  // Safely mutates cache with specified function.\n  const mutateCache = useCallback(\n    (mutate?: (state: Map<AnyFn, SDKContextItem<any>>) => void) => {\n      if (isMountedRef.current) {\n        setCache(c => {\n          mutate && mutate(c);\n          return new Map(c);\n        });\n      }\n    }, [],\n  );\n\n  const context = useMemo<SDKContextType>(() => ({\n    use(factory, ...args) {\n      // Try to get a cached value.\n      const cached = cache.get(factory);\n      if (cached) {\n        return cached;\n      }\n\n      // Call factory and retrieve result.\n      let result: any;\n      let error: any;\n      try {\n        result = factory(...args);\n      } catch (err) {\n        error = err;\n      }\n\n      function withCacheSet(item: SDKContextItem<any>): SDKContextItem<any> {\n        cache.set(factory, item);\n        return item;\n      }\n\n      // If an error occurred, return it.\n      if (error) {\n        return withCacheSet({ error });\n      }\n\n      // Result may represent a tuple, where a result is placed on the first place, and\n      // a cleanup function on the second one.\n      let cleanup: CleanupFn | undefined;\n      if (Array.isArray(result)) {\n        cleanup = result[1];\n        result = result[0];\n      }\n\n      // We may have a case, when result is empty (most likely undefined), for example, when\n      // we initialize InitData. In this case we just return the result.\n      if (!result) {\n        return withCacheSet({ result, cleanup });\n      }\n\n      // Adds change event listener to the value if required, and adds bound listener to the\n      // cleanup function.\n      function finalize(v: any): SDKContextItem<any> {\n        if ('on' in v) {\n          // Forcefully refresh cache in case, something in this value changed.\n          const off = v.on('change', () => mutateCache());\n          const cleanupOriginal = cleanup;\n          cleanup = () => {\n            cleanupOriginal && cleanupOriginal();\n            off();\n          };\n        }\n        return { result: v, cleanup };\n      }\n\n      if (result instanceof Promise) {\n        result.then(\n          (value: any) => mutateCache(c => c.set(factory, finalize(value))),\n          (error: any) => mutateCache(c => c.set(factory, { error })),\n        );\n        return withCacheSet({});\n      }\n      return withCacheSet(finalize(result));\n    },\n  }), [cache]);\n\n  // Effect, responsible for changing mount state.\n  useEffect(() => {\n    // An idiotic line for React's StrictMode.\n    isMountedRef.current = true;\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  // Effect, responsible for initializing the app in the web version of Telegram.\n  useEffect(() => {\n    if (isIframe()) {\n      return initWeb(acceptCustomStyles);\n    }\n  }, [acceptCustomStyles]);\n\n  // Effect, responsible for debug mode.\n  useEffect(() => {\n    setDebug(debug || false);\n  }, [debug]);\n\n  // Every time cache changes, we should actualize the ref to it. It is used in the next\n  // effect.\n  useEffect(() => {\n    cacheRef.current = cache;\n  }, [cache]);\n\n  // Effect, responsible for removing all components \"change\" listeners.\n  useEffect(() => {\n    return () => {\n      cacheRef.current.forEach(v => {\n        'cleanup' in v && v.cleanup && v.cleanup();\n      });\n    };\n  }, []);\n\n  return <SDKContext.Provider value={context}>{children}</SDKContext.Provider>;\n}\n"],"names":["We","Ue","s","e","t","oe","ae","M","it","He","Oe","r","i","F","O","se","Kt","Ge","R","G","J","V","f","je","ze","Fe","Je","Qe","Ye","ce","Ze","Ke","Xt","es","Xe","E","D","S","b","pe","he","g","y","h","ue","et","j","tt","st","nt","p","rt","B","w","k","ot","_","v","le","de","_e","at","fe","ts","ct","A","pt","ge","we","be","d","C","z","ss","ht","me","ye","ut","o","Y","ve","Z","n","lt","Ee","K","dt","ne","Se","_t","ft","gt","Pe","X","xe","wt","Ce","bt","Te","Re","Ae","mt","Ie","yt","qe","vt","ke","Et","St","l","$e","ns","P","Ne","Pt","xt","rs","ee","Ct","is","te","Tt","Rt","At","re","It","os","qt","as","kt","cs","ps","Nt","hs","Vt","us","Dt","Ve","Mt","Bt","a","ls","Lt","$t","ds","Wt","_s","Ut","fs","Ht","gs","De","Ot","ws","bs","I","q","Gt","ms","Me","x","jt","ys","m","vs","Es","Ss","Ps","xs","Cs","Ts","zt","Rs","L","Ft","$","N","W","T","Jt","Be","ie","U","H","Le","Qt","As","Yt","Is","createHOCs","useRaw","useResult","createHOC","hook","propKey","ssr","Component","props","merged","jsx","SDKContext","createContext","useSDK","context","useContext","createHooks","factory","sdk","result","setResult","useState","isSSR","useEffect","raw","useBackButtonRaw","useBackButton","initBackButton","withBackButtonRaw","withBackButton","useBiometryManagerRaw","useBiometryManager","initBiometryManager","withBiometryManagerRaw","withBiometryManager","useClosingBehaviorRaw","useClosingBehavior","initClosingBehavior","withClosingBehaviorRaw","withClosingBehavior","useCloudStorageRaw","useCloudStorage","initCloudStorage","withCloudStorageRaw","withCloudStorage","useHapticFeedbackRaw","useHapticFeedback","initHapticFeedback","withHapticFeedbackRaw","withHapticFeedback","useInitDataRaw","useInitData","initInitData","withInitDataRaw","withInitData","useInvoiceRaw","useInvoice","initInvoice","withInvoiceRaw","withInvoice","useMainButtonRaw","useMainButton","initMainButton","withMainButtonRaw","withMainButton","useMiniAppRaw","useMiniApp","initMiniApp","withMiniAppRaw","withMiniApp","usePopupRaw","usePopup","initPopup","withPopupRaw","withPopup","useQRScannerRaw","useQRScanner","initQRScanner","withQRScannerRaw","withQRScanner","useSettingsButtonRaw","useSettingsButton","initSettingsButton","withSettingsButtonRaw","withSettingsButton","useSwipeBehaviorRaw","useSwipeBehavior","initSwipeBehavior","withSwipeBehaviorRaw","withSwipeBehavior","useThemeParamsRaw","useThemeParams","initThemeParams","withThemeParamsRaw","withThemeParams","useLaunchParams","lp","setLp","retrieveLaunchParams","useUtilsRaw","useUtils","initUtils","withUtilsRaw","withUtils","useViewportRaw","useViewport","initViewport","withViewportRaw","withViewport","SDKProvider","children","acceptCustomStyles","debug","isMountedRef","useRef","cache","setCache","cacheRef","mutateCache","useCallback","mutate","c","useMemo","args","cached","error","err","withCacheSet","item","cleanup","finalize","off","cleanupOriginal","value","isIframe","initWeb","setDebug"],"mappings":"yIAAA,IAAIA,GAAK,OAAO,eACZC,GAAK,CAACC,EAAGC,EAAGC,IAAMD,KAAKD,EAAIF,GAAGE,EAAGC,EAAG,CAAE,WAAY,GAAI,aAAc,GAAI,SAAU,GAAI,MAAOC,CAAC,CAAE,EAAIF,EAAEC,CAAC,EAAIC,EAC3G,EAAI,CAACF,EAAGC,EAAGC,KAAOH,GAAGC,EAAG,OAAOC,GAAK,SAAWA,EAAI,GAAKA,EAAGC,CAAC,EAAGA,GACnE,SAASC,GAAGH,EAAGC,EAAG,CAChB,IAAIC,EACJ,MAAM,EAAI,IAAM,CACdA,IAAM,QAAUD,GAAKA,EAAEC,CAAC,EAAGA,EAAI,MACnC,EACE,MAAO,CAAC,IAAMA,IAAM,OAASA,EAAIF,EAAE,CAAC,EAAIE,EAAG,CAAC,CAC9C,CACA,SAASE,GAAGJ,EAAG,CACb,MAAMC,EAAII,EAAG,EAAE,CAAE,MAAOH,CAAG,EAAGD,EAC9BA,EAAE,YAAYD,CAAC,EAAGE,GAAK,CAACD,EAAE,OAASK,IACrC,CACA,SAASC,GAAGP,EAAG,CACb,OAAOK,EAAG,EAAC,UAAUL,CAAC,EAAG,IAAMI,GAAGJ,CAAC,CACrC,CACA,MAAMQ,EAAG,CACP,YAAYP,EAAGC,EAAI,GAAI,CACrB,KAAK,MAAQD,EAAG,KAAK,QAAUC,CAChC,CAMD,MAAMD,KAAMC,EAAG,CACb,MAAM,EAAoB,IAAI,KAAQO,EAAI,KAAK,eAAe,QAAS,CACrE,KAAM,UACN,OAAQ,UACR,OAAQ,UACR,uBAAwB,EACxB,SAAU,KACX,CAAA,EAAE,OAAO,CAAC,EAAG,CAAE,UAAWC,EAAG,QAAS,CAAG,EAAG,KAAK,QAAS,EAAI,qDAC/D,QAAQT,CAAC,EACP,KAAKQ,CAAC,UAAU,KAAK,KAAK,GAC1B,GAAG,CAAC,2CACJ,GACA,GAAG,CAAC,IAAIC,EAAI,SAASA,CAAC,IAAM,EAAE,GAAG,EAAI,oBAAoB,CAAC,GAAK,EAAE,GACjE,GAAGR,CACT,CACG,CAKD,SAASD,EAAG,CACV,KAAK,MAAM,QAAS,GAAGA,CAAC,CACzB,CAKD,OAAOA,EAAG,CACR,KAAK,MAAM,MAAO,GAAGA,CAAC,CACvB,CACH,CACA,MAAMU,GAAI,IAAIH,GAAG,MAAO,CACtB,QAAS,cACT,UAAW,OACb,CAAC,EACD,IAAII,GAAI,GACR,MAAMC,GAAK,CAAC,CAAE,KAAMb,EAAG,QAASC,CAAC,IAAO,CACtCU,GAAE,IAAI,kBAAmBV,EAAI,CAAE,KAAMD,EAAG,QAASC,CAAC,EAAK,CAAE,KAAMD,CAAG,CAAA,CACpE,EACA,SAASc,GAAGd,EAAG,CACbY,KAAMZ,IAAMY,GAAIZ,EAAGA,EAAIO,GAAGM,EAAE,EAAIT,GAAGS,EAAE,EACvC,CACA,SAASE,MAAMf,EAAG,CAChBY,IAAKD,GAAE,IAAI,GAAGX,CAAC,CACjB,CACA,MAAMgB,CAAE,CACN,aAAc,CACZ,EAAE,KAAM,YAA6B,IAAI,GAAK,EAC9C,EAAE,KAAM,iBAAkB,CAAC,EAC3B,EAAE,KAAM,qBAAsB,CAAA,CAAE,CACjC,CAID,OAAQ,CACN,KAAK,UAAU,MAAK,EAAI,KAAK,mBAAqB,CAAA,CACnD,CAID,IAAI,OAAQ,CACV,OAAO,KAAK,eAAiB,KAAK,mBAAmB,MACtD,CACD,KAAKf,KAAMC,EAAG,CACZ,KAAK,mBAAmB,QAASO,GAAMA,EAAE,CACvC,MAAOR,EACP,KAAMC,CACP,CAAA,CAAC,GAAI,KAAK,UAAU,IAAID,CAAC,GAAK,CAAA,GAAI,QAAQ,CAAC,CAACQ,EAAG,CAAC,IAAM,CACrDA,EAAE,GAAGP,CAAC,EAAG,GAAK,KAAK,IAAID,EAAGQ,CAAC,CACjC,CAAK,CACF,CAQD,GAAGR,EAAGC,EAAG,EAAG,CACV,IAAIO,EAAI,KAAK,UAAU,IAAIR,CAAC,EAC5B,OAAOQ,GAAK,KAAK,UAAU,IAAIR,EAAGQ,EAAI,CAAE,CAAA,EAAGA,EAAE,KAAK,CAACP,EAAG,CAAC,CAAC,EAAG,KAAK,gBAAkB,EAAG,IAAM,KAAK,IAAID,EAAGC,CAAC,CACzG,CAOD,IAAID,EAAGC,EAAG,CACR,MAAM,EAAI,KAAK,UAAU,IAAID,CAAC,GAAK,GACnC,QAASQ,EAAI,EAAGA,EAAI,EAAE,OAAQA,GAAK,EACjC,GAAIP,IAAM,EAAEO,CAAC,EAAE,CAAC,EAAG,CACjB,EAAE,OAAOA,EAAG,CAAC,EAAG,KAAK,gBAAkB,EACvC,MACD,CACJ,CAMD,UAAUR,EAAG,CACX,OAAO,KAAK,mBAAmB,KAAKA,CAAC,EAAG,IAAM,KAAK,YAAYA,CAAC,CACjE,CAMD,YAAYA,EAAG,CACb,QAASC,EAAI,EAAGA,EAAI,KAAK,mBAAmB,OAAQA,GAAK,EACvD,GAAI,KAAK,mBAAmBA,CAAC,IAAMD,EAAG,CACpC,KAAK,mBAAmB,OAAOC,EAAG,CAAC,EACnC,MACD,CACJ,CACH,CACA,SAASe,GAAEjB,EAAGC,EAAGC,EAAG,CAClB,OAAO,OAAO,iBAAiBF,EAAGC,EAAGC,CAAC,EAAG,IAAM,OAAO,oBAAoBF,EAAGC,EAAGC,CAAC,CACnF,CACA,SAASgB,MAAKlB,EAAG,CACf,IAAIC,EAAI,GACR,MAAMC,EAAIF,EAAE,KAAK,CAAC,EAClB,MAAO,CACJ,GAAM,CAACC,GAAKC,EAAE,KAAK,CAAC,EACrB,IAAM,CACJD,IAAMA,EAAI,GAAIC,EAAE,QAAS,GAAM,EAAG,CAAA,EACnC,EACDD,CACJ,CACA,CACA,MAAMkB,UAAU,KAAM,CACpB,YAAYlB,EAAGC,EAAG,EAAG,CACnB,MAAMA,EAAG,CAAE,MAAO,CAAC,CAAE,EAAG,KAAK,KAAOD,EAAG,OAAO,eAAe,KAAMkB,EAAE,SAAS,CAC/E,CACH,CACA,SAASC,EAAEpB,EAAGC,EAAGC,EAAG,CAClB,OAAO,IAAIiB,EAAEnB,EAAGC,EAAGC,CAAC,CACtB,CACK,MAACmB,GAAK,yBAA0BC,GAAK,mCAAoCC,GAAK,kBAAmBC,GAAK,oCAAqCC,GAAK,gBAAiBC,GAAK,sBAAuBC,GAAK,YAAaC,GAAK,4BAA6BC,GAAK,gCAAiCC,GAAK,8BAA+BC,GAAK,eAAgBC,GAAK,wBAC1V,SAASC,GAAI,CACX,OAAOb,EAAEM,GAAI,2BAA2B,CAC1C,CACA,MAAMQ,CAAE,CACN,YAAYjC,EAAGC,EAAG,EAAG,CACnB,KAAK,OAASD,EAAG,KAAK,WAAaC,EAAG,KAAK,KAAO,CACnD,CAOD,MAAMD,EAAG,CACP,GAAI,EAAE,KAAK,YAAcA,IAAM,QAC7B,GAAI,CACF,OAAO,KAAK,OAAOA,CAAC,CACrB,OAAQC,EAAG,CACV,MAAMkB,EACJO,GACA,wBAAwB,KAAK,KAAO,OAAO,KAAK,IAAI,GAAK,EAAE,GAC3DzB,CACV,CACO,CACJ,CACD,UAAW,CACT,OAAO,KAAK,WAAa,GAAI,IAC9B,CACH,CACA,SAASiC,EAAEnC,EAAGC,EAAG,CACf,MAAO,IAAM,IAAIiC,EAAElC,EAAG,GAAIC,CAAC,CAC7B,CACK,MAACmC,EAAID,EAAGnC,GAAM,CACjB,GAAI,OAAOA,GAAK,UACd,OAAOA,EACT,MAAMC,EAAI,OAAOD,CAAC,EAClB,GAAIC,IAAM,KAAOA,IAAM,OACrB,MAAO,GACT,GAAIA,IAAM,KAAOA,IAAM,QACrB,MAAO,GACT,MAAMgC,EAAC,CACT,EAAG,SAAS,EACZ,SAASI,GAAGrC,EAAGC,EAAG,CAChB,MAAMC,EAAI,CAAA,EACV,UAAW,KAAKF,EAAG,CACjB,MAAMS,EAAIT,EAAE,CAAC,EACb,GAAI,CAACS,EACH,SACF,IAAIC,EAAG,EACP,GAAI,OAAOD,GAAK,YAAc,UAAWA,EACvCC,EAAI,EAAG,EAAI,OAAOD,GAAK,WAAaA,EAAIA,EAAE,MAAM,KAAKA,CAAC,MACnD,CACH,KAAM,CAAE,KAAM,CAAG,EAAGA,EACpBC,EAAID,EAAE,MAAQ,EAAG,EAAI,OAAO,GAAK,WAAa,EAAI,EAAE,MAAM,KAAK,CAAC,CACjE,CACD,GAAI,CACF,MAAM,EAAI,EAAER,EAAES,CAAC,CAAC,EAChB,IAAM,SAAWR,EAAE,CAAC,EAAI,EACzB,OAAQ,EAAG,CACV,MAAMkB,EAAEO,GAAI,0BAA0B,CAAC,IAAK,CAAC,CAC9C,CACF,CACD,OAAOzB,CACT,CACA,SAASoC,GAAGtC,EAAG,CACb,IAAIC,EAAID,EACR,GAAI,OAAOC,GAAK,WAAaA,EAAI,KAAK,MAAMA,CAAC,GAAI,OAAOA,GAAK,UAAYA,IAAM,MAAQ,MAAM,QAAQA,CAAC,EACpG,MAAMgC,EAAC,EACT,OAAOhC,CACT,CACA,SAASsC,EAAEvC,EAAGC,EAAG,CACf,OAAO,IAAIiC,EAAGhC,GAAM,CAClB,MAAM,EAAIoC,GAAGpC,CAAC,EACd,OAAOmC,GAAGrC,EAAIS,GAAM,EAAEA,CAAC,CAAC,CAC5B,EAAK,GAAIR,CAAC,CACV,CACK,MAACuC,EAAIL,EAAGnC,GAAM,CACjB,GAAI,OAAOA,GAAK,SACd,OAAOA,EACT,GAAI,OAAOA,GAAK,SAAU,CACxB,MAAMC,EAAI,OAAOD,CAAC,EAClB,GAAI,CAAC,OAAO,MAAMC,CAAC,EACjB,OAAOA,CACV,CACD,MAAMgC,EAAC,CACT,EAAG,QAAQ,EAAGQ,EAAIN,EAAGnC,GAAM,CACzB,GAAI,OAAOA,GAAK,UAAY,OAAOA,GAAK,SACtC,OAAOA,EAAE,WACX,MAAMiC,EAAC,CACT,EAAG,QAAQ,EACX,SAASS,GAAG1C,EAAG,CACb,OAAOuC,EAAE,CACP,UAAWE,EAAG,EACd,UAAYxC,GAAMA,CACtB,CAAG,EAAE,MAAMD,CAAC,CACZ,CACA,SAAS2C,IAAK,CACZ,CAAC,iCAAkC,oBAAqB,UAAU,EAAE,QAAS3C,GAAM,CACjF,OAAO,OAAOA,CAAC,CACnB,CAAG,CACH,CACA,SAAS4C,GAAE5C,EAAGC,EAAG,CACf,OAAO,cAAc,IAAI,aAAa,UAAW,CAC/C,KAAM,KAAK,UAAU,CAAE,UAAWD,EAAG,UAAWC,EAAG,EAEnD,OAAQ,OAAO,MAChB,CAAA,CAAC,CACJ,CACA,SAAS4C,IAAK,CACZ,CACE,CAAC,gCAAgC,EAEjC,CAAC,oBAAqB,cAAc,EAEpC,CAAC,WAAY,UAAW,cAAc,CAE1C,EAAI,QAAS7C,GAAM,CACf,IAAIC,EAAI,OACRD,EAAE,QAAQ,CAACE,EAAG,EAAGO,IAAM,CACrB,GAAI,IAAMA,EAAE,OAAS,EAAG,CACtBR,EAAEC,CAAC,EAAI0C,GACP,MACD,CACD1C,KAAKD,IAAMA,EAAEC,CAAC,EAAI,CAAE,GAAGD,EAAIA,EAAEC,CAAC,CACpC,CAAK,CACL,CAAG,CACH,CACA,MAAM4C,GAAK,CACT,wBAAyBP,EAAE,CACzB,OAAQE,EAAG,EACX,KAAOzC,GAAMA,IAAM,KAAOA,EAAIyC,EAAC,EAAG,SAAQ,EAAG,MAAMzC,CAAC,CACxD,CAAG,EACD,sBAAuBuC,EAAE,CACvB,OAAQE,EAAG,EACX,OAASzC,GAAMA,EACf,MAAOyC,EAAG,EAAC,SAAU,CACzB,CAAG,EACD,aAAc,CACZ,MAAMzC,EAAG,CACP,OAAOuC,EAAE,CACP,UAAYtC,GAAMA,GAAK,KAAO,OAASwC,EAAC,EAAG,MAAMxC,CAAC,CACnD,CAAA,EAAE,MAAMD,GAAK,CAAA,CAAE,CACjB,CACF,EACD,iBAAkBuC,EAAE,CAClB,OAAQC,EAAG,EACX,MAAQxC,GAAMA,GAAK,KAAO,OAAO,WAAawC,EAAC,EAAG,MAAMxC,CAAC,EACzD,gBAAiBoC,EAAG,EACpB,YAAaA,EAAG,CACpB,CAAG,CACH,EACA,SAASW,IAAK,CACZ,MAAM/C,EAAI,IAAIgB,EAAKf,EAAI,IAAIe,EAC3Bf,EAAE,UAAW,GAAM,CACjBD,EAAE,KAAK,QAAS,CAAE,KAAM,EAAE,MAAO,QAAS,EAAE,KAAK,CAAC,CAAG,CAAA,CACzD,CAAG,EAAG6C,GAAE,EACN,KAAM,CAAA,CAAG3C,CAAC,EAAIgB,GAEZyB,GAMA1B,GAAE,SAAU,IAAM,CAChBhB,EAAE,KAAK,mBAAoB,CACzB,MAAO,OAAO,WACd,OAAQ,OAAO,YACf,gBAAiB,GACjB,YAAa,EACrB,CAAO,CACP,CAAK,EAGDgB,GAAE,UAAY,GAAM,CAClB,GAAI,EAAE,SAAW,OAAO,OACtB,OACF,IAAIR,EACJ,GAAI,CACFA,EAAIiC,GAAG,EAAE,IAAI,CACrB,MAAc,CACN,MACD,CACD,KAAM,CAAE,UAAWhC,EAAG,UAAW,GAAMD,EAAG,EAAIqC,GAAGpC,CAAC,EAClD,GAAI,CACF,MAAMsC,EAAI,EAAI,EAAE,MAAM,CAAC,EAAI,EAC3B/C,EAAE,KAAK,GAAG+C,EAAI,CAACtC,EAAGsC,CAAC,EAAI,CAACtC,CAAC,CAAC,CAC3B,OAAQsC,EAAG,CACVrC,GAAE,MACA,qCAAqCD,CAAC;AAAA;AAAA,uEAGtCD,EACAuC,CACV,CACO,CACP,CAAK,EAED,IAAMhD,EAAE,MAAO,EACf,IAAMC,EAAE,MAAO,CACnB,EACE,MAAO,CAAC,CACN,GAAIA,EAAE,GAAG,KAAKA,CAAC,EACf,IAAKA,EAAE,IAAI,KAAKA,CAAC,EACjB,UAAU,EAAG,CACX,OAAOD,EAAE,GAAG,QAAS,CAAC,CACvB,EACD,YAAY,EAAG,CACbA,EAAE,IAAI,QAAS,CAAC,CACjB,EACD,IAAI,OAAQ,CACV,OAAOC,EAAE,MAAQD,EAAE,KACpB,CACF,EAAEE,CAAC,CACN,CACA,KAAM,CAAC+C,GAAI3C,EAAE,EAAIH,GACdH,GAAM,CACL,KAAM,CAACC,EAAGC,CAAC,EAAI6C,GAAI,EAAE,EAAI9C,EAAE,IAAI,KAAKA,CAAC,EACrC,OAAOA,EAAE,IAAM,CAACQ,EAAGC,IAAM,CACvB,KAAM,CAAE,MAAO,CAAG,EAAGT,EACrB,EAAEQ,EAAGC,CAAC,EAAG,GAAK,CAACT,EAAE,OAASD,GAChC,EAAO,CAACC,EAAGC,CAAC,CACT,EACD,CAAC,CAAG,CAAAF,CAAC,IAAMA,EAAG,CAChB,EACA,SAASK,GAAI,CACX,OAAO4C,GAAE,EAAG,CAAC,CACf,CACA,SAASC,EAAElD,EAAGC,EAAG,CACfI,IAAI,IAAIL,EAAGC,CAAC,CACd,CACA,SAASkD,EAAEnD,EAAGC,EAAGC,EAAG,CAClB,OAAOG,EAAG,EAAC,GAAGL,EAAGC,EAAGC,CAAC,CACvB,CACA,SAASkD,EAAEpD,EAAG,CACZ,OAAO,OAAOA,GAAK,UAAYA,IAAM,MAAQ,CAAC,MAAM,QAAQA,CAAC,CAC/D,CACA,SAASqD,GAAGrD,EAAGC,EAAG,CAChB,MAAMC,EAAIF,EAAE,MAAM,GAAG,EAAG,EAAIC,EAAE,MAAM,GAAG,EAAGQ,EAAI,KAAK,IAAIP,EAAE,OAAQ,EAAE,MAAM,EACzE,QAASQ,EAAI,EAAGA,EAAID,EAAGC,GAAK,EAAG,CAC7B,MAAM,EAAI,SAASR,EAAEQ,CAAC,GAAK,IAAK,EAAE,EAAG,EAAI,SAAS,EAAEA,CAAC,GAAK,IAAK,EAAE,EACjE,GAAI,IAAM,EACR,OAAO,EAAI,EAAI,EAAI,EACtB,CACD,MAAO,EACT,CACA,SAAS4C,EAAEtD,EAAGC,EAAG,CACf,OAAOoD,GAAGrD,EAAGC,CAAC,GAAK,CACrB,CACA,SAASsD,EAAEvD,EAAGC,EAAGC,EAAG,CAClB,GAAI,OAAOA,GAAK,SAAU,CACxB,GAAIF,IAAM,oBAAqB,CAC7B,GAAIC,IAAM,mBACR,OAAOqD,EAAE,MAAOpD,CAAC,EACnB,GAAID,IAAM,cACR,OAAOqD,EAAE,MAAOpD,CAAC,CACpB,CACD,GAAIF,IAAM,4BAA8BC,IAAM,QAC5C,OAAOqD,EAAE,MAAOpD,CAAC,EACnB,GAAIF,IAAM,iBAAmBC,IAAM,cACjC,OAAOqD,EAAE,MAAOpD,CAAC,CACpB,CACD,OAAQF,EAAC,CACP,IAAK,uBACL,IAAK,uBACL,IAAK,4BACL,IAAK,+BACL,IAAK,2BACL,IAAK,kCACH,OAAOsD,EAAE,MAAOrD,CAAC,EACnB,IAAK,qBACH,OAAOqD,EAAE,MAAOrD,CAAC,EACnB,IAAK,8BACL,IAAK,6BACL,IAAK,mCACH,OAAOqD,EAAE,MAAOrD,CAAC,EACnB,IAAK,8BACH,OAAOqD,EAAE,MAAOrD,CAAC,EACnB,IAAK,+BACL,IAAK,+BACL,IAAK,wBACH,OAAOqD,EAAE,MAAOrD,CAAC,EACnB,IAAK,gCACH,OAAOqD,EAAE,OAAQrD,CAAC,EACpB,IAAK,4BACL,IAAK,iCACL,IAAK,kCACL,IAAK,gCACL,IAAK,gCACH,OAAOqD,EAAE,MAAOrD,CAAC,EACnB,IAAK,+BACH,OAAOqD,EAAE,MAAOrD,CAAC,EACnB,QACE,MAAO,CACL,eACA,qBACA,gBACA,oBACA,iBACA,oBACA,gBACA,wBACA,2BACA,4BACA,gCACR,EAAQ,SAASD,CAAC,CACf,CACH,CACA,SAASwD,GAAGxD,EAAG,CACb,MAAO,aAAcA,GAAKoD,EAAEpD,EAAE,QAAQ,GAAK,WAAYA,EAAE,UAAY,OAAOA,EAAE,SAAS,QAAU,UACnG,CACA,SAASyD,GAAGzD,EAAG,CACb,MAAO,yBAA0BA,GAAKoD,EAAEpD,EAAE,oBAAoB,GAAK,cAAeA,EAAE,sBAAwB,OAAOA,EAAE,qBAAqB,WAAa,UACzJ,CACA,SAAS0D,GAAK,CACZ,GAAI,CACF,OAAO,OAAO,OAAS,OAAO,GAClC,MAAU,CACN,MAAO,EACR,CACH,CACA,MAAMC,GAAK,2BACX,IAAIC,GAAKD,GACT,SAASE,GAAG7D,EAAG,CACb4D,GAAK5D,CACP,CACA,SAAS8D,IAAK,CACZ,OAAOF,EACT,CACA,SAASG,EAAE/D,EAAGC,EAAGC,EAAG,CAClB,IAAI,EAAI,CAAE,EAAEO,EACZ,GAAI,CAACR,GAAK,CAACC,EAAI,EAAI,CAAA,EAAKD,GAAKC,GAAK,EAAIA,EAAGO,EAAIR,GAAKA,IAAM,iBAAkBA,EAAI,EAAIA,EAAIQ,EAAIR,GAAIc,GAAG,iBAAkBN,EAAI,CAAE,MAAOT,EAAG,KAAMS,CAAC,EAAK,CAAE,MAAOT,CAAC,CAAE,EAAG0D,EAAI,EAChK,OAAO,OAAO,OAAO,YACnB,KAAK,UAAU,CAAE,UAAW1D,EAAG,UAAWS,EAAG,EAC7C,EAAE,cAAgBqD,GAAI,CAC5B,EACE,GAAIN,GAAG,MAAM,EAAG,CACd,OAAO,SAAS,OAAO,KAAK,UAAU,CAAE,UAAWxD,EAAG,UAAWS,CAAC,CAAE,CAAC,EACrE,MACD,CACD,GAAIgD,GAAG,MAAM,EAAG,CACd,OAAO,qBAAqB,UAAUzD,EAAG,KAAK,UAAUS,CAAC,CAAC,EAC1D,MACD,CACD,MAAMW,EACJG,GACA,uKACJ,CACA,CACA,SAASyC,GAAGhE,EAAG,CACb,MAAO,CAACC,EAAGC,IAAM,CACf,GAAI,CAACqD,EAAEtD,EAAGD,CAAC,EACT,MAAMoB,EAAEC,GAAI,WAAWpB,CAAC,yCAAyCD,CAAC,EAAE,EACtE,GAAIoD,EAAElD,CAAC,GAAKD,IAAM,4BAA8B,UAAWC,GAAK,CAACqD,EAAEtD,EAAG,QAASD,CAAC,EAC9E,MAAMoB,EACJE,GACA,yBAAyBrB,CAAC,gDAAgDD,CAAC,EACnF,EACI,OAAO+D,EAAE9D,EAAGC,CAAC,CACjB,CACA,CACA,SAAS+D,GAAGjE,EAAG,CACb,MAAO,CAAC,CAAE,OAAQC,CAAC,IAAOA,IAAMD,CAClC,CACA,SAASkE,GAAGlE,EAAG,CACb,OAAOoB,EAAEK,GAAI,oBAAoBzB,CAAC,IAAI,CACxC,CACA,SAASmE,GAAGnE,EAAGC,EAAG,CAChB,OAAO,QAAQ,KAAK,CAClB,OAAOD,GAAK,WAAaA,EAAC,EAAKA,EAC/B,IAAI,QAAQ,CAACE,EAAG,IAAM,CACpB,WAAW,IAAM,CACf,EAAEgE,GAAGjE,CAAC,CAAC,CACR,EAAEA,CAAC,CACV,CAAK,CACL,CAAG,CACH,CACA,eAAemE,EAAEpE,EAAG,CAClB,IAAIC,EACJ,MAAMC,EAAI,IAAI,QAAS,GAAMD,EAAI,CAAC,EAAG,CAAE,MAAO,EAAG,QAASQ,EAAG,QAASC,CAAG,EAAGV,EAAG,CAAA,CAAG,CAAC,EAAIkB,IAEpF,MAAM,QAAQ,CAAC,EAAI,EAAI,CAAC,CAAC,GAAG,IAAK,GAAMiC,EAAE,EAAIH,GAAM,EACjD,CAACvC,IAAM,MAAM,QAAQ,CAAC,EAAIA,EAAE,CAC3B,MAAO,EACP,QAASuC,CACjB,CAAO,EAAIvC,EAAEuC,CAAC,KAAO/C,EAAE+C,CAAC,CACxB,CAAK,CAAC,CACN,EACE,GAAI,CACF,OAAQhD,EAAE,WAAa+D,GAAG/D,EAAE,OAAQA,EAAE,MAAM,EAAG,MAAOU,EAAIyD,GAAGjE,EAAGQ,CAAC,EAAIR,EACzE,QAAY,CACR,GACD,CACH,CACA,eAAemE,EAAErE,EAAGC,EAAGC,EAAG,EAAI,CAAA,EAAI,CAChC,KAAM,CACJ,OAAQO,EACR,MAAOC,CACR,EAAG,MAAM0D,EAAE,CACV,GAAG,EACH,OAAQ,+BACR,MAAO,wBACP,OAAQ,CACN,OAAQpE,EACR,OAAQC,EACR,OAAQC,CACT,EACD,QAAS+D,GAAG/D,CAAC,CACjB,CAAG,EACD,GAAIQ,EACF,MAAMU,EAAEI,GAAId,CAAC,EACf,OAAOD,CACT,CACA,SAAS6D,KAAKtE,EAAG,CACf,OAAOA,EAAE,IAAKC,GAAM,CAClB,GAAI,OAAOA,GAAK,SACd,OAAOA,EACT,GAAImD,EAAEnD,CAAC,EACL,OAAOqE,EAAE,OAAO,QAAQrE,CAAC,EAAE,IAAKC,GAAMA,EAAE,CAAC,GAAKA,EAAE,CAAC,CAAC,CAAC,EACrD,GAAI,MAAM,QAAQD,CAAC,EACjB,OAAOqE,EAAE,GAAGrE,CAAC,CAChB,CAAA,EAAE,OAAO,OAAO,EAAE,KAAK,GAAG,CAC7B,CACA,SAASsE,MAAMvE,EAAG,CAChB,OAAOA,EAAE,OAAO,CAACC,EAAGC,KAAOkD,EAAElD,CAAC,GAAK,OAAO,QAAQA,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAGO,CAAC,IAAM,CACvE,MAAMC,EAAI4D,EAAErE,EAAE,CAAC,EAAGQ,CAAC,EACnBC,EAAE,SAAWT,EAAE,CAAC,EAAIS,EACxB,CAAG,EAAGT,GAAI,CAAA,CAAE,CACZ,CACA,SAAS,EAAED,EAAG,CACZ,MAAO,iBAAiB,KAAKA,CAAC,CAChC,CACA,SAASwE,GAAGxE,EAAG,CACb,MAAO,iBAAiB,KAAKA,CAAC,CAChC,CACA,SAASyE,GAAGzE,EAAG,CACb,MAAMC,EAAID,EAAE,QAAQ,MAAO,EAAE,EAAE,cAC/B,GAAI,EAAEC,CAAC,EACL,OAAOA,EACT,GAAIuE,GAAGvE,CAAC,EAAG,CACT,IAAI,EAAI,IACR,QAASQ,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAC1B,GAAKR,EAAE,EAAIQ,CAAC,EAAE,OAAO,CAAC,EACxB,OAAO,CACR,CACD,MAAMP,EAAID,EAAE,MAAM,wCAAwC,GAAKA,EAAE,MAAM,iDAAiD,EACxH,GAAI,CAACC,EACH,MAAM,IAAI,MAAM,UAAUF,CAAC,8CAA8C,EAC3E,OAAOE,EAAE,MAAM,CAAC,EAAE,OAAO,CAAC,EAAGO,IAAM,CACjC,MAAMC,EAAI,SAASD,EAAG,EAAE,EAAE,SAAS,EAAE,EACrC,OAAO,GAAKC,EAAE,SAAW,EAAI,IAAM,IAAMA,CAC1C,EAAE,GAAG,CACR,CACA,SAASgE,GAAG1E,EAAG,CACb,MAAMC,EAAIwE,GAAGzE,CAAC,EACd,OAAO,KAAK,KACV,CAAC,KAAO,KAAO,IAAK,EAAE,OAAO,CAACE,EAAG,EAAGO,IAAM,CACxC,MAAMC,EAAI,SAAST,EAAE,MAAM,EAAIQ,EAAI,EAAG,GAAKA,EAAI,GAAK,CAAC,EAAG,EAAE,EAC1D,OAAOP,EAAIQ,EAAIA,EAAI,CACpB,EAAE,CAAC,CACL,EAAG,GACN,CACA,MAAMiE,EAAG,CACP,YAAY1E,EAAG,CACb,EAAE,KAAM,KAAM,IAAIe,CAAG,EAIrB,EAAE,KAAM,KAAM,KAAK,GAAG,GAAG,KAAK,KAAK,EAAE,CAAC,EAItC,EAAE,KAAM,MAAO,KAAK,GAAG,IAAI,KAAK,KAAK,EAAE,CAAC,EACxC,KAAK,MAAQf,CACd,CAID,OAAQ,CACN,MAAO,CAAE,GAAG,KAAK,MAClB,CACD,IAAIA,EAAGC,EAAG,CACR,OAAO,QAAQ,OAAOD,GAAK,SAAW,CAAE,CAACA,CAAC,EAAGC,CAAC,EAAKD,CAAC,EAAE,OAAO,CAACQ,EAAG,CAAC,EAAGmE,CAAC,IAAM,KAAK,MAAM,CAAC,IAAMA,GAAKA,IAAM,OAASnE,GAAK,KAAK,MAAM,CAAC,EAAImE,EAAG,KAAK,GAAG,KAAK,UAAU,CAAC,GAAIA,CAAC,EAAG,IAAK,EAAE,GAAK,KAAK,GAAG,KAAK,SAAU,KAAK,KAAK,CACxN,CAKD,IAAI3E,EAAG,CACL,OAAO,KAAK,MAAMA,CAAC,CACpB,CACH,CACA,MAAM4E,EAAE,CACN,YAAY5E,EAAG,CACb,EAAE,KAAM,OAAO,EAIf,EAAE,KAAM,KAAK,EAIb,EAAE,KAAM,KAAK,EAIb,EAAE,KAAM,OAAO,EACf,KAAK,MAAQ,IAAI0E,GAAG1E,CAAC,EAAG,KAAK,IAAM,KAAK,MAAM,IAAI,KAAK,KAAK,KAAK,EAAG,KAAK,IAAM,KAAK,MAAM,IAAI,KAAK,KAAK,KAAK,EAAG,KAAK,MAAQ,KAAK,MAAM,MAAM,KAAK,KAAK,KAAK,CAC9J,CACH,CACA,SAAS6E,GAAG9E,EAAGC,EAAG,CAChB,OAAQC,GAAMqD,EAAEtD,EAAEC,CAAC,EAAGF,CAAC,CACzB,CACA,MAAM+E,WAAUF,EAAE,CAChB,YAAY,EAAGG,EAAGvE,EAAG,CACnB,MAAM,CAAC,EAIP,EAAE,KAAM,UAAU,EAClB,KAAK,SAAWqE,GAAGE,EAAGvE,CAAC,CACxB,CACH,CACA,MAAMwE,WAAWF,EAAE,CACjB,YAAY,EAAGC,EAAGvE,EAAG,CACnB,MAAM,CAAE,UAAW,CAAC,EAAIuE,EAAG,CACzB,KAAM,4BACN,KAAM,2BACZ,CAAK,EAMD,EAAE,KAAM,KAAM,CAAC9E,EAAG8E,IAAM9E,IAAM,QAAUiD,EAAE,sBAAuB6B,CAAC,EAAI,KAAK,MAAM,GAAG9E,EAAG8E,CAAC,CAAC,EAMzF,EAAE,KAAM,MAAO,CAAC9E,EAAG8E,IAAM9E,IAAM,QAAUgD,EAAE,sBAAuB8B,CAAC,EAAI,KAAK,MAAM,IAAI9E,EAAG8E,CAAC,CAAC,EAC3F,KAAK,UAAYvE,CAClB,CACD,IAAI,UAAU,EAAG,CACf,KAAK,IAAI,YAAa,CAAC,EAAG,KAAK,UAAU,4BAA6B,CAAE,WAAY,CAAG,CAAA,CACxF,CAID,IAAI,WAAY,CACd,OAAO,KAAK,IAAI,WAAW,CAC5B,CAID,MAAO,CACL,KAAK,UAAY,EAClB,CAID,MAAO,CACL,KAAK,UAAY,EAClB,CACH,CACK,MAACyE,GAAK/C,EAAGnC,GAAMA,aAAa,KAAOA,EAAI,IAAI,KAAKwC,EAAC,EAAG,MAAMxC,CAAC,EAAI,GAAG,EAAG,MAAM,EAChF,SAASmF,EAAEnF,EAAGC,EAAG,CACf,OAAO,IAAIiC,EAAGhC,GAAM,CAClB,GAAI,OAAOA,GAAK,UAAY,EAAEA,aAAa,iBACzC,MAAM+B,EAAC,EACT,MAAM,EAAI,OAAO/B,GAAK,SAAW,IAAI,gBAAgBA,CAAC,EAAIA,EAC1D,OAAOmC,GAAGrC,EAAIS,GAAM,CAClB,MAAMC,EAAI,EAAE,IAAID,CAAC,EACjB,OAAOC,IAAM,KAAO,OAASA,CACnC,CAAK,CACL,EAAK,GAAIT,CAAC,CACV,CACA,MAAMmF,GAAK7C,EAAE,CACX,GAAIC,EAAG,EACP,KAAMC,EAAG,EACT,MAAOA,EAAG,EACV,SAAU,CACR,KAAMA,EAAG,EAAC,SAAU,EACpB,KAAM,WACP,EACD,SAAUA,EAAG,EAAC,SAAU,CAC1B,EAAG,MAAM,EAAE,WAAY4C,GAAK9C,EAAE,CAC5B,sBAAuB,CACrB,KAAMH,EAAG,EAAC,SAAU,EACpB,KAAM,0BACP,EACD,gBAAiB,CACf,KAAMA,EAAG,EAAC,SAAU,EACpB,KAAM,oBACP,EACD,UAAW,CACT,KAAMK,EAAG,EACT,KAAM,YACP,EACD,GAAID,EAAG,EACP,MAAO,CACL,KAAMJ,EAAG,EAAC,SAAU,EACpB,KAAM,QACP,EACD,UAAW,CACT,KAAMA,EAAG,EAAC,SAAU,EACpB,KAAM,YACP,EACD,aAAc,CACZ,KAAMK,EAAG,EAAC,SAAU,EACpB,KAAM,eACP,EACD,SAAU,CACR,KAAMA,EAAG,EAAC,SAAU,EACpB,KAAM,WACP,EACD,SAAU,CACR,KAAMA,EAAG,EAAC,SAAU,EACpB,KAAM,WACP,EACD,SAAUA,EAAG,EAAC,SAAU,CAC1B,EAAG,MAAM,EAAE,WACX,SAAS6C,IAAK,CACZ,OAAOH,EAAE,CACP,SAAU,CACR,KAAMD,GAAI,EACV,KAAM,WACP,EACD,aAAc,CACZ,KAAM1C,EAAG,EAAC,SAAU,EACpB,KAAM,gBACP,EACD,KAAM4C,GACN,aAAc,CACZ,KAAM3C,EAAG,EAAC,SAAU,EACpB,KAAM,eACP,EACD,SAAU,CACR,KAAMA,EAAG,EAAC,SAAU,EACpB,KAAM,WACP,EACD,KAAMA,EAAG,EACT,QAAS,CACP,KAAMA,EAAG,EAAC,SAAU,EACpB,KAAM,UACP,EACD,SAAU4C,GACV,WAAY,CACV,KAAM5C,EAAG,EAAC,SAAU,EACpB,KAAM,aACP,EACD,KAAM4C,EACP,EAAE,UAAU,CACf,CACK,MAACE,GAAKpD,EAAGnC,GAAMyE,GAAGhC,EAAG,EAAC,MAAMzC,CAAC,CAAC,EAAG,KAAK,EAC3C,SAASwF,GAAGxF,EAAG,CACb,OAAOA,EAAE,QAAQ,UAAYC,GAAMA,EAAE,CAAC,EAAE,YAAW,CAAE,CACvD,CACA,SAASwF,GAAGzF,EAAG,CACb,OAAOA,EAAE,QAAQ,SAAWC,GAAM,IAAIA,EAAE,aAAa,EAAE,CACzD,CACA,MAAMyF,GAAKvD,EACRnC,GAAM,CACL,MAAMC,EAAIsF,KAAK,WACf,OAAO,OAAO,QAAQjD,GAAGtC,CAAC,CAAC,EAAE,OAAO,CAACE,EAAG,CAAC,EAAGO,CAAC,KAAOP,EAAEsF,GAAG,CAAC,CAAC,EAAIvF,EAAE,MAAMQ,CAAC,EAAGP,GAAI,CAAA,CAAE,CAClF,EACD,aACF,EACA,SAASyF,EAAE3F,EAAG,CACZ,OAAOmF,EAAE,CACP,UAAW,CACT,KAAM/C,EAAG,EAAC,SAAU,EACpB,KAAM,mBACP,EACD,SAAU,CACR,KAAMkD,GAAI,EAAC,SAAU,EACrB,KAAM,cACP,EACD,YAAa,CACX,KAAM7C,EAAG,EAAC,SAAU,EACpB,KAAM,cACP,EACD,SAAU,CACR,KAAMA,EAAG,EACT,KAAM,kBACP,EACD,aAAc,CACZ,KAAML,EAAG,EAAC,SAAU,EACpB,KAAM,sBACP,EACD,WAAY,CACV,KAAMK,EAAG,EAAC,SAAU,EACpB,KAAM,oBACP,EACD,YAAa,CACX,KAAMiD,GAAI,EACV,KAAM,qBACP,EACD,QAAS,CACP,KAAMjD,EAAG,EACT,KAAM,iBACP,CACL,CAAG,EAAE,MAAMzC,CAAC,CACZ,CACA,SAAS4F,GAAG5F,EAAG,CACb,OAAO2F,EACL3F,EAAE,QAAQ,cAAe,EAAE,EAAE,QAAQ,QAAS,GAAG,CACrD,CACA,CACA,SAAS6F,IAAK,CACZ,OAAOD,GAAG,OAAO,SAAS,IAAI,CAChC,CACA,SAASE,IAAK,CACZ,OAAO,YAAY,iBAAiB,YAAY,EAAE,CAAC,CACrD,CACA,SAASC,IAAK,CACZ,MAAM/F,EAAI8F,KACV,GAAI,CAAC9F,EACH,MAAM,IAAI,MAAM,uCAAuC,EACzD,OAAO4F,GAAG5F,EAAE,IAAI,CAClB,CACA,SAASgG,GAAGhG,EAAG,CACb,MAAO,iBAAiBA,EAAE,QAAQ,SAAWC,GAAM,IAAIA,EAAE,YAAa,CAAA,EAAE,CAAC,EAC3E,CACA,SAASgG,GAAGjG,EAAGC,EAAG,CAChB,eAAe,QAAQ+F,GAAGhG,CAAC,EAAG,KAAK,UAAUC,CAAC,CAAC,CACjD,CACA,SAASiG,GAAGlG,EAAG,CACb,MAAMC,EAAI,eAAe,QAAQ+F,GAAGhG,CAAC,CAAC,EACtC,GAAI,CACF,OAAOC,EAAI,KAAK,MAAMA,CAAC,EAAI,MAC/B,MAAU,CACP,CACH,CACA,SAASkG,IAAK,CACZ,OAAOR,EAAEO,GAAG,cAAc,GAAK,EAAE,CACnC,CACA,SAASE,GAAGpG,EAAG,CACb,OAAO,KAAK,UACV,OAAO,YACL,OAAO,QAAQA,CAAC,EAAE,IAAI,CAAC,CAACC,EAAGC,CAAC,IAAM,CAACuF,GAAGxF,CAAC,EAAGC,CAAC,CAAC,CAC7C,CACL,CACA,CACA,SAASmG,GAAGrG,EAAG,CACb,KAAM,CACJ,YAAaC,EACb,YAAaC,EACb,SAAU,EACV,QAASO,EACT,aAAcC,EACd,WAAY,EACZ,UAAW,CACZ,EAAGV,EAAGgD,EAAI,IAAI,gBACf,OAAOA,EAAE,IAAI,mBAAoB,CAAC,EAAGA,EAAE,IAAI,sBAAuBoD,GAAGlG,CAAC,CAAC,EAAG8C,EAAE,IAAI,kBAAmBvC,CAAC,EAAGR,GAAK+C,EAAE,IAAI,eAAgB/C,CAAC,EAAG,GAAK+C,EAAE,IAAI,qBAAsB,CAAC,EAAG,OAAOtC,GAAK,WAAasC,EAAE,IAAI,uBAAwBtC,EAAI,IAAM,GAAG,EAAG,OAAO,GAAK,WAAasC,EAAE,IAAI,oBAAqB,EAAI,IAAM,GAAG,EAAGA,EAAE,SAAQ,CAClU,CACA,SAASsD,GAAGtG,EAAG,CACbiG,GAAG,eAAgBI,GAAGrG,CAAC,CAAC,CAC1B,CACA,SAASuG,GAAK,CACZ,MAAMvG,EAAI,CAAA,EACV,UAAWC,IAAK,CAGd4F,GAEAE,GAEAI,EACD,EACC,GAAI,CACF,MAAMjG,EAAID,IACV,OAAOqG,GAAGpG,CAAC,EAAGA,CACf,OAAQA,EAAG,CACVF,EAAE,KAAKE,aAAa,MAAQA,EAAE,QAAU,KAAK,UAAUA,CAAC,CAAC,CAC1D,CACH,MAAM,IAAI,MAAM,CACd;AAAA,EAEA,yCACA;AAAA,EAEA,oBACAF,EAAE,IAAKC,GAAM,KAAKA,CAAC,EAAE,CACtB,EAAC,KAAK;AAAA,CACR,CAAC,CACF,CACA,SAASuG,IAAK,CACZ,MAAMxG,EAAI8F,KACV,MAAO,CAAC,EAAE9F,GAAKA,EAAE,OAAS,SAC5B,CACA,SAASyG,IAAK,CACZ,IAAIzG,EAAI,EACR,MAAO,KAAOA,GAAK,GAAG,SAAQ,CAChC,CACA,KAAM,CAAC0G,EAAE,EAAIvG,GAAGsG,EAAE,EAClB,SAASE,EAAE3G,EAAGC,EAAG,CACf,MAAO,IAAM,CACX,MAAMC,EAAIqG,EAAI,EAAE,EAAI,CAClB,GAAGrG,EACH,UAAW8D,GAAG9D,EAAE,OAAO,EACvB,gBAAiBwG,GAAI,CAC3B,EACI,GAAI,OAAO1G,GAAK,WACd,OAAOA,EAAE,CAAC,EACZ,KAAM,CAACS,EAAGC,EAAG,CAAC,EAAIQ,GAAG,EAAE,EAAIjB,EAAE,CAC3B,GAAG,EAIH,MAAOuG,GAAI,EAAGN,GAAGlG,CAAC,EAAI,OACtB,WAAYS,CACb,CAAA,EAAGuC,EAAK,IAAO,GAAKvC,EACnB,EAAE,GAAG,SAAWmG,GAAO,CACrBX,GAAGjG,EAAG4G,CAAE,CAChB,CAAO,CACF,EAAE,GACH,MAAO,CACL,aAAa,QAAU,EAAE,KAAK5D,CAAC,EAAIA,EAAE,CAAC,EACtCtC,CACN,CACA,CACA,CACK,MAACmG,GAAKF,EAAE,aAAc,CAAC,CAC1B,UAAW3G,EACX,QAASC,EACT,MAAOC,EAAI,CAAE,UAAW,EAAI,CAC9B,IAAM,IAAI+E,GAAG/E,EAAE,UAAWD,EAAGD,CAAC,CAAC,EAC/B,MAAM8G,UAAU/B,EAAE,CAChB,aAAc,CACZ,MAAM,GAAG,SAAS,EAIlB,EAAE,KAAM,KAAM,KAAK,MAAM,GAAG,KAAK,KAAK,KAAK,CAAC,EAI5C,EAAE,KAAM,MAAO,KAAK,MAAM,IAAI,KAAK,KAAK,KAAK,CAAC,CAC/C,CACH,CACA,SAASgC,GAAG/G,EAAG,CACb,MAAMC,EAAID,EAAE,UAAYA,EAAI,CAC1B,UAAW,GACX,UAAW,GACX,YAAa,GACb,iBAAkB,GAClB,eAAgB,GAChB,KAAM,EACV,EACE,MAAO,CACL,UAAW,GACX,KAAMC,EAAE,KACR,SAAUA,EAAE,UACZ,WAAYA,EAAE,YACd,gBAAiBA,EAAE,iBACnB,cAAeA,EAAE,cACrB,CACA,CACA,MAAM+G,WAAWF,CAAE,CACjB,YAAY,CAAE,UAAW,EAAG,QAAS9B,EAAG,GAAGvE,GAAK,CAC9C,MAAMA,EAAGuE,EAAG,CACV,KAAM,gCACN,aAAc,iCACd,cAAe,kCACf,YAAa,+BACnB,CAAK,EACD,EAAE,KAAM,WAAW,EACnB,EAAE,KAAM,aAAa,EACrB,EAAE,KAAM,eAAe,EACvB,KAAK,UAAY,CAClB,CAID,IAAI,WAAY,CACd,OAAO,KAAK,IAAI,WAAW,CAC5B,CAID,IAAI,eAAgB,CAClB,OAAO,KAAK,IAAI,eAAe,CAChC,CAID,IAAI,iBAAkB,CACpB,OAAO,KAAK,IAAI,iBAAiB,CAClC,CAOD,MAAM,aAAa,CACjB,OAAQ,EACR,GAAGA,CACP,EAAK,CACD,OAAO,KAAK,cAAgB,KAAK,YAAcZ,EAAE,CAC/C,GAAGY,EACH,OAAQ,gCACR,MAAO,0BACP,UAAW,KAAK,UAChB,OAAQ,CAEN,QAAS,GAAK,IAAI,KAAM,CACzB,CACP,CAAK,EAAE,KAAK,CAAC,CAAE,MAAOvE,CAAC,IAAOA,CAAC,EAAE,QAAQ,IAAM,KAAK,YAAc,MAAM,GAAI,KAAK,WAC9E,CAID,IAAI,UAAW,CACb,OAAO,KAAK,IAAI,UAAU,CAC3B,CASD,cAAe,CACb,KAAK,UAAU,gCAAgC,CAChD,CAMD,cAAc,CAAE,OAAQ,EAAG,GAAGuE,CAAC,EAAK,CAAA,EAAI,CACtC,OAAO,KAAK,gBAAkB,KAAK,cAAgBZ,EAAE,CACnD,GAAGY,EACH,UAAW,KAAK,UAChB,OAAQ,kCACR,MAAO,yBACP,OAAQ,CAAE,OAAQ,GAAK,EAAI,CACjC,CAAK,EAAE,KAAMvE,GAAM,CACb,MAAM,EAAIsG,GAAGtG,CAAC,EACd,OAAO,KAAK,IAAI,CAAC,EAAG,EAAE,aAC5B,CAAK,EAAE,QAAQ,IAAM,KAAK,cAAgB,MAAM,GAAI,KAAK,aACtD,CAID,IAAI,cAAe,CACjB,OAAO,KAAK,IAAI,cAAc,CAC/B,CAID,IAAI,YAAa,CACf,OAAO,KAAK,IAAI,YAAY,CAC7B,CAKD,MAAM,YAAY,CAAE,MAAO,EAAG,GAAGuE,CAAG,EAAG,GAAI,CACzC,MAAO,CAAC,UAAW,SAAS,EAAE,UAC3B,MAAMZ,EAAE,CACP,GAAGY,EACH,UAAW,KAAK,UAChB,OAAQ,gCACR,MAAO,yBACP,OAAQ,CAAE,MAAO,GAAK,EAAI,CAC3B,CAAA,GAAG,MACV,CACG,CACH,CACA,eAAeiC,GAAGjH,EAAG,CACnB,OAAO+G,GACL,MAAM3C,EAAE,CACN,GAAGpE,GAAK,CAAE,EACV,OAAQ,4BACR,MAAO,wBACb,CAAK,CACL,CACA,CACK,MAACkH,GAAKP,EACT,kBACA,MAAO,CAAE,UAAW3G,EAAG,QAASC,EAAG,MAAOC,KAAQ,IAAI8G,GAAG,CACvD,GAAG9G,GAAKqD,EAAE,4BAA6BtD,CAAC,EAAIC,GAAK,MAAM+G,GAAG,CAAE,QAAS,GAAK,CAAA,EAAI,CAC5E,UAAW,GACX,cAAe,GACf,gBAAiB,GACjB,WAAY,GACZ,SAAU,EACX,EACD,QAAShH,EACT,UAAWD,CACf,CAAG,CACH,EACA,MAAMmH,WAAWtC,EAAE,CACjB,aAAc,CACZ,MAAM,GAAG,SAAS,EAIlB,EAAE,KAAM,KAAM,KAAK,MAAM,GAAG,KAAK,KAAK,KAAK,CAAC,EAI5C,EAAE,KAAM,MAAO,KAAK,MAAM,IAAI,KAAK,KAAK,KAAK,CAAC,CAC/C,CACH,CACA,MAAMuC,WAAWD,EAAG,CAClB,YAAYlH,EAAGC,EAAG,CAChB,MAAM,CAAE,qBAAsBD,CAAC,CAAE,EAAG,KAAK,UAAYC,CACtD,CACD,IAAI,qBAAqBD,EAAG,CAC1B,KAAK,IAAI,uBAAwBA,CAAC,EAAG,KAAK,UAAU,iCAAkC,CAAE,kBAAmBA,CAAG,CAAA,CAC/G,CAKD,IAAI,sBAAuB,CACzB,OAAO,KAAK,IAAI,sBAAsB,CACvC,CAID,qBAAsB,CACpB,KAAK,qBAAuB,EAC7B,CAID,oBAAqB,CACnB,KAAK,qBAAuB,EAC7B,CACH,CACK,MAACoH,GAAKV,EACT,kBACA,CAAC,CACC,UAAW3G,EACX,MAAOC,EAAI,CAAE,qBAAsB,EAAI,CACxC,IAAK,IAAImH,GAAGnH,EAAE,qBAAsBD,CAAC,CACxC,EACA,MAAMsH,EAAG,CACP,YAAYrH,EAAGC,EAAG,CAIhB,EAAE,KAAM,UAAU,EAClB,KAAK,SAAW4E,GAAG7E,EAAGC,CAAC,CACxB,CACH,CACA,SAASqH,GAAGvH,EAAG,CACb,GAAI,MAAM,QAAQA,CAAC,EACjB,OAAOA,EACT,GAAI,OAAOA,GAAK,SACd,GAAI,CACF,MAAMC,EAAI,KAAK,MAAMD,CAAC,EACtB,GAAI,MAAM,QAAQC,CAAC,EACjB,OAAOA,CACf,MAAY,CACP,CACH,MAAMgC,EAAC,CACT,CACA,MAAMuF,WAAWtF,CAAE,CACjB,YAAY,EAAG8C,EAAGvE,EAAG,CACnB,MAAM8G,GAAIvC,EAAGvE,CAAC,EACd,EAAE,KAAM,YAAY,EACpB,KAAK,WAAa,OAAO,GAAK,WAAa,EAAI,EAAE,MAAM,KAAK,CAAC,CAC9D,CAOD,MAAM,EAAG,CACP,MAAMuE,EAAI,MAAM,MAAM,CAAC,EACvB,OAAOA,IAAM,OAASA,EAAIA,EAAE,IAAI,KAAK,UAAU,CAChD,CACD,GAAG,EAAG,CACJ,OAAO,KAAK,WAAa,OAAO,GAAK,WAAa,EAAI,EAAE,MAAM,KAAK,CAAC,EAAG,IACxE,CACH,CACA,SAASyC,GAAGzH,EAAG,CACb,OAAO,IAAIwH,GAAIvH,GAAMA,EAAG,GAAID,CAAC,CAC/B,CACA,SAAS0H,GAAG1H,EAAGC,EAAG,CAChB,OAAO,OAAO,YAAYD,EAAE,IAAKE,GAAM,CAACA,EAAGD,CAAC,CAAC,CAAC,CAChD,CACA,MAAM0H,WAAWL,EAAG,CAClB,YAAYrH,EAAGC,EAAG,EAAG,CACnB,MAAMD,EAAG,CACP,OAAQ,+BACR,IAAK,+BACL,QAAS,+BACT,IAAK,8BACX,CAAK,EAAG,KAAK,gBAAkBC,EAAG,KAAK,UAAY,CAChD,CAMD,MAAM,OAAOD,EAAGC,EAAI,GAAI,CACtB,MAAM,EAAI,MAAM,QAAQD,CAAC,EAAIA,EAAI,CAACA,CAAC,EACnC,EAAE,QAAU,MAAMoE,EAChB,sBACA,CAAE,KAAM,CAAG,EACX,KAAK,gBAAiB,EACtB,CAAE,GAAGnE,EAAG,UAAW,KAAK,SAAW,CACzC,CACG,CAKD,MAAM,QAAQD,EAAI,GAAI,CACpB,OAAOwH,GAAE,EAAG,GAAGhF,EAAC,CAAE,EAAE,MAClB,MAAM4B,EACJ,iBACA,CAAE,EACF,KAAK,gBAAiB,EACtB,CAAE,GAAGpE,EAAG,UAAW,KAAK,SAAW,CACpC,CACP,CACG,CACD,MAAM,IAAIA,EAAGC,EAAI,GAAI,CACnB,MAAM,EAAI,MAAM,QAAQD,CAAC,EAAIA,EAAI,CAACA,CAAC,EACnC,GAAI,CAAC,EAAE,OACL,OAAOyH,GAAG,EAAG,EAAE,EACjB,MAAMjH,EAAI,MAAM4D,EACd,mBACA,CAAE,KAAM,CAAG,EACX,KAAK,gBAAiB,EACtB,CAAE,GAAGnE,EAAG,UAAW,KAAK,SAAW,CACpC,EAAEQ,EAAI6B,EAAEmF,GAAG,EAAGjF,GAAG,EAAG,kBAAkB,EAAE,MAAMhC,CAAC,EAChD,OAAO,MAAM,QAAQR,CAAC,EAAIS,EAAIA,EAAET,CAAC,CAClC,CAOD,MAAM,IAAIA,EAAGC,EAAG,EAAI,CAAA,EAAI,CACtB,MAAMmE,EACJ,mBACA,CAAE,IAAKpE,EAAG,MAAOC,CAAG,EACpB,KAAK,gBAAiB,EACtB,CAAE,GAAG,EAAG,UAAW,KAAK,SAAW,CACzC,CACG,CACH,CACK,MAAC0H,GAAKjB,EACT,CAAC,CAAE,gBAAiB3G,EAAG,UAAWC,EAAG,QAASC,CAAC,IAAO,IAAIyH,GAAGzH,EAAGF,EAAGC,CAAC,CACtE,EACA,MAAM4H,WAAWP,EAAG,CAClB,YAAYrH,EAAGC,EAAG,CAChB,MAAMD,EAAG,CACP,eAAgB,kCAChB,qBAAsB,kCACtB,iBAAkB,iCACxB,CAAK,EAAG,KAAK,UAAYC,CACtB,CAMD,eAAeD,EAAG,CAChB,KAAK,UAAU,kCAAmC,CAChD,KAAM,SACN,aAAcA,CACpB,CAAK,CACF,CAOD,qBAAqBA,EAAG,CACtB,KAAK,UAAU,kCAAmC,CAChD,KAAM,eACN,kBAAmBA,CACzB,CAAK,CACF,CAQD,kBAAmB,CACjB,KAAK,UAAU,kCAAmC,CAAE,KAAM,kBAAoB,CAAA,CAC/E,CACH,CACK,MAAC6H,GAAKnB,EACT,CAAC,CAAE,QAAS3G,EAAG,UAAWC,CAAC,IAAO,IAAI4H,GAAG7H,EAAGC,CAAC,CAC/C,EACA,MAAM8H,EAAG,CACP,YAAY9H,EAAG,CACb,KAAK,SAAWA,CACjB,CAID,IAAI,UAAW,CACb,OAAO,KAAK,SAAS,QACtB,CAID,IAAI,cAAe,CACjB,OAAO,KAAK,SAAS,YACtB,CAKD,IAAI,kBAAmB,CACrB,KAAM,CAAE,aAAcA,CAAG,EAAG,KAC5B,OAAOA,EAAI,IAAI,KAAK,KAAK,SAAS,QAAS,EAAGA,EAAI,GAAG,EAAI,MAC1D,CAID,IAAI,MAAO,CACT,OAAO,KAAK,SAAS,IACtB,CAID,IAAI,UAAW,CACb,OAAO,KAAK,SAAS,QACtB,CAID,IAAI,cAAe,CACjB,OAAO,KAAK,SAAS,YACtB,CAID,IAAI,MAAO,CACT,OAAO,KAAK,SAAS,IACtB,CAID,IAAI,SAAU,CACZ,OAAO,KAAK,SAAS,OACtB,CAID,IAAI,UAAW,CACb,OAAO,KAAK,SAAS,QACtB,CAID,IAAI,YAAa,CACf,OAAO,KAAK,SAAS,UACtB,CAID,IAAI,MAAO,CACT,OAAO,KAAK,SAAS,IACtB,CACH,CACK,MAAC+H,GAAKrB,EACT,CAAC,CAAE,SAAU3G,KAAQA,EAAI,IAAI+H,GAAG/H,CAAC,EAAI,MACvC,EACA,SAASiI,GAAGjI,EAAG,CACb,OAAOsF,GAAI,EAAC,MAAMtF,CAAC,CACrB,CACA,MAAMkI,WAAWpB,CAAE,CACjB,YAAY7G,EAAGC,EAAG,EAAG,CACnB,MAAM,CAAE,SAAUD,CAAC,EAAIC,EAAG,CAAE,KAAM,uBAAwB,EAAG,KAAK,UAAY,CAC/E,CACD,IAAI,SAASD,EAAG,CACd,KAAK,IAAI,WAAYA,CAAC,CACvB,CAID,IAAI,UAAW,CACb,OAAO,KAAK,IAAI,UAAU,CAC3B,CACD,MAAM,KAAKA,EAAGC,EAAG,CACf,GAAI,KAAK,SACP,MAAM,IAAI,MAAM,2BAA2B,EAC7C,IAAI,EACJ,GAAI,CAACA,EACH,EAAID,MACD,CACH,KAAM,CAAE,SAAUQ,EAAG,SAAUC,CAAG,EAAG,IAAI,IAAIT,EAAG,OAAO,SAAS,IAAI,EACpE,GAAIQ,IAAM,OACR,MAAM,IAAI,MAAM,uBAAuBA,CAAC,EAAE,EAC5C,MAAM,EAAIC,EAAE,MAAM,sCAAsC,EACxD,GAAI,CAAC,EACH,MAAM,IAAI,MAAM,yFAAyF,EAC3G,CAAK,CAAA,CAAA,CAAC,EAAI,CACX,CACD,KAAK,SAAW,GAChB,GAAI,CACF,OAAQ,MAAM0D,EAAE,CACd,OAAQ,uBACR,MAAO,iBACP,OAAQ,CAAE,KAAM,CAAG,EACnB,UAAW,KAAK,UAChB,QAAQ,EAAG,CACT,OAAO,IAAM,EAAE,IAChB,CACF,CAAA,GAAG,MACV,QAAc,CACR,KAAK,SAAW,EACjB,CACF,CACH,CACK,MAAC+D,GAAKxB,EACT,CAAC,CAAE,QAAS3G,EAAG,UAAWC,CAAC,IAAO,IAAIiI,GAAG,GAAIlI,EAAGC,CAAC,CACnD,EACA,MAAMmI,WAAWvD,EAAE,CACjB,YAAY,CAAE,UAAW,EAAG,GAAGG,CAAC,EAAI,CAClC,MAAMA,CAAC,EACP,EAAE,KAAM,WAAW,EAMnB,EAAE,KAAM,KAAM,CAAC9E,EAAG8E,IAAM9E,IAAM,QAAUiD,EAAE,sBAAuB6B,CAAC,EAAI,KAAK,MAAM,GAAG9E,EAAG8E,CAAC,CAAC,EAMzF,EAAE,KAAM,MAAO,CAAC9E,EAAG8E,IAAM9E,IAAM,QAAUgD,EAAE,sBAAuB8B,CAAC,EAAI,KAAK,MAAM,IAAI9E,EAAG8E,CAAC,CAAC,EAC3F,KAAK,UAAY,CAClB,CAID,IAAI,SAAU,CACZ,OAAO,KAAK,IAAI,SAAS,CAC1B,CAID,QAAS,CACP,KAAK,OAAS,IAAM,KAAK,UAAU,4BAA6B,CAC9D,WAAY,KAAK,UACjB,UAAW,KAAK,UAChB,oBAAqB,KAAK,gBAC1B,KAAM,KAAK,KACX,MAAO,KAAK,QACZ,WAAY,KAAK,SACvB,CAAK,CACF,CAKD,SAAU,CACR,OAAO,KAAK,UAAY,GAAI,IAC7B,CAID,QAAS,CACP,OAAO,KAAK,UAAY,GAAI,IAC7B,CAID,MAAO,CACL,OAAO,KAAK,UAAY,GAAI,IAC7B,CAID,YAAa,CACX,OAAO,KAAK,gBAAkB,GAAI,IACnC,CACD,IAAI,UAAU,EAAG,CACf,KAAK,UAAU,CAAE,UAAW,CAAG,CAAA,CAChC,CAID,IAAI,WAAY,CACd,OAAO,KAAK,IAAI,WAAW,CAC5B,CACD,IAAI,gBAAgB,EAAG,CACrB,KAAK,UAAU,CAAE,gBAAiB,CAAG,CAAA,CACtC,CAID,IAAI,iBAAkB,CACpB,OAAO,KAAK,IAAI,iBAAiB,CAClC,CACD,IAAI,UAAU,EAAG,CACf,KAAK,UAAU,CAAE,UAAW,CAAG,CAAA,CAChC,CAID,IAAI,WAAY,CACd,OAAO,KAAK,IAAI,WAAW,CAC5B,CAOD,MAAO,CACL,OAAO,KAAK,UAAY,GAAI,IAC7B,CAID,YAAa,CACX,OAAO,KAAK,gBAAkB,GAAI,IACnC,CAKD,QAAQ,EAAG,CACT,OAAO,KAAK,UAAU,CAAE,KAAM,CAAG,CAAA,CAClC,CAKD,aAAa,EAAG,CACd,OAAO,KAAK,UAAU,CAAE,UAAW,CAAG,CAAA,CACvC,CAKD,WAAW,EAAG,CACZ,OAAO,KAAK,UAAU,CAAE,QAAS,CAAG,CAAA,CACrC,CAKD,UAAU,EAAG,CACX,OAAO,KAAK,IAAI,CAAC,EAAG,KAAK,OAAQ,EAAE,IACpC,CAID,IAAI,MAAO,CACT,OAAO,KAAK,IAAI,MAAM,CACvB,CAID,IAAI,WAAY,CACd,OAAO,KAAK,IAAI,WAAW,CAC5B,CACH,CACK,MAACqD,GAAK1B,EACT,aACA,CAAC,CACC,UAAW3G,EACX,YAAaC,EACb,MAAOC,EAAI,CACT,UAAW,GACX,UAAW,GACX,KAAM,GACN,gBAAiB,GACjB,UAAWD,EAAE,iBAAmB,UAChC,QAASA,EAAE,aAAe,SAC3B,CACL,IAAQ,IAAImI,GAAG,CAAE,GAAGlI,EAAG,UAAWF,CAAC,CAAE,CACrC,EACA,SAASsI,IAAK,CACZ,OAAOnD,EAAE,CACP,QAAS5C,EAAE,CACT,OAAQ,CACN,KAAMC,EAAG,EACT,KAAM,SACP,EACD,YAAa,CACX,KAAMC,EAAG,EACT,KAAM,cACP,EACD,UAAW,CACT,KAAMA,EAAG,EACT,KAAM,YACP,EACD,SAAU,CACR,KAAMA,EAAG,EAAC,SAAU,EACpB,KAAM,WACP,CACP,CAAK,EACD,SAAU,CACR,KAAMyC,GAAI,EACV,KAAM,WACP,EACD,KAAMzC,EAAG,CACV,EAAE,kBAAkB,CACvB,CACA,SAAS8F,GAAGvI,EAAGC,EAAG,CAChB,OAAQC,GAAM,CACZ,KAAM,CAAC,EAAGO,CAAC,EAAIR,EAAEC,CAAC,EAClB,OAAOqD,EAAE,EAAG9C,EAAGT,CAAC,CACpB,CACA,CACA,SAASwI,GAAGxI,EAAG,CACb,OAAO,IAAI,QAASC,GAAM,CACxB,WAAWA,EAAGD,CAAC,CACnB,CAAG,CACH,CACA,MAAMyI,WAAW3B,CAAE,CACjB,YAAY,CAAE,UAAW,EAAG,gBAAiB9B,EAAG,QAASvE,EAAG,UAAW,EAAG,GAAGmE,CAAC,EAAI,CAChF,MAAMA,EAAGnE,EAAG,CACV,mBAAoB,wBACpB,mBAAoB,+BACpB,kBAAmB,8BACnB,eAAgB,2BAChB,mBAAoB,8BAC1B,CAAK,EACD,EAAE,KAAM,WAAW,EACnB,EAAE,KAAM,WAAW,EACnB,EAAE,KAAM,iBAAiB,EACzB,EAAE,KAAM,2BAA2B,EACnC,EAAE,KAAM,2BAA2B,EAInC,EAAE,KAAM,eAAe,EACvB,KAAK,gBAAkBuE,EAAG,KAAK,UAAY,EAAG,KAAK,UAAY,EAC/D,MAAM0D,EAAI,KAAK,SAAS,KAAK,IAAI,EACjC,KAAK,SAAY1F,GAAM0F,EAAE1F,CAAC,EAAIA,IAAM,qBAAuB,EAAI,GAAI,KAAK,cAAgBuF,GAAG9H,EAAG,CAC5F,uBAAwB,CAAC,2BAA4B,OAAO,EAC5D,mBAAoB,CAAC,gBAAiB,aAAa,CACzD,CAAK,CACF,CAKD,MAAM,oBAAoB,CACxB,QAAS,EAAI,GACd,EAAG,GAAI,CACN,OAAO6H,GAAI,EAAC,MACV,MAAMjE,EACJ,sBACA,CAAE,EACF,KAAK,gBAAiB,EACtB,CAAE,UAAW,KAAK,UAAW,QAAS,CAAG,CAC1C,CACP,CACG,CAKD,IAAI,SAAU,CACZ,OAAO,KAAK,IAAI,SAAS,CAC1B,CAKD,MAAM,EAAG,CACP,KAAK,UAAU,gBAAiB,KAAK,cAAc,kBAAkB,EAAI,CAAE,YAAa,CAAG,EAAG,CAAE,CAAA,CACjG,CAMD,IAAI,aAAc,CAChB,OAAO,KAAK,IAAI,aAAa,CAC9B,CAID,IAAI,aAAc,CAChB,OAAO,KAAK,SACb,CAID,IAAI,QAAS,CACX,OAAOK,GAAG,KAAK,OAAO,CACvB,CAUD,OAAQ,CACN,KAAK,UAAU,eAAe,CAC/B,CAOD,MAAM,eAAe,CAAE,QAAS,EAAI,GAAG,EAAK,CAAA,EAAI,CAC9C,GAAI,CACF,OAAO,MAAM,KAAK,qBACxB,MAAY,CACP,CACD,GAAI,MAAM,KAAK,mBAAkB,IAAO,OACtC,MAAM,IAAI,MAAM,gBAAgB,EAClC,MAAMjE,EAAI,KAAK,IAAG,EAAK,EACvB,IAAIC,EAAI,GACR,OAAOyD,GAAG,SAAY,CACpB,KAAO,KAAK,IAAK,EAAG1D,GAAK,CACvB,GAAI,CACF,OAAO,MAAM,KAAK,qBAC5B,MAAgB,CACP,CACD,MAAM+H,GAAG9H,CAAC,EAAGA,GAAK,EACnB,CACD,MAAMwD,GAAG,CAAC,CACX,EAAE,CAAC,CACL,CAUD,MAAM,mBAAmB,EAAI,GAAI,CAC/B,OAAO,KAAK,4BAA8B,KAAK,0BAA4BE,EAAE,CAC3E,GAAG,EACH,OAAQ,wBACR,MAAO,kBACP,UAAW,KAAK,SACtB,CAAK,EAAE,KAAK,CAAC,CAAE,OAAQY,CAAC,IAAOA,CAAC,EAAE,QAAQ,IAAM,KAAK,0BAA4B,MAAM,GAAI,KAAK,yBAC7F,CAKD,MAAM,mBAAmB,EAAI,GAAI,CAC/B,OAAO,KAAK,4BAA8B,KAAK,0BAA4BZ,EAAE,CAC3E,GAAG,EACH,OAAQ,+BACR,MAAO,yBACP,UAAW,KAAK,SACtB,CAAK,EAAE,KAAK,CAAC,CAAE,OAAQY,CAAC,IAAOA,CAAC,EAAE,QAAQ,IAAM,KAAK,0BAA4B,MAAM,GAAI,KAAK,yBAC7F,CAUD,SAAS,EAAG,CACV,KAAM,CAAE,KAAMA,CAAG,EAAG,IAAI,KAAK,CAAC,CAAC,CAAC,EAChC,GAAI,CAACA,GAAKA,EAAI,KACZ,MAAM,IAAI,MAAM,mCAAmCA,CAAC,EAAE,EACxD,KAAK,UAAU,oBAAqB,CAAE,KAAM,CAAG,CAAA,CAChD,CAQD,eAAe,EAAG,CAChB,KAAK,UAAU,2BAA4B,EAAE,CAAC,EAAI,CAAE,MAAO,CAAC,EAAK,CAAE,UAAW,CAAC,CAAE,EAAG,KAAK,IAAI,cAAe,CAAC,CAC9G,CAQD,WAAW,EAAG,CACZ,KAAK,UAAU,+BAAgC,CAAE,MAAO,EAAG,EAAG,KAAK,IAAI,UAAW,CAAC,CACpF,CAWD,kBAAkB,EAAGA,EAAI,GAAI,CAC3B,GAAI,CAAC,KAAK,SAAS,mBAAmB,GAAK,CAAC,KAAK,YAC/C,MAAM,IAAI,MAAM,2EAA2E,EAC7F,KAAK,UAAU,8BAA+B,CAAE,MAAO,EAAG,WAAYA,CAAC,CAAE,CAC1E,CACH,CACK,MAAC2D,GAAKhC,EACT,UACA,CAAC,CACC,YAAa3G,EACb,UAAWC,EAAI,GACf,MAAOC,EAAI,CACT,QAASF,EAAE,SAAW,UACtB,YAAaA,EAAE,eAAiB,SACjC,EACD,GAAG,CACP,IAAQ,IAAIyI,GAAG,CAAE,GAAG,EAAG,GAAGvI,EAAG,UAAWD,EAAG,CAC3C,EACA,SAAS2I,GAAG5I,EAAG,CACb,MAAMC,EAAID,EAAE,QAAQ,KAAM,EAAEE,GAAKF,EAAE,OAAS,IAAI,KAAM,EAAE,EAAIA,EAAE,SAAW,GACzE,IAAIS,EACJ,GAAIP,EAAE,OAAS,GACb,MAAM,IAAI,MAAM,6BAA6BA,EAAE,MAAM,EAAE,EACzD,GAAI,CAACD,EAAE,QAAUA,EAAE,OAAS,IAC1B,MAAM,IAAI,MAAM,+BAA+BA,EAAE,MAAM,EAAE,EAC3D,GAAI,EAAE,OAAS,EACb,MAAM,IAAI,MAAM,gCAAgC,EAAE,MAAM,EAAE,EAC5D,OAAO,EAAE,OAASQ,EAAI,EAAE,IAAKC,GAAM,CACjC,KAAM,CAAE,GAAI,EAAI,EAAE,EAAKA,EACvB,GAAI,EAAE,OAAS,GACb,MAAM,IAAI,MAAM,iCAAiC,CAAC,EAAE,EACtD,GAAI,CAACA,EAAE,MAAQA,EAAE,OAAS,WAAaA,EAAE,OAAS,cAAe,CAC/D,MAAM,EAAIA,EAAE,KAAK,KAAI,EACrB,GAAI,CAAC,EAAE,QAAU,EAAE,OAAS,GAAI,CAC9B,MAAMsC,EAAItC,EAAE,MAAQ,UACpB,MAAM,IAAI,MAAM,0BAA0BsC,CAAC,yBAAyBtC,EAAE,KAAK,MAAM,EAAE,CACpF,CACD,MAAO,CAAE,GAAGA,EAAG,KAAM,EAAG,GAAI,EAC7B,CACD,MAAO,CAAE,GAAGA,EAAG,GAAI,CAAC,CACxB,CAAG,EAAID,EAAI,CAAC,CAAE,KAAM,QAAS,GAAI,EAAE,CAAE,EAAG,CAAE,MAAOP,EAAG,QAASD,EAAG,QAASQ,EACzE,CACA,MAAMoI,WAAW/B,CAAE,CACjB,YAAY7G,EAAGC,EAAG,EAAG,CACnB,MAAM,CAAE,SAAUD,CAAC,EAAIC,EAAG,CAAE,KAAM,qBAAsB,EAAG,KAAK,UAAY,CAC7E,CACD,IAAI,SAASD,EAAG,CACd,KAAK,IAAI,WAAYA,CAAC,CACvB,CAID,IAAI,UAAW,CACb,OAAO,KAAK,IAAI,UAAU,CAC3B,CAYD,MAAM,KAAKA,EAAG,CACZ,GAAI,KAAK,SACP,MAAM,IAAI,MAAM,0BAA0B,EAC5C,KAAK,SAAW,GAChB,GAAI,CACF,KAAM,CAAE,UAAWC,EAAI,IAAM,EAAG,MAAMkE,EAAE,CACtC,MAAO,eACP,OAAQ,qBACR,UAAW,KAAK,UAChB,OAAQwE,GAAG3I,CAAC,CACpB,CAAO,EACD,OAAOC,CACb,QAAc,CACR,KAAK,SAAW,EACjB,CACF,CACH,CACK,MAAC4I,GAAKnC,EACT,CAAC,CAAE,UAAW3G,EAAG,QAASC,CAAC,IAAO,IAAI4I,GAAG,GAAI5I,EAAGD,CAAC,CACnD,EACA,MAAM+I,WAAWjC,CAAE,CACjB,YAAY7G,EAAGC,EAAG,EAAG,CACnB,MAAM,CAAE,SAAUD,CAAC,EAAIC,EAAG,CACxB,MAAO,8BACP,KAAM,4BACZ,CAAK,EAAG,KAAK,UAAY,CACtB,CAID,OAAQ,CACN,KAAK,UAAU,6BAA6B,EAAG,KAAK,SAAW,EAChE,CACD,IAAI,SAASD,EAAG,CACd,KAAK,IAAI,WAAYA,CAAC,CACvB,CAID,IAAI,UAAW,CACb,OAAO,KAAK,IAAI,UAAU,CAC3B,CACD,MAAM,KAAKA,EAAG,CACZ,GAAI,KAAK,SACP,MAAM,IAAI,MAAM,+BAA+B,EACjD,KAAM,CAAE,KAAMC,EAAG,QAAS,CAAG,GAAI,OAAOD,GAAK,SAAW,CAAE,KAAMA,CAAC,EAAKA,IAAM,CAAA,EAC5E,KAAK,SAAW,GAChB,GAAI,CACF,MAAM,GAAK,MAAMmE,EAAE,CACjB,OAAQ,6BACR,MAAO,CAAC,mBAAoB,sBAAsB,EAClD,UAAW,KAAK,UAChB,OAAQ,CAAE,KAAMlE,CAAG,EACnB,QAAQ0E,EAAG,CACT,OAAOA,EAAE,QAAU,wBAA0B,CAAC,GAAK,EAAEA,EAAE,OAAO,CAC/D,CACT,CAAO,GAAK,CAAA,GAAI,MAAQ,KAClB,OAAO,GAAK,KAAK,MAAK,EAAI,CAChC,QAAc,CACR,KAAK,SAAW,EACjB,CACF,CAEH,CACK,MAACoE,GAAKrC,EACT,CAAC,CAAE,QAAS3G,EAAG,UAAWC,CAAC,IAAO,IAAI8I,GAAG,GAAI/I,EAAGC,CAAC,CACnD,EACA,MAAMgJ,WAAWlE,EAAE,CACjB,YAAY,EAAGC,EAAGvE,EAAG,CACnB,MAAM,CAAE,UAAW,CAAC,EAAIuE,EAAG,CACzB,KAAM,gCACN,KAAM,+BACZ,CAAK,EAMD,EAAE,KAAM,KAAM,CAAC9E,EAAG8E,IAAM9E,IAAM,QAAUiD,EAAE,0BAA2B6B,CAAC,EAAI,KAAK,MAAM,GAAG9E,EAAG8E,CAAC,CAAC,EAM7F,EAAE,KAAM,MAAO,CAAC9E,EAAG8E,IAAM9E,IAAM,QAAUgD,EAAE,0BAA2B8B,CAAC,EAAI,KAAK,MAAM,IAAI9E,EAAG8E,CAAC,CAAC,EAC/F,KAAK,UAAYvE,CAClB,CACD,IAAI,UAAU,EAAG,CACf,KAAK,IAAI,YAAa,CAAC,EAAG,KAAK,UAAU,gCAAiC,CAAE,WAAY,CAAG,CAAA,CAC5F,CAID,IAAI,WAAY,CACd,OAAO,KAAK,IAAI,WAAW,CAC5B,CAID,MAAO,CACL,KAAK,UAAY,EAClB,CAID,MAAO,CACL,KAAK,UAAY,EAClB,CACH,CACK,MAACyI,GAAKvC,EACT,iBACA,CAAC,CACC,QAAS3G,EACT,UAAWC,EACX,MAAOC,EAAI,CAAE,UAAW,EAAI,CAC7B,IAAK,IAAI+I,GAAG/I,EAAE,UAAWF,EAAGC,CAAC,CAChC,EACA,MAAMkJ,WAAWrC,CAAE,CACjB,YAAY7G,EAAGC,EAAG,EAAG,CACnB,MAAM,CAAE,uBAAwBD,CAAC,EAAIC,EAAG,CACtC,qBAAsB,+BACtB,oBAAqB,8BAC3B,CAAK,EAAG,KAAK,UAAY,CACtB,CACD,IAAI,uBAAuBD,EAAG,CAC5B,KAAK,IAAI,yBAA0BA,CAAC,EAAG,KAAK,UAAU,+BAAgC,CAAE,qBAAsBA,CAAG,CAAA,CAClH,CAID,IAAI,wBAAyB,CAC3B,OAAO,KAAK,IAAI,wBAAwB,CACzC,CAID,sBAAuB,CACrB,KAAK,uBAAyB,EAC/B,CAID,qBAAsB,CACpB,KAAK,uBAAyB,EAC/B,CACH,CACK,MAACmJ,GAAKzC,EACT,gBACA,CAAC,CACC,UAAW3G,EACX,MAAOC,EAAI,CAAE,uBAAwB,EAAI,EACzC,QAASC,CACV,IAAK,IAAIiJ,GAAGlJ,EAAE,uBAAwBC,EAAGF,CAAC,CAC7C,EACA,SAASqJ,GAAGrJ,EAAG,CACb,OAAO0F,GAAI,EAAC,MAAM1F,CAAC,CACrB,CACA,MAAMsJ,WAAWnC,EAAG,CAIlB,IAAI,iBAAkB,CACpB,OAAO,KAAK,IAAI,iBAAiB,CAClC,CACD,IAAI,SAAU,CACZ,OAAO,KAAK,IAAI,SAAS,CAC1B,CACD,IAAI,aAAc,CAChB,OAAO,KAAK,IAAI,aAAa,CAC9B,CACD,IAAI,iBAAkB,CACpB,OAAO,KAAK,IAAI,iBAAiB,CAClC,CACD,IAAI,sBAAuB,CACzB,OAAO,KAAK,IAAI,sBAAsB,CACvC,CAID,UAAW,CACT,OAAO,KAAK,OACb,CAID,IAAI,eAAgB,CAClB,OAAO,KAAK,IAAI,eAAe,CAChC,CACD,IAAI,WAAY,CACd,OAAO,KAAK,IAAI,WAAW,CAC5B,CAKD,IAAI,QAAS,CACX,MAAO,CAAC,KAAK,SAAWzC,GAAG,KAAK,OAAO,CACxC,CACD,IAAI,WAAY,CACd,OAAO,KAAK,IAAI,WAAW,CAC5B,CACD,IAAI,kBAAmB,CACrB,OAAO,KAAK,IAAI,kBAAkB,CACnC,CAID,IAAI,gBAAiB,CACnB,OAAO,KAAK,IAAI,gBAAgB,CACjC,CAID,IAAI,wBAAyB,CAC3B,OAAO,KAAK,IAAI,wBAAwB,CACzC,CAID,IAAI,uBAAwB,CAC1B,OAAO,KAAK,IAAI,wBAAwB,CACzC,CAKD,QAAS,CACP,OAAOvB,EAAE,gBAAkBlD,GAAM,CAC/B,KAAK,IAAIoJ,GAAGpJ,EAAE,YAAY,CAAC,CACjC,CAAK,CACF,CAID,IAAI,mBAAoB,CACtB,OAAO,KAAK,IAAI,mBAAmB,CACpC,CACD,IAAI,WAAY,CACd,OAAO,KAAK,IAAI,WAAW,CAC5B,CACH,CACK,MAACsJ,GAAK5C,EACT,cACA,CAAC,CAAE,YAAa3G,EAAG,MAAOC,EAAID,EAAG,WAAYE,KAAQ,CACnD,MAAM,EAAI,IAAIoJ,GAAGrJ,CAAC,EAClB,OAAOC,EAAE,EAAE,OAAQ,CAAA,EAAG,CACvB,CACH,EACA,SAASsJ,GAAGxJ,EAAI,GAAI,CAClB,OAAOoE,EAAE,CACP,GAAGpE,EACH,OAAQ,wBACR,MAAO,eACX,CAAG,EAAE,KAAKqJ,EAAE,CACZ,CACA,SAASI,EAAEzJ,EAAGC,EAAG,CACf,OAAOD,EAAE,WAAWC,CAAC,EAAID,EAAI,GAAGC,CAAC,GAAGD,CAAC,EACvC,CACA,SAAS0J,EAAE1J,EAAG,CACZ,OAAO,IAAI,IACT,OAAOA,GAAK,SAAWA,EAAI,GAAGA,EAAE,UAAY,EAAE,GAAGyJ,EAAEzJ,EAAE,QAAU,GAAI,GAAG,CAAC,GAAGyJ,EAAEzJ,EAAE,MAAQ,GAAI,GAAG,CAAC,GAC9F,UACJ,CACA,CACA,MAAM2J,WAAWrC,EAAG,CAClB,YAAY,EAAGtC,EAAGvE,EAAG,CACnB,MAAM,EAAG,CAAE,sBAAuB,kCAAoC,CAAA,EAItE,EAAE,KAAM,eAAe,EACvB,KAAK,QAAU,EAAG,KAAK,gBAAkBuE,EAAG,KAAK,UAAYvE,EAAG,KAAK,cAAgB8H,GAAG,EAAG,CACzF,0BAA2B,CAAC,oBAAqB,kBAAkB,CACzE,CAAK,CACF,CACD,SAAS,EAAGvD,EAAG,CACb,MAAMvE,EAAIiJ,EAAE,CAAC,EAAE,SAAQ,EACvB,GAAI,CAACnG,EAAE,oBAAqB,KAAK,OAAO,EAAG,CACzC,OAAO,KAAK9C,EAAG,QAAQ,EACvB,MACD,CACD,MAAM,EAAI,OAAOuE,GAAK,UAAY,CAAE,eAAgBA,CAAC,EAAKA,GAAK,GAC/D,KAAK,UAAU,oBAAqB,CAClC,IAAKvE,EACL,YAAa,EAAE,WACf,iBAAkB,EAAE,cAC1B,CAAK,CACF,CAOD,iBAAiB,EAAG,CAClB,KAAM,CAAE,SAAUuE,EAAG,SAAUvE,EAAG,OAAQ,CAAC,EAAK,IAAI,IAAI,EAAG,cAAc,EACzE,GAAIuE,IAAM,OACR,MAAM,IAAI,MAAM,iCAAiCA,CAAC,0BAA0B,EAC9E,GAAI,CAACzB,EAAE,uBAAwB,KAAK,OAAO,EAAG,CAC5C,OAAO,SAAS,KAAO,EACvB,MACD,CACD,KAAK,UAAU,uBAAwB,CAAE,UAAW9C,EAAI,CAAC,CAAE,CAC5D,CAOD,MAAM,uBAAwB,CAC5B,MAAM,EAAI,KAAK,kBAAmB,CAChC,KAAMuE,EAAI,IACX,EAAG,MAAMZ,EAAE,CACV,OAAQ,mCACR,MAAO,0BACP,UAAW,KAAK,UAChB,OAAQ,CAAE,OAAQ,CAAG,EACrB,QAASH,GAAG,CAAC,CACnB,CAAK,EACD,OAAOe,CACR,CAWD,SAAS,EAAGA,EAAG,CACb,KAAK,iBACH,0BAA4B,IAAI,gBAAgB,CAAE,IAAK,EAAG,KAAMA,GAAK,EAAE,CAAE,EAAE,SAAQ,EAAG,QAAQ,MAAO,KAAK,CAChH,CACG,CACH,CACK,MAAC4E,GAAKjD,EACT,CAAC,CAAE,QAAS3G,EAAG,UAAWC,EAAG,gBAAiBC,CAAC,IAAO,IAAIyJ,GAAG3J,EAAGE,EAAGD,CAAC,CACtE,EACA,eAAe4J,GAAG7J,EAAI,GAAI,CACxB,KAAM,CACJ,YAAaC,EACb,gBAAiBC,EACjB,GAAG,CACJ,EAAG,MAAMkE,EAAE,CACV,GAAGpE,EACH,OAAQ,2BACR,MAAO,kBACX,CAAG,EACD,MAAO,CAAE,GAAG,EAAG,WAAYC,EAAG,cAAeC,EAC/C,CACA,SAAS4J,EAAE9J,EAAG,CACZ,OAAOA,EAAI,EAAI,EAAIA,CACrB,CACA,MAAM+J,WAAW5C,EAAG,CAClB,YAAY,CAAE,UAAW,EAAG,aAAcnC,EAAG,OAAQvE,EAAG,MAAO,EAAG,WAAYmE,CAAC,EAAI,CACjF,MAAM,CACJ,OAAQkF,EAAErJ,CAAC,EACX,WAAYmE,EACZ,aAAckF,EAAE9E,CAAC,EACjB,MAAO8E,EAAE,CAAC,CAChB,CAAK,EACD,EAAE,KAAM,WAAW,EACnB,KAAK,UAAY,CAClB,CAMD,MAAM,KAAK,EAAG,CACZ,KAAM,CAAE,cAAe9E,EAAG,GAAGvE,CAAC,EAAK,MAAMoJ,GAAG,CAAC,EAC7C,KAAK,IAAI,CACP,GAAGpJ,EACH,aAAcuE,EAAIvE,EAAE,OAAS,KAAK,IAAI,cAAc,CAC1D,CAAK,CACF,CAiBD,IAAI,QAAS,CACX,OAAO,KAAK,IAAI,QAAQ,CACzB,CAeD,IAAI,cAAe,CACjB,OAAO,KAAK,IAAI,cAAc,CAC/B,CAKD,QAAS,CACP,OAAO0C,EAAE,mBAAqB,GAAM,CAClC,KAAM,CACJ,OAAQ6B,EACR,MAAOvE,EACP,YAAa,EACb,gBAAiBmE,CAClB,EAAG,EAAG8D,EAAIoB,EAAE9E,CAAC,EACd,KAAK,IAAI,CACP,OAAQ0D,EACR,WAAY,EACZ,MAAOoB,EAAErJ,CAAC,EACV,GAAGmE,EAAI,CAAE,aAAc8D,CAAG,EAAG,CAAE,CACvC,CAAO,CACP,CAAK,CACF,CAOD,IAAI,YAAa,CACf,OAAO,KAAK,IAAI,YAAY,CAC7B,CAID,IAAI,OAAQ,CACV,OAAO,KAAK,IAAI,OAAO,CACxB,CAMD,QAAS,CACP,KAAK,UAAU,gBAAgB,EAAG,KAAK,IAAI,aAAc,EAAE,CAC5D,CAID,IAAI,UAAW,CACb,OAAO,KAAK,eAAiB,KAAK,MACnC,CACH,CACK,MAACsB,GAAKrD,EACT,WACA,MAAO,CAAE,MAAO3G,EAAG,SAAUC,EAAG,UAAWC,EAAG,WAAY,KAAQ,CAChE,IAAIO,EAAI,GAAIC,EAAI,EAAG,EAAI,EAAG,EAAI,EAC9B,GAAIV,EACFS,EAAIT,EAAE,WAAYU,EAAIV,EAAE,OAAQ,EAAIA,EAAE,MAAO,EAAIA,EAAE,qBAC5C,CAAC,QAAS,WAAY,UAAW,OAAQ,OAAQ,KAAK,EAAE,SAASC,CAAC,EACzEQ,EAAI,GAAIC,EAAI,OAAO,YAAa,EAAI,OAAO,WAAY,EAAI,OAAO,gBAC/D,CACH,MAAM,EAAI,MAAMmJ,GAAG,CAAE,QAAS,IAAK,UAAW3J,CAAC,CAAE,EACjDO,EAAI,EAAE,WAAYC,EAAI,EAAE,OAAQ,EAAI,EAAE,MAAO,EAAI,EAAE,cAAgBA,EAAI,CACxE,CACD,MAAMsC,EAAI,IAAI+G,GAAG,CACf,UAAW7J,EACX,OAAQQ,EACR,MAAO,EACP,aAAc,EACd,WAAYD,CAClB,CAAK,EACD,OAAO,EAAEuC,EAAE,OAAQ,CAAA,EAAGA,CACvB,CACH,EACA,SAASiH,EAAEjK,EAAGC,EAAG,CACf,SAAS,gBAAgB,MAAM,YAAYD,EAAGC,CAAC,CACjD,CACA,SAASiK,GAAGlK,EAAGC,EAAGC,EAAG,CACnBA,IAAMA,EAAK,GAAM,QAAQ,CAAC,UAC1B,MAAM,EAAIA,EAAE,QAAQ,EAAGO,EAAIP,EAAE,IAAI,EAAGQ,EAAI,IAAM,CAC5C,KAAM,CAAE,YAAa,CAAG,EAAGV,EAC3B,GAAI,EAAE,CAAC,EACLiK,EAAE,EAAG,CAAC,MACH,CACH,KAAM,CAAE,QAASjH,EAAG,iBAAkB,CAAC,EAAK/C,EAC5C,IAAM,YAAc+C,EAAIiH,EAAE,EAAGjH,CAAC,EAAI,IAAM,sBAAwB,GAAKiH,EAAE,EAAG,CAAC,CAC5E,CACDA,EAAExJ,EAAGT,EAAE,OAAO,CACf,EAAE,EAAI,CACLC,EAAE,GAAG,SAAUS,CAAC,EAChBV,EAAE,GAAG,SAAUU,CAAC,CACpB,EACE,OAAOA,EAAG,EAAE,IAAM,EAAE,QAAS,GAAM,EAAC,CAAE,CACxC,CACA,SAASyJ,GAAGnK,EAAGC,EAAG,CAChBA,IAAMA,EAAK,GAAM,cAAc,EAAE,QAAQ,SAAWQ,GAAM,IAAIA,EAAE,YAAa,CAAA,EAAE,CAAC,IAChF,MAAMP,EAAI,IAAM,CACd,OAAO,QAAQF,EAAE,SAAU,CAAA,EAAE,QAAQ,CAAC,CAAC,EAAGS,CAAC,IAAM,CAC/CA,GAAKwJ,EAAEhK,EAAE,CAAC,EAAGQ,CAAC,CACpB,CAAK,CACL,EACE,OAAOP,EAAG,EAAEF,EAAE,GAAG,SAAUE,CAAC,CAC9B,CACA,SAASkK,GAAGpK,EAAGC,EAAG,CAChBA,IAAMA,EAAK,GAAM,iBAAiB,CAAC,IACnC,KAAM,CACJC,EACA,EACAO,CACJ,EAAM,CAAC,SAAU,QAAS,eAAe,EAAE,IAAK,GAAMR,EAAE,CAAC,CAAC,EAAGS,EAAI,IAAMuJ,EAAE/J,EAAG,GAAGF,EAAE,MAAM,IAAI,EAAG,EAAI,IAAMiK,EAAE,EAAG,GAAGjK,EAAE,KAAK,IAAI,EAAG,EAAI,IAAMiK,EAAExJ,EAAG,GAAGT,EAAE,YAAY,IAAI,EAAGgD,EAAI,CACrKhD,EAAE,GAAG,gBAAiBU,CAAC,EACvBV,EAAE,GAAG,eAAgB,CAAC,EACtBA,EAAE,GAAG,sBAAuB,CAAC,CACjC,EACE,OAAOU,EAAG,EAAE,EAAG,EAAE,EAAG,EAAE,IAAMsC,EAAE,QAAS,GAAM,EAAG,CAAA,CAClD,CACA,SAASqH,GAAGrK,EAAI,GAAI,CAClB,MAAMC,EAAI,CACRkD,EAAE,gBAAiB,IAAM,CACvBY,EAAE,oBAAoB,EAAG,OAAO,SAAS,OAAM,CACrD,CAAK,CACL,EAAK7D,EAAI,IAAMD,EAAE,QAAS,GAAM,EAAC,CAAE,EACjC,GAAID,EAAG,CACL,MAAM,EAAI,SAAS,cAAc,OAAO,EACxC,EAAE,GAAK,yBAA0B,SAAS,KAAK,YAAY,CAAC,EAAGC,EAAE,KAC/DkD,EAAE,mBAAqB1C,GAAM,CAC3B,EAAE,UAAYA,CACtB,CAAO,EACD,IAAM,SAAS,KAAK,YAAY,CAAC,CACvC,CACG,CACD,OAAOsD,EAAE,eAAgB,CAAE,iBAAkB,EAAE,CAAE,EAAG7D,CACtD,CACA,SAASoK,IAAK,CACZ,OAAO,OAAO,OAAS,GACzB,CACA,eAAeC,IAAK,CAClB,GAAI9G,GAAG,MAAM,EACX,MAAO,GACT,GAAI,CACF,OAAO,MAAMW,EAAE,CAAE,OAAQ,wBAAyB,MAAO,gBAAiB,QAAS,IAAK,EAAG,EAC/F,MAAU,CACN,MAAO,EACR,CACH,CACA,SAASoG,GAAGxK,EAAG,CACb,MAAMC,EAAI,OAAOD,GAAK,SAAW2F,EAAE3F,CAAC,EAAIA,EACxCsG,GAAGrG,CAAC,EACJ,SAASC,EAAEO,EAAG,CACZ,GAAI,OAAOA,GAAK,SACd,GAAI,CACF,KAAM,CAAE,UAAWC,CAAG,EAAGgC,GAAGjC,CAAC,EAC7BC,IAAM,yBAA2BkC,GAAE,gBAAiB,CAClD,aAAc,KAAK,MAAMwD,GAAGnG,EAAE,WAAW,CAAC,CAC3C,CAAA,EAAGS,IAAM,4BAA8BkC,GAAE,mBAAoB,CAC5D,MAAO,OAAO,WACd,OAAQ,OAAO,YACf,gBAAiB,GACjB,YAAa,EACvB,CAAS,CACT,MAAc,CACP,CACJ,CACD,GAAIc,EAAE,EAAI,CACR,MAAMjD,EAAI,OAAO,OAAO,YAAY,KAAK,OAAO,MAAM,EACtD,OAAO,OAAO,YAAeC,GAAM,CACjCR,EAAEQ,CAAC,EAAGD,EAAEC,CAAC,CACf,EACI,MACD,CACD,GAAI8C,GAAG,MAAM,EAAG,CACd,MAAM/C,EAAI,OAAO,SAAS,OAAO,KAAK,OAAO,QAAQ,EACrD,OAAO,SAAS,OAAUC,GAAM,CAC9BR,EAAEQ,CAAC,EAAGD,EAAEC,CAAC,CACf,EACI,MACD,CACD,MAAM,EAAI,OAAO,qBACjB,OAAO,qBAAuB,CAC5B,GAAG,GAAK,CAAE,EACV,aAAaD,EAAG,CACdP,EAAE,KAAK,UAAU,CAAE,UAAWO,EAAE,CAAC,EAAG,UAAWA,EAAE,CAAC,CAAG,CAAA,CAAC,EAAG,GAAK,EAAE,UAAU,GAAGA,CAAC,CAC/E,CACL,CACA,CACA,SAASgK,GAAGzK,EAAG,CACb,OAAOA,aAAamB,CACtB,CACA,SAASuJ,GAAG1K,EAAGC,EAAG,CAChB,OAAOwK,GAAGzK,CAAC,GAAKA,EAAE,OAASC,CAC7B,CACA,SAAS0K,GAAE3K,EAAGC,EAAG,CACf,IAAIC,EAAG,EAAGO,EACV,OAAO,OAAOT,GAAK,SAAWE,EAAIF,GAAKE,EAAIF,EAAE,WAAa,OAASC,EAAID,EAAE,SAAU,EAAIA,EAAE,OAAQS,EAAIT,EAAE,IAAK,OAAO,OAAO,CACxH,GAAIS,IAAM,KAAK,OAAM,EAAK,GAAK,GAAK,GAAG,SAAS,EAAE,EAClD,SAAUP,EACV,OAAQ,CACZ,CAAG,CACH,CACA,MAAM0K,EAAG,CACP,YAAY3K,EAAGC,EAAG,EAAI6D,EAAG,CAsBvB,GAlBA,EAAE,KAAM,SAAS,EACjB,EAAE,KAAM,KAAM,IAAI/C,CAAG,EAIrB,EAAE,KAAM,WAAY,EAAE,EAItB,EAAE,KAAM,OAAQ,IAAM,KAAK,GAAG,EAAE,CAAC,EAIjC,EAAE,KAAM,KAAM,KAAK,GAAG,GAAG,KAAK,KAAK,EAAE,CAAC,EAItC,EAAE,KAAM,MAAO,KAAK,GAAG,IAAI,KAAK,KAAK,EAAE,CAAC,EACpC,KAAK,OAASd,EAAG,KAAK,UAAY,EAAGD,EAAE,SAAW,EACpD,MAAMmB,EAAEQ,GAAI,8BAA8B,EAC5C,GAAI1B,EAAI,GAAKA,GAAKD,EAAE,OAClB,MAAMmB,EACJS,GACA,iEACR,EACI,KAAK,QAAU5B,EAAE,IAAKQ,GAAMkK,GAAElK,EAAG,EAAE,CAAC,CACrC,CAKD,QAAS,CACP,KAAK,WAAa,KAAK,SAAW,GAAI,KAAK,KAAI,EAAI0C,EAAE,sBAAuB,KAAK,IAAI,EACtF,CAID,IAAI,SAAU,CACZ,OAAO,KAAK,QAAQ,KAAK,KAAK,CAC/B,CAID,QAAS,CACP,KAAK,SAAW,GAAID,EAAE,sBAAuB,KAAK,IAAI,CACvD,CAID,SAAU,CACR,KAAK,GAAG,CAAC,CACV,CAQD,GAAGjD,EAAGC,EAAG,CACP,MAAM,EAAI,KAAK,MAAQD,EAAGQ,EAAI,KAAK,IACjC,KAAK,IAAI,EAAG,CAAC,EACb,KAAK,QAAQ,OAAS,CAC5B,GACK,IAAMA,GAAKP,IAAM,KAAK,eAAeO,EAAG,KAAK,QAAQA,CAAC,CAAC,CACzD,CASD,KAAKR,EAAGC,EAAG,CACT,KAAK,GAAGD,EAAI,KAAK,MAAOC,CAAC,CAC1B,CAID,IAAI,SAAU,CACZ,OAAO,KAAK,MAAQ,CACrB,CAID,IAAI,SAAU,CACZ,OAAO,KAAK,QAAU,KAAK,QAAQ,OAAS,CAC7C,CAID,IAAI,OAAQ,CACV,OAAO,KAAK,MACb,CAKD,KAAKD,EAAG,CACN,KAAK,SAAW,KAAK,QAAQ,OAAO,KAAK,MAAQ,CAAC,EAAG,KAAK,eAAe,KAAK,MAAQ,EAAG0K,GAAE1K,EAAG,KAAK,QAAQ,QAAQ,CAAC,CACrH,CAKD,QAAQA,EAAG,CACT,KAAK,eAAe,KAAK,MAAO0K,GAAE1K,EAAG,KAAK,QAAQ,QAAQ,CAAC,CAC5D,CAMD,eAAeA,EAAGC,EAAG,CACnB,MAAM,EAAID,EAAI,KAAK,MACnB,GAAI,CAAC,GAAK,KAAK,UAAYC,EACzB,OACF,MAAMO,EAAI,KAAK,QACf,GAAI,KAAK,QAAUR,EAAG,CACpB,MAAMS,EAAI,KAAK,OACf,KAAK,OAAST,EAAG,KAAK,UAAYS,EAAI,GAAKT,EAAI,GAAK,KAAK,KAAI,CAC9D,CACD,KAAK,QAAQA,CAAC,EAAIC,EAAG,KAAK,GAAG,KAAK,SAAU,CAC1C,UAAW,KACX,KAAMO,EACN,GAAI,KAAK,QACT,MAAO,CACb,CAAK,CACF,CAID,MAAO,CACL,KAAK,UAAU,4BAA6B,CAAE,WAAY,CAAC,CAAC,KAAK,KAAK,CAAE,CACzE,CACH,CACA,SAASoK,GAAE,CACT,OAAQ7K,EACR,GAAGC,CACL,EAAG,CACD,MAAO,CAAE,GAAGD,GAAK,CAAE,KAAM,GAAI,OAAQ,EAAE,EAAI,GAAGC,EAChD,CACA,SAAS6K,EAAE9K,EAAG,CACZ,MAAMC,EAAI,OAAOD,GAAK,SAAWA,EAAE,WAAW,GAAG,EAAI,CAAC,EAAEA,EAAE,UAAYA,EAAE,SAAS,WAAW,GAAG,GAAIE,EAAIwJ,EAAE1J,CAAC,EAC1G,MAAO,GAAGC,EAAIC,EAAE,SAAWA,EAAE,SAAS,MAAM,CAAC,CAAC,GAAGA,EAAE,MAAM,GAAGA,EAAE,IAAI,EACpE,CACA,SAAS6K,GAAE/K,EAAGC,EAAGC,EAAG,CAClB,IAAI,EAAGO,EACP,OAAOT,GAAK,SAAW,EAAIA,GAAK,EAAI8K,EAAE9K,CAAC,EAAGE,EAAIF,EAAE,MAAOS,EAAIT,EAAE,IAC7D,KAAM,CAAE,SAAUU,EAAG,OAAQ,EAAG,KAAM,GAAM,IAAI,IAAI,EAAG,WAAW+I,EAAExJ,EAAG,GAAG,CAAC,EAAE,EAC7E,MAAO,CAAE,GAAIQ,EAAG,SAAUC,EAAG,OAAQ,CAAE,KAAM,EAAG,OAAQ,EAAG,MAAOR,CAAG,CAAA,CACvE,CACA,eAAe8K,EAAEhL,EAAG,CAClB,OAAOA,IAAM,EAAI,GAAK,QAAQ,KAAK,CACjC,IAAI,QAASC,GAAM,CACjB,MAAMC,EAAIe,GAAE,WAAY,IAAM,CAC5Bf,IAAKD,EAAE,EAAE,CACjB,CAAO,EACD,OAAO,QAAQ,GAAGD,CAAC,CACzB,CAAK,EAED,IAAI,QAASC,GAAM,CACjB,WAAWA,EAAG,GAAI,EAAE,CAC1B,CAAK,CACL,CAAG,CACH,CACA,eAAegL,IAAK,CAClB,GAAI,OAAO,QAAQ,QAAU,IAAM,OAAO,QAAQ,UAAU,KAAM,EAAE,EAAG,MAAMD,EAAE,EAAI,OAAO,QAAQ,MAAM,GACtG,OACF,IAAI,EAAI,MAAMA,EAAE,EAAE,EAClB,KAAO,GACL,EAAI,MAAMA,EAAE,EAAE,CAClB,CACA,SAASE,GAAGlL,EAAG,CACb,OAAO0J,EAAE1J,CAAC,EAAE,QACd,CACA,MAAMmL,GAAK,EAAGC,GAAI,EAAGC,GAAI,EACzB,MAAMC,EAAG,CACP,YAAYrL,EAAGC,EAAG,CAAE,UAAW,EAAG,SAAUO,EAAI,UAAW,KAAMC,CAAC,EAAK,CAAA,EAAI,CACzE,EAAE,KAAM,WAAW,EACnB,EAAE,KAAM,KAAM,IAAIM,CAAG,EACrB,EAAE,KAAM,UAAU,EAClB,EAAE,KAAM,MAAM,EAId,EAAE,KAAM,WAAY,EAAE,EAKtB,EAAE,KAAM,aAAc,CAAC,CAAE,MAAOf,CAAC,IAAO,CACtC,GAAIA,IAAM,KACR,OAAO,KAAK,KAAK,KAAK,UAAU,OAAO,SAAS,IAAI,CAAC,EACvDA,IAAMkL,GAAK,OAAO,QAAQ,QAAO,EAAKlL,IAAMmL,IAAK,KAAK,KAAM,EAAEnL,IAAMoL,IAAK,KAAK,QAAO,CAC3F,CAAK,EAID,EAAE,KAAM,oBAAqB,MAAO,CAClC,GAAIpL,EACJ,KAAMC,EACN,MAAO8E,CACb,IAAU,CACJ,KAAK,UAAY,MAAM,KAAK,YAAa,EAAE,KAAK,GAAG,KAAK,SAAU,CAChE,MAAOA,EACP,KAAM6F,GAAE3K,CAAC,EACT,GAAI2K,GAAE5K,CAAC,EACP,UAAW,IACnB,CAAO,CACP,CAAK,EAID,EAAE,KAAM,KAAM,KAAK,GAAG,GAAG,KAAK,KAAK,EAAE,CAAC,EAItC,EAAE,KAAM,MAAO,KAAK,GAAG,IAAI,KAAK,KAAK,EAAE,CAAC,EACxC,KAAK,UAAY,IAAI2K,GACnB3K,EAAE,IAAK,GAAM8K,GAAE,EAAG,GAAG,CAAC,EACtB7K,EACA,CACD,EAAE,KAAK,UAAU,GAAG,SAAW,GAAM,CACpC,KAAK,kBAAkB,CAAC,CAC9B,CAAK,EAAG,KAAK,SAAWO,EAAG,KAAK,KAAOyK,GAAGxK,GAAK,EAAE,CAC9C,CAID,MAAM,QAAS,CACb,KAAK,WAAa,KAAK,SAAW,GAAI,KAAK,UAAU,OAAM,EAAI,OAAO,iBAAiB,WAAY,KAAK,UAAU,EAAG,MAAM,KAAK,YAAW,EAC5I,CAID,MAAO,CACL,KAAK,UAAU,MAChB,CAID,QAAS,CACP,KAAK,SAAW,GAAI,KAAK,UAAU,SAAU,OAAO,oBAAoB,WAAY,KAAK,UAAU,CACpG,CAID,SAAU,CACR,OAAO,KAAK,UAAU,SACvB,CAID,IAAI,OAAQ,CACV,OAAO,KAAK,UAAU,KACvB,CAID,IAAI,IAAK,CACP,OAAO,KAAK,UAAU,QAAQ,EAC/B,CAQD,GAAGT,EAAGC,EAAG,CACP,OAAO,KAAK,UAAU,GAAGD,EAAGC,CAAC,CAC9B,CASD,KAAKD,EAAGC,EAAG,CACT,KAAK,UAAU,KAAKD,EAAGC,CAAC,CACzB,CAOD,IAAI,MAAO,CACT,OAAQ,KAAK,UAAU,QAAQ,QAAU,CAAE,GAAE,MAAQ,EACtD,CAID,IAAI,SAAU,CACZ,OAAO,KAAK,UAAU,OACvB,CAID,IAAI,SAAU,CACZ,OAAO,KAAK,UAAU,OACvB,CAID,IAAI,SAAU,CACZ,OAAO,KAAK,UAAU,QAAQ,IAAI2K,EAAC,CACpC,CAYD,IAAI,MAAO,CACT,OAAOC,EAAE,IAAI,CACd,CAOD,IAAI,UAAW,CACb,OAAO,KAAK,UAAU,QAAQ,QAC/B,CAkBD,UAAU7K,EAAG,CACX,IAAIC,EAAIwJ,EAAEzJ,CAAC,EACX,OAAO,KAAK,WAAaC,EAAIwJ,EAAExJ,EAAE,KAAK,MAAM,CAAC,CAAC,GAAI,CAChD,SAAUA,EAAE,SACZ,OAAQA,EAAE,OACV,KAAMA,EAAE,IACd,CACG,CACD,KAAKD,EAAGC,EAAG,CACT,MAAM,EAAI6K,GAAE9K,EAAG,KAAK,IAAI,EAAG,CAAE,MAAOQ,EAAIP,GAAM,EAAE,OAChD,KAAK,UAAU,KAAK,CAAE,GAAG,EAAG,OAAQ,CAAE,GAAG,EAAE,OAAQ,MAAOO,CAAC,CAAI,CAAA,CAChE,CACD,QAAQR,EAAGC,EAAG,CACZ,MAAM,EAAI6K,GAAE9K,EAAG,KAAK,IAAI,EAAG,CAAE,MAAOQ,EAAIP,GAAM,EAAE,OAChD,KAAK,UAAU,QAAQ,CAAE,GAAG,EAAG,OAAQ,CAAE,GAAG,EAAE,OAAQ,MAAOO,CAAC,CAAI,CAAA,CACnE,CAMD,WAAWR,EAAG,CACZ,MAAMC,GAAK,KAAK,KAAK,SAAW,EAAI,GAAK,KAAK,MAAQuJ,EAAEqB,EAAE7K,CAAC,EAAG,GAAG,EACjE,OAAO,KAAK,SAAWwJ,EAAEvJ,EAAE,MAAM,CAAC,EAAG,KAAK,WAAa,UAAY,IAAM,IAAI,EAAIA,CAClF,CAID,MAAM,aAAc,CAClB,OAAO,oBAAoB,WAAY,KAAK,UAAU,EACtD,KAAM,CAAE,MAAOD,GAAM,KAAMC,EAAI,KAAK,WAAW,IAAI,EACnD,MAAM+K,GAAI,EAAE,KAAK,SAAW,KAAK,SAAW,OAAO,QAAQ,aAAaG,GAAG,EAAE,EAAG,OAAO,QAAQ,UAAUnL,EAAG,GAAIC,CAAC,EAAG,OAAO,QAAQ,UAAUmL,GAAG,EAAE,EAAG,MAAML,EAAE,EAAE,GAAK,KAAK,SAAW,OAAO,QAAQ,aAAaI,GAAG,EAAE,EAAG,OAAO,QAAQ,UAAUnL,EAAG,GAAIC,CAAC,GAAK,KAAK,SAAW,OAAO,QAAQ,aAAaD,EAAGC,CAAC,EAAG,OAAO,QAAQ,UAAUmL,GAAG,EAAE,EAAG,MAAML,EAAE,EAAE,IAAM,OAAO,QAAQ,aAAaG,GAAI,EAAE,EAAG,OAAO,QAAQ,UAAUlL,EAAG,GAAIC,CAAC,GAAI,OAAO,iBAAiB,WAAY,KAAK,UAAU,CAChe,CAOD,IAAI,QAAS,CACX,OAAQ,KAAK,UAAU,QAAQ,QAAU,CAAE,GAAE,QAAU,EACxD,CAID,IAAI,OAAQ,CACV,OAAQ,KAAK,UAAU,QAAQ,QAAU,CAAE,GAAE,KAC9C,CACH,CACA,SAASqL,GAAGvL,EAAG,CACbA,IAAMA,EAAI,CAAA,GACV,KAAM,CAAE,KAAMC,EAAG,KAAMC,CAAG,EAAG,OAAO,SACpC,IAAI,EAAI4K,EACN9K,EAAE,WAAa,KAAOC,EAAIC,EAAE,SAAS,GAAG,EAAIA,EAAE,MAAM,CAAC,EAAI,IAAIA,EAAE,MAAM,CAAC,CAAC,EAC3E,EACE,MAAMO,EAAIT,EAAE,KAAOkL,GAAGlL,EAAE,IAAI,EAAI,OAChC,GAAIS,EAAG,CACL,GAAI,CAAC,EAAE,WAAWA,CAAC,EACjB,MAAMW,EACJY,GACA,SAAS,CAAC,mCAAmCvB,CAAC,GACtD,EACI,EAAI,EAAE,MAAMA,EAAE,MAAM,CACrB,CACD,OAAO,IAAI6K,GAAG,CAAC,CAAC,EAAG,EAAGtL,CAAC,CACzB,CACA,SAASwL,GAAGxL,EAAG,CACb,MAAMC,EAAID,EAAE,MAAM,OAAO,EACzB,OAAOC,EAAIA,EAAE,CAAC,EAAI,IACpB,CACA,SAASwL,GAAGzL,EAAGC,EAAG,CAChB,GAAIuG,GAAE,EAAI,CACR,MAAMtG,EAAI,eAAe,QAAQF,CAAC,EAClC,GAAIE,EACF,GAAI,CACF,KAAM,CAAE,MAAO,EAAG,QAASO,CAAC,EAAK,KAAK,MAAMP,CAAC,EAC7C,OAAO,IAAIoL,GACT7K,EACA,EACAR,CACV,CACO,OAAQ,EAAG,CACV,QAAQ,MAAM,0CAA2C,CAAC,CAC3D,CACJ,CACD,OAAOsL,GAAGtL,CAAC,CACb,CACA,SAASyL,GAAG1L,EAAGC,EAAG,CAChB,MAAMC,EAAIuL,GAAGzL,EAAGC,CAAC,EAAG,EAAI,IAAM,eAAe,QAAQD,EAAG,KAAK,UAAU,CACrE,MAAOE,EAAE,MACT,QAASA,EAAE,OACZ,CAAA,CAAC,EACF,OAAOA,EAAE,GAAG,SAAU,CAAC,EAAG,EAAG,EAAEA,CACjC,CC75FgB,SAAAyL,EACdC,EACAC,EACqB,CACrB,SAASC,EAAuDC,EAAuB,CACrF,OAAO,SAAaC,EAASC,EAAKC,EAAW,CAC3C,OAAQC,GAAU,CAChB,MAAMC,EAAc,CAClB,GAAGD,EACH,CAACH,CAAO,EAAGD,EAAKE,CAAU,CAAA,EAGrB,OAAAI,GAAA,IAACH,EAAW,CAAA,GAAGE,CAAO,CAAA,CAAA,CAC/B,CAEJ,CAEA,MAAO,CAACN,EAAUF,CAAM,EAAGE,EAAUD,CAAS,CAAC,CACjD,CChDa,MAAAS,GAAaC,EAAAA,cAA0C,MAAS,EAMtE,SAASC,IAAyB,CACjC,MAAAC,EAAUC,aAAWJ,EAAU,EACrC,GAAI,CAACG,EACG,MAAA,IAAI,MAAM,0CAA0C,EAErD,OAAAA,CACT,CCsBO,SAASE,EAAmCC,EAAkC,CAGnF,SAAShB,EAAOK,EAAkE,CAChF,MAAMY,EAAML,KAEN,CAACM,EAAQC,CAAS,EAAIC,EAAA,SAC1Bf,EAGI,OAEA,IAAM,CACN,GAAIgB,KACI,MAAA,IAAI,MAAM,+EAA+E,EAE1F,OAAAJ,EAAI,IAAID,CAAO,CACxB,CAAA,EAIJM,OAAAA,EAAAA,UAAU,IAAM,CACJH,EAAAF,EAAI,IAAID,CAAO,CAAC,CAAA,EACzB,CAACC,CAAG,CAAC,EAEDC,CACT,CAIA,SAASjB,EAAUI,EAAkD,CAC7D,MAAAkB,EAAMvB,EAAOK,CAAU,EAC7B,GAAKkB,EAGL,IAAI,UAAWA,EACb,MAAMA,EAAI,MAEZ,OAAOA,EAAI,OACb,CAEO,MAAA,CAACvB,EAAQC,CAAS,CAC3B,CC3EO,KAAM,CAACuB,GAAkBC,EAAa,EAAIV,EAAYW,EAAc,EAE9D,CAACC,GAAmBC,EAAc,EAAI7B,EACjDyB,GACAC,EACF,ECLa,CAACI,GAAuBC,EAAkB,EAAIf,EAAYgB,EAAmB,EAE7E,CAACC,GAAwBC,EAAmB,EAAIlC,EAC3D8B,GACAC,EACF,ECLa,CAACI,GAAuBC,EAAkB,EAAIpB,EAAYqB,EAAmB,EAE7E,CAACC,GAAwBC,EAAmB,EAAIvC,EAC3DmC,GACAC,EACF,ECLa,CAACI,GAAoBC,EAAe,EAAIzB,EAAY0B,EAAgB,EAEpE,CAACC,GAAqBC,EAAgB,EAAI5C,EACrDwC,GACAC,EACF,ECLa,CAACI,GAAsBC,EAAiB,EAAI9B,EAAY+B,EAAkB,EAE1E,CAACC,GAAuBC,EAAkB,EAAIjD,EACzD6C,GACAC,EACF,ECLa,CAACI,GAAgBC,EAAW,EAAInC,EAAYoC,EAAY,EAExD,CAACC,GAAiBC,EAAY,EAAItD,EAAWkD,GAAgBC,EAAW,ECFxE,CAACI,GAAeC,EAAU,EAAIxC,EAAYyC,EAAW,EAErD,CAACC,GAAgBC,EAAW,EAAI3D,EAAWuD,GAAeC,EAAU,ECFpE,CAACI,GAAkBC,EAAa,EAAI7C,EAAY8C,EAAc,EAE9D,CAACC,GAAmBC,EAAc,EAAIhE,EAAW4D,GAAkBC,EAAa,ECFhF,CAACI,GAAeC,EAAU,EAAIlD,EAAYmD,EAAW,EAErD,CAACC,GAAgBC,EAAW,EAAIrE,EAAWiE,GAAeC,EAAU,ECFpE,CAACI,GAAaC,EAAQ,EAAIvD,EAAYwD,EAAS,EAE/C,CAACC,GAAcC,EAAS,EAAI1E,EAAWsE,GAAaC,EAAQ,ECF5D,CAACI,GAAiBC,EAAY,EAAI5D,EAAY6D,EAAa,EAE3D,CAACC,GAAkBC,EAAa,EAAI/E,EAAW2E,GAAiBC,EAAY,ECF5E,CAACI,GAAsBC,EAAiB,EAAIjE,EAAYkE,EAAkB,EAE1E,CAACC,GAAuBC,EAAkB,EAAIpF,EACzDgF,GACAC,EACF,ECLa,CAACI,GAAqBC,EAAgB,EAAItE,EAAYuE,EAAiB,EAEvE,CAACC,GAAsBC,EAAiB,EAAIzF,EACvDqF,GACAC,EACF,ECLa,CAACI,GAAmBC,EAAc,EAAI3E,EAAY4E,EAAe,EAEjE,CAACC,GAAoBC,EAAe,EAAI9F,EAAW0F,GAAmBC,EAAc,ECM1F,SAASI,GAAgBzF,EAAyC,CACvE,KAAM,CAAC0F,EAAIC,CAAK,EAAI5E,WAAmC,IAC9Cf,EAAM,OAAY4F,GAC1B,EAED3E,OAAAA,EAAAA,UAAU,IAAM,CACVjB,GACF2F,EAAMC,GAAsB,CAEhC,EAAG,CAAE,CAAA,EAEEF,CACT,CCpBO,KAAM,CAACG,GAAaC,EAAQ,EAAIpF,EAAYqF,EAAS,EAE/C,CAACC,GAAcC,EAAS,EAAIvG,EAAWmG,GAAaC,EAAQ,ECF5D,CAACI,GAAgBC,EAAW,EAAIzF,EAAY0F,EAAY,EAExD,CAACC,GAAiBC,EAAY,EAAI5G,EAAWwG,GAAgBC,EAAW,ECQ9E,SAASI,GAAY,CAAE,SAAAC,EAAU,mBAAAC,EAAoB,MAAAC,GAA2B,CAG/E,MAAAC,EAAeC,SAAO,EAAI,EAG1B,CAACC,EAAOC,CAAQ,EAAI/F,EAAAA,SAAS,IAAI,GAAiC,EAClEgG,EAAWH,SAAOC,CAAK,EAGvBG,EAAcC,EAAA,YACjBC,GAA8D,CACzDP,EAAa,SACfG,EAAcK,IACZD,GAAUA,EAAOC,CAAC,EACX,IAAI,IAAIA,CAAC,EACjB,CAEL,EAAG,CAAC,CAAA,EAGA3G,EAAU4G,EAAAA,QAAwB,KAAO,CAC7C,IAAIzG,KAAY0G,EAAM,CAEd,MAAAC,GAAST,EAAM,IAAIlG,CAAO,EAChC,GAAI2G,GACK,OAAAA,GAIL,IAAAzG,EACA0G,EACA,GAAA,CACO1G,EAAAF,EAAQ,GAAG0G,CAAI,QACjBG,EAAK,CACJD,EAAAC,CACV,CAEA,SAASC,EAAaC,EAAgD,CAC9D,OAAAb,EAAA,IAAIlG,EAAS+G,CAAI,EAChBA,CACT,CAGA,GAAIH,EACK,OAAAE,EAAa,CAAE,MAAAF,CAAA,CAAO,EAK3B,IAAAI,EAQJ,GAPI,MAAM,QAAQ9G,CAAM,IACtB8G,EAAU9G,EAAO,CAAC,EAClBA,EAASA,EAAO,CAAC,GAKf,CAACA,EACH,OAAO4G,EAAa,CAAE,OAAA5G,EAAQ,QAAA8G,CAAS,CAAA,EAKzC,SAASC,GAAStQ,EAA6B,CAC7C,GAAI,OAAQA,EAAG,CAEb,MAAMuQ,EAAMvQ,EAAE,GAAG,SAAU,IAAM0P,GAAa,EACxCc,GAAkBH,EACxBA,EAAU,IAAM,CACdG,IAAmBA,GAAgB,EAC/BD,GAAA,CAER,CACO,MAAA,CAAE,OAAQvQ,EAAG,QAAAqQ,EACtB,CAEA,OAAI9G,aAAkB,SACbA,EAAA,KACJkH,GAAef,EAAiBG,GAAAA,EAAE,IAAIxG,EAASiH,GAASG,CAAK,CAAC,CAAC,EAC/DR,GAAeP,EAAiBG,GAAAA,EAAE,IAAIxG,EAAS,CAAE,MAAA4G,CAAM,CAAC,CAAC,CAAA,EAErDE,EAAa,CAAA,CAAE,GAEjBA,EAAaG,GAAS/G,CAAM,CAAC,CACtC,CAAA,GACE,CAACgG,CAAK,CAAC,EAGX5F,OAAAA,EAAAA,UAAU,KAER0F,EAAa,QAAU,GAChB,IAAM,CACXA,EAAa,QAAU,EAAA,GAExB,CAAE,CAAA,EAGL1F,EAAAA,UAAU,IAAM,CACd,GAAI+G,IACF,OAAOC,GAAQxB,CAAkB,CACnC,EACC,CAACA,CAAkB,CAAC,EAGvBxF,EAAAA,UAAU,IAAM,CACdiH,GAASxB,GAAS,EAAK,CAAA,EACtB,CAACA,CAAK,CAAC,EAIVzF,EAAAA,UAAU,IAAM,CACd8F,EAAS,QAAUF,CAAA,EAClB,CAACA,CAAK,CAAC,EAGV5F,EAAAA,UAAU,IACD,IAAM,CACF8F,EAAA,QAAQ,QAAazP,GAAA,CAC5B,YAAaA,GAAKA,EAAE,SAAWA,EAAE,QAAQ,CAAA,CAC1C,CAAA,EAEF,CAAE,CAAA,SAEG+I,GAAW,SAAX,CAAoB,MAAOG,EAAU,SAAAgG,CAAS,CAAA,CACxD"}